{"ast":null,"code":"var _jsxFileName = \"D:\\\\AIprojects\\\\RagChatbot\\\\frontend\\\\src\\\\ConsolidatedApp.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\n// import React, { useState, useRef, useEffect, useCallback } from \"react\";\n// import { Send, Bot, User, MessageSquare, Loader, Sparkles, Upload, File, X, CheckCircle, AlertCircle, FileText } from \"lucide-react\";\n\n// // Types\n// export interface UploadedFile {\n//   id: string;\n//   name: string;\n//   size: number;\n//   type: string;\n//   uploadedAt: Date;\n// }\n\n// export interface ChatMessage {\n//   id: string;\n//   type: 'user' | 'bot';\n//   content: string;\n//   timestamp: Date;\n// }\n\n// // Basic UI Components\n// const Button = React.forwardRef<\n//   HTMLButtonElement,\n//   React.ButtonHTMLAttributes<HTMLButtonElement> & {\n//     variant?: \"default\" | \"ghost\";\n//     size?: \"default\" | \"sm\";\n//   }\n// >(({ className = \"\", variant = \"default\", size = \"default\", ...props }, ref) => {\n//   const baseClasses = \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 disabled:pointer-events-none disabled:opacity-50\";\n//   const variantClasses = {\n//     default: \"bg-blue-600 text-white hover:bg-blue-700\",\n//     ghost: \"hover:bg-gray-100 hover:text-gray-900\"\n//   };\n//   const sizeClasses = {\n//     default: \"h-10 px-4 py-2\",\n//     sm: \"h-9 rounded-md px-3\"\n//   };\n\n//   return (\n//     <button\n//       className={`${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${className}`}\n//       ref={ref}\n//       {...props}\n//     />\n//   );\n// });\n\n// const Textarea = React.forwardRef<\n//   HTMLTextAreaElement,\n//   React.TextareaHTMLAttributes<HTMLTextAreaElement>\n// >(({ className = \"\", ...props }, ref) => (\n//   <textarea\n//     className={`flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${className}`}\n//     ref={ref}\n//     {...props}\n//   />\n// ));\n\n// // Header Component\n// const Header = () => {\n//   return (\n//     <header className=\"bg-white/90 backdrop-blur-md border-b border-gray-200/50 sticky top-0 z-50\">\n//       <div className=\"container mx-auto px-4 py-4\">\n//         <div className=\"flex items-center gap-3\">\n//           <div className=\"flex items-center gap-3\">\n//             <div className=\"relative\">\n//               <div className=\"absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl blur-sm opacity-75\"></div>\n//               <div className=\"relative p-3 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl\">\n//                 <Bot className=\"h-6 w-6 text-white\" />\n//               </div>\n//             </div>\n//             <div>\n//               <h1 className=\"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent\">\n//                 DocuChat AI\n//               </h1>\n//               <p className=\"text-sm text-gray-500 flex items-center gap-1\">\n//                 <Sparkles className=\"h-3 w-3\" />\n//                 Intelligent Document Assistant\n//               </p>\n//             </div>\n//           </div>\n//         </div>\n//       </div>\n//     </header>\n//   );\n// };\n\n// // Document Upload Component\n// const DocumentUpload = ({ onFileUpload, uploadedFiles, onDeleteFile, isUploading }: {\n//   onFileUpload: (files: File[]) => void;\n//   uploadedFiles: UploadedFile[];\n//   onDeleteFile: (fileId: string) => void;\n//   isUploading: boolean;\n// }) => {\n//   const [isDragOver, setIsDragOver] = useState(false);\n\n//   const handleDragOver = useCallback((e: React.DragEvent) => {\n//     e.preventDefault();\n//     setIsDragOver(true);\n//   }, []);\n\n//   const handleDragLeave = useCallback((e: React.DragEvent) => {\n//     e.preventDefault();\n//     setIsDragOver(false);\n//   }, []);\n\n//   const handleDrop = useCallback((e: React.DragEvent) => {\n//     e.preventDefault();\n//     setIsDragOver(false);\n\n//     const files = Array.from(e.dataTransfer.files);\n//     if (files.length > 0) {\n//       onFileUpload(files);\n//     }\n//   }, [onFileUpload]);\n\n//   const handleFileSelect = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n//     const files = Array.from(e.target.files || []);\n//     if (files.length > 0) {\n//       onFileUpload(files);\n//     }\n//     e.target.value = '';\n//   }, [onFileUpload]);\n\n//   const formatFileSize = (bytes: number) => {\n//     if (bytes === 0) return '0 Bytes';\n//     const k = 1024;\n//     const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n//     const i = Math.floor(Math.log(bytes) / Math.log(k));\n//     return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n//   };\n\n//   const getFileIcon = (type: string) => {\n//     if (type.includes('pdf')) return 'üìÑ';\n//     if (type.includes('word') || type.includes('document')) return 'üìù';\n//     if (type.includes('text')) return 'üìã';\n//     if (type.includes('image')) return 'üñºÔ∏è';\n//     return 'üìÅ';\n//   };\n\n//   return (\n//     <div className=\"space-y-6\">\n//       <div\n//         className={`\n//           relative border-2 border-dashed rounded-xl p-8 text-center transition-all duration-300\n//           ${isDragOver \n//             ? 'border-blue-400 bg-blue-50 scale-105' \n//             : 'border-gray-300 hover:border-gray-400 hover:bg-gray-50'\n//           }\n//           ${isUploading ? 'pointer-events-none opacity-50' : 'cursor-pointer'}\n//         `}\n//         onDragOver={handleDragOver}\n//         onDragLeave={handleDragLeave}\n//         onDrop={handleDrop}\n//         onClick={() => document.getElementById('file-input')?.click()}\n//       >\n//         <input\n//           id=\"file-input\"\n//           type=\"file\"\n//           multiple\n//           className=\"hidden\"\n//           onChange={handleFileSelect}\n//           accept=\".pdf,.doc,.docx,.txt,.rtf,.odt\"\n//         />\n\n//         {isUploading ? (\n//           <div className=\"space-y-4\">\n//             <div className=\"flex justify-center\">\n//               <Loader className=\"h-12 w-12 text-blue-500 animate-spin\" />\n//             </div>\n//             <div>\n//               <p className=\"text-lg font-medium text-gray-900\">Uploading documents...</p>\n//               <p className=\"text-sm text-gray-500\">Please wait while we process your files</p>\n//             </div>\n//           </div>\n//         ) : (\n//           <div className=\"space-y-4\">\n//             <div className=\"flex justify-center\">\n//               <div className={`p-4 rounded-full transition-colors duration-300 ${\n//                 isDragOver ? 'bg-blue-100' : 'bg-gray-100'\n//               }`}>\n//                 <Upload className={`h-8 w-8 transition-colors duration-300 ${\n//                   isDragOver ? 'text-blue-500' : 'text-gray-400'\n//                 }`} />\n//               </div>\n//             </div>\n//             <div>\n//               <p className=\"text-lg font-medium text-gray-900\">\n//                 {isDragOver ? 'Drop your files here' : 'Upload your documents'}\n//               </p>\n//               <p className=\"text-sm text-gray-500 mt-1\">\n//                 Drag and drop or click to browse\n//               </p>\n//               <p className=\"text-xs text-gray-400 mt-2\">\n//                 Supports PDF, DOC, DOCX, TXT files\n//               </p>\n//             </div>\n//           </div>\n//         )}\n//       </div>\n\n//       {uploadedFiles.length > 0 && (\n//         <div className=\"space-y-3\">\n//           <h3 className=\"text-sm font-medium text-gray-700 flex items-center gap-2\">\n//             <CheckCircle className=\"h-4 w-4 text-green-500\" />\n//             Uploaded Files ({uploadedFiles.length})\n//           </h3>\n\n//           <div className=\"space-y-2 max-h-64 overflow-y-auto\">\n//             {uploadedFiles.map((file) => (\n//               <div\n//                 key={file.id}\n//                 className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg border hover:bg-gray-100 transition-colors\"\n//               >\n//                 <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n//                   <span className=\"text-lg\">{getFileIcon(file.type)}</span>\n//                   <div className=\"flex-1 min-w-0\">\n//                     <p className=\"text-sm font-medium text-gray-900 truncate\">\n//                       {file.name}\n//                     </p>\n//                     <p className=\"text-xs text-gray-500\">\n//                       {formatFileSize(file.size)} ‚Ä¢ {file.uploadedAt.toLocaleDateString()}\n//                     </p>\n//                   </div>\n//                 </div>\n\n//                 <Button\n//                   variant=\"ghost\"\n//                   size=\"sm\"\n//                   onClick={() => onDeleteFile(file.id)}\n//                   className=\"text-gray-400 hover:text-red-500 h-8 w-8 p-0\"\n//                 >\n//                   <X className=\"h-4 w-4\" />\n//                 </Button>\n//               </div>\n//             ))}\n//           </div>\n//         </div>\n//       )}\n\n//       {uploadedFiles.length === 0 && !isUploading && (\n//         <div className=\"text-center py-8\">\n//           <AlertCircle className=\"h-8 w-8 text-gray-300 mx-auto mb-3\" />\n//           <p className=\"text-sm text-gray-500\">No documents uploaded yet</p>\n//           <p className=\"text-xs text-gray-400 mt-1\">Upload some documents to start chatting</p>\n//         </div>\n//       )}\n//     </div>\n//   );\n// };\n\n// // Chat Interface Component\n// const ChatInterface = ({ messages, onSendMessage, isGenerating, hasDocuments }: {\n//   messages: ChatMessage[];\n//   onSendMessage: (message: string) => void;\n//   isGenerating: boolean;\n//   hasDocuments: boolean;\n// }) => {\n//   const [inputMessage, setInputMessage] = useState(\"\");\n//   const messagesEndRef = useRef<HTMLDivElement>(null);\n//   const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n//   const scrollToBottom = () => {\n//     messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n//   };\n\n//   useEffect(() => {\n//     scrollToBottom();\n//   }, [messages]);\n\n//   const handleSubmit = (e: React.FormEvent) => {\n//     e.preventDefault();\n//     if (inputMessage.trim() && !isGenerating && hasDocuments) {\n//       onSendMessage(inputMessage.trim());\n//       setInputMessage(\"\");\n//     }\n//   };\n\n//   const handleKeyDown = (e: React.KeyboardEvent) => {\n//     if (e.key === 'Enter' && !e.shiftKey) {\n//       e.preventDefault();\n//       handleSubmit(e);\n//     }\n//   };\n\n//   return (\n//     <div className=\"flex flex-col h-full bg-gradient-to-b from-white to-gray-50/50\">\n//       <div className=\"p-6 border-b border-gray-100/80 bg-white/70 backdrop-blur-sm\">\n//         <div className=\"flex items-center gap-4\">\n//           <div className=\"relative\">\n//             <div className=\"absolute inset-0 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl blur-sm opacity-20\"></div>\n//             <div className=\"relative p-3 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl shadow-lg\">\n//               <MessageSquare className=\"h-6 w-6 text-white\" />\n//             </div>\n//           </div>\n//           <div className=\"flex-1\">\n//             <h2 className=\"text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent\">\n//               AI Assistant\n//             </h2>\n//             <p className=\"text-sm text-gray-500 flex items-center gap-2\">\n//               <Sparkles className=\"h-3 w-3\" />\n//               {hasDocuments \n//                 ? \"Ready to answer questions about your documents\" \n//                 : \"Upload documents to start an intelligent conversation\"\n//               }\n//             </p>\n//           </div>\n//           <div className=\"flex items-center gap-2\">\n//             <div className={`w-2 h-2 rounded-full ${hasDocuments ? 'bg-green-400' : 'bg-amber-400'} animate-pulse`}></div>\n//             <span className=\"text-xs text-gray-500 font-medium\">\n//               {hasDocuments ? 'Ready' : 'Waiting'}\n//             </span>\n//           </div>\n//         </div>\n//       </div>\n\n//       <div className=\"flex-1 overflow-hidden\">\n//         <div className=\"h-full overflow-y-auto p-6 space-y-6\">\n//           {messages.length === 0 ? (\n//             <div className=\"flex flex-col items-center justify-center h-full text-center py-16\">\n//               <div className=\"relative mb-6\">\n//                 <div className=\"absolute inset-0 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-full blur-xl opacity-50\"></div>\n//                 <div className=\"relative w-20 h-20 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-full flex items-center justify-center border border-blue-100/50\">\n//                   <Bot className=\"h-10 w-10 text-blue-500\" />\n//                 </div>\n//               </div>\n//               <h3 className=\"text-2xl font-bold text-gray-900 mb-3\">\n//                 Welcome to DocuChat AI\n//               </h3>\n//               <p className=\"text-gray-500 max-w-md leading-relaxed\">\n//                 {hasDocuments \n//                   ? \"Your documents are ready! Start by asking me any questions about their content and I'll provide detailed insights.\"\n//                   : \"Upload your documents first, then I'll be ready to provide intelligent answers and insights about their content.\"\n//                 }\n//               </p>\n//               {hasDocuments && (\n//                 <div className=\"mt-6 p-4 bg-blue-50/50 rounded-xl border border-blue-100\">\n//                   <p className=\"text-sm text-blue-600 font-medium\">üí° Try asking questions like:</p>\n//                   <ul className=\"mt-2 text-xs text-blue-500 space-y-1\">\n//                     <li>‚Ä¢ \"What are the main topics covered?\"</li>\n//                     <li>‚Ä¢ \"Can you summarize the key points?\"</li>\n//                     <li>‚Ä¢ \"What specific details about [topic]?\"</li>\n//                   </ul>\n//                 </div>\n//               )}\n//             </div>\n//           ) : (\n//             <>\n//               {messages.map((message) => (\n//                 <div\n//                   key={message.id}\n//                   className={`flex gap-4 ${message.type === 'user' ? 'flex-row-reverse' : 'flex-row'} animate-fade-in`}\n//                 >\n//                   <div className={`flex-shrink-0 w-10 h-10 rounded-2xl flex items-center justify-center shadow-lg ${\n//                     message.type === 'user' \n//                       ? 'bg-gradient-to-r from-emerald-500 to-green-600' \n//                       : 'bg-gradient-to-r from-blue-500 to-indigo-600'\n//                   }`}>\n//                     {message.type === 'user' ? (\n//                       <User className=\"h-5 w-5 text-white\" />\n//                     ) : (\n//                       <Bot className=\"h-5 w-5 text-white\" />\n//                     )}\n//                   </div>\n\n//                   <div className={`flex-1 max-w-4xl ${message.type === 'user' ? 'text-right' : 'text-left'}`}>\n//                     <div className={`inline-block p-4 rounded-2xl shadow-sm ${\n//                       message.type === 'user'\n//                         ? 'bg-gradient-to-r from-emerald-500 to-green-600 text-white'\n//                         : 'bg-white text-gray-900 border border-gray-100'\n//                     }`}>\n//                       <p className=\"whitespace-pre-wrap leading-relaxed\">{message.content}</p>\n//                     </div>\n//                     <p className=\"text-xs text-gray-400 mt-2 px-3 flex items-center gap-1\">\n//                       <span className=\"w-1 h-1 bg-gray-300 rounded-full\"></span>\n//                       {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n//                     </p>\n//                   </div>\n//                 </div>\n//               ))}\n\n//               {isGenerating && (\n//                 <div className=\"flex gap-4 animate-fade-in\">\n//                   <div className=\"flex-shrink-0 w-10 h-10 rounded-2xl bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg\">\n//                     <Bot className=\"h-5 w-5 text-white\" />\n//                   </div>\n\n//                   <div className=\"flex-1\">\n//                     <div className=\"inline-block p-4 bg-white rounded-2xl shadow-sm border border-gray-100\">\n//                       <div className=\"flex items-center gap-3 text-gray-600\">\n//                         <div className=\"flex space-x-1\">\n//                           <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\"></div>\n//                           <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{animationDelay: '0.1s'}}></div>\n//                           <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{animationDelay: '0.2s'}}></div>\n//                         </div>\n//                         <span className=\"text-sm font-medium\">AI is thinking...</span>\n//                       </div>\n//                     </div>\n//                   </div>\n//                 </div>\n//               )}\n//             </>\n//           )}\n//           <div ref={messagesEndRef} />\n//         </div>\n//       </div>\n\n//       <div className=\"p-6 border-t border-gray-100/80 bg-white/70 backdrop-blur-sm\">\n//         <form onSubmit={handleSubmit} className=\"space-y-4\">\n//           <div className=\"relative\">\n//             <Textarea\n//               ref={textareaRef}\n//               value={inputMessage}\n//               onChange={(e) => setInputMessage(e.target.value)}\n//               onKeyDown={handleKeyDown}\n//               placeholder={hasDocuments ? \"Ask anything about your documents...\" : \"Upload documents first to start chatting\"}\n//               disabled={!hasDocuments || isGenerating}\n//               className=\"min-h-[60px] max-h-32 resize-none pr-14 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-300 border-gray-200 bg-white/80 backdrop-blur-sm shadow-sm rounded-xl\"\n//             />\n//             <Button\n//               type=\"submit\"\n//               size=\"sm\"\n//               disabled={!inputMessage.trim() || !hasDocuments || isGenerating}\n//               className=\"absolute bottom-3 right-3 h-8 w-8 p-0 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 shadow-lg hover:shadow-xl transition-all duration-200 rounded-lg\"\n//             >\n//               <Send className=\"h-4 w-4\" />\n//             </Button>\n//           </div>\n\n//           {!hasDocuments && (\n//             <div className=\"flex items-center gap-2 p-3 bg-amber-50/80 border border-amber-200 rounded-xl\">\n//               <div className=\"w-2 h-2 bg-amber-400 rounded-full animate-pulse\"></div>\n//               <p className=\"text-sm text-amber-700 font-medium\">\n//                 Please upload documents to enable the chat functionality\n//               </p>\n//             </div>\n//           )}\n//         </form>\n//       </div>\n//     </div>\n//   );\n// };\n\n// // Main App Component\n// const ConsolidatedApp = () => {\n//   const [uploadedFiles, setUploadedFiles] = useState<UploadedFile[]>([]);\n//   const [chatMessages, setChatMessages] = useState<ChatMessage[]>([]);\n//   const [isUploading, setIsUploading] = useState(false);\n//   const [isGenerating, setIsGenerating] = useState(false);\n\n//   const handleFileUpload = async (files: File[]) => {\n//     setIsUploading(true);\n\n//     // Simulate API call delay\n//     await new Promise(resolve => setTimeout(resolve, 2000));\n\n//     const newFiles: UploadedFile[] = files.map(file => ({\n//       id: Math.random().toString(36).substr(2, 9),\n//       name: file.name,\n//       size: file.size,\n//       type: file.type,\n//       uploadedAt: new Date(),\n//     }));\n\n//     setUploadedFiles(prev => [...prev, ...newFiles]);\n//     setIsUploading(false);\n//   };\n\n//   const handleSendMessage = async (message: string) => {\n//     if (!message.trim()) return;\n\n//     const userMessage: ChatMessage = {\n//       id: Math.random().toString(36).substr(2, 9),\n//       type: 'user',\n//       content: message,\n//       timestamp: new Date(),\n//     };\n\n//     setChatMessages(prev => [...prev, userMessage]);\n//     setIsGenerating(true);\n\n//     // Simulate API call delay\n//     await new Promise(resolve => setTimeout(resolve, 3000));\n\n//     const botMessage: ChatMessage = {\n//       id: Math.random().toString(36).substr(2, 9),\n//       type: 'bot',\n//       content: \"I understand your question about the uploaded documents. This is a simulated response. In a real implementation, this would be connected to your Flask backend API to process the documents and generate intelligent responses based on their content.\",\n//       timestamp: new Date(),\n//     };\n\n//     setChatMessages(prev => [...prev, botMessage]);\n//     setIsGenerating(false);\n//   };\n\n//   const handleDeleteFile = (fileId: string) => {\n//     setUploadedFiles(prev => prev.filter(file => file.id !== fileId));\n//   };\n\n//   return (\n//     <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100\">\n//       <Header />\n\n//       <div className=\"container mx-auto px-4 py-8 max-w-7xl\">\n//         <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 h-[calc(100vh-12rem)]\">\n//           <div className=\"lg:col-span-1\">\n//             <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 h-full overflow-hidden\">\n//               <div className=\"p-6 border-b border-gray-100\">\n//                 <div className=\"flex items-center gap-3\">\n//                   <div className=\"p-2 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg\">\n//                     <FileText className=\"h-5 w-5 text-white\" />\n//                   </div>\n//                   <div>\n//                     <h2 className=\"text-lg font-semibold text-gray-900\">Documents</h2>\n//                     <p className=\"text-sm text-gray-500\">{uploadedFiles.length} files uploaded</p>\n//                   </div>\n//                 </div>\n//               </div>\n\n//               <div className=\"p-6 h-full overflow-y-auto\">\n//                 <DocumentUpload\n//                   onFileUpload={handleFileUpload}\n//                   uploadedFiles={uploadedFiles}\n//                   onDeleteFile={handleDeleteFile}\n//                   isUploading={isUploading}\n//                 />\n//               </div>\n//             </div>\n//           </div>\n\n//           <div className=\"lg:col-span-2\">\n//             <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 h-full\">\n//               <ChatInterface\n//                 messages={chatMessages}\n//                 onSendMessage={handleSendMessage}\n//                 isGenerating={isGenerating}\n//                 hasDocuments={uploadedFiles.length > 0}\n//               />\n//             </div>\n//           </div>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default ConsolidatedApp;\n\n// import React, { useState, useRef, useEffect, useCallback } from \"react\";\n// import { Send, Bot, User, MessageSquare, Loader, Sparkles, Upload, File, X, CheckCircle, AlertCircle, FileText, RefreshCw } from \"lucide-react\";\n\n// // API Configuration\n// const API_BASE_URL = 'http://localhost:5000'; // Adjust this to your Flask server URL\n\n// // Types\n// export interface UploadedFile {\n//   id: string;\n//   name: string;\n//   size: number;\n//   type: string;\n//   uploadedAt: Date;\n//   status: 'uploading' | 'processed' | 'error';\n// }\n\n// export interface ChatMessage {\n//   id: string;\n//   type: 'user' | 'bot';\n//   content: string;\n//   timestamp: Date;\n//   sources?: any[];\n// }\n\n// // API Functions\n// const uploadFileToBackend = async (file: File): Promise<void> => {\n//   const formData = new FormData();\n//   formData.append('file', file);\n\n//   const response = await fetch(`${API_BASE_URL}/upload`, {\n//     method: 'POST',\n//     body: formData,\n//   });\n\n//   if (!response.ok) {\n//     const error = await response.json();\n//     throw new Error(error.error || 'Upload failed');\n//   }\n\n//   return response.json();\n// };\n\n// const sendMessageToBackend = async (question: string): Promise<{answer: string, sources: any[]}> => {\n//   const response = await fetch(`${API_BASE_URL}/ask`, {\n//     method: 'POST',\n//     headers: {\n//       'Content-Type': 'application/json',\n//     },\n//     body: JSON.stringify({ question }),\n//   });\n\n//   if (!response.ok) {\n//     const error = await response.json();\n//     throw new Error(error.error || 'Failed to get response');\n//   }\n\n//   return response.json();\n// };\n\n// const clearChatMemory = async (): Promise<void> => {\n//   const response = await fetch(`${API_BASE_URL}/clear`, {\n//     method: 'POST',\n//   });\n\n//   if (!response.ok) {\n//     const error = await response.json();\n//     throw new Error(error.error || 'Failed to clear memory');\n//   }\n\n//   return response.json();\n// };\n\n// // Basic UI Components\n// const Button = React.forwardRef<\n//   HTMLButtonElement,\n//   React.ButtonHTMLAttributes<HTMLButtonElement> & {\n//     variant?: \"default\" | \"ghost\" | \"outline\";\n//     size?: \"default\" | \"sm\";\n//   }\n\n// >(({ className = \"\", variant = \"default\", size = \"default\", ...props }, ref) => {\n//   const baseClasses = \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 disabled:pointer-events-none disabled:opacity-50\";\n//   const variantClasses = {\n//     default: \"bg-blue-600 text-white hover:bg-blue-700\",\n//     ghost: \"hover:bg-gray-100 hover:text-gray-900\",\n//     outline: \"border border-gray-300 bg-white hover:bg-gray-50\"\n//   };\n//   const sizeClasses = {\n//     default: \"h-10 px-4 py-2\",\n//     sm: \"h-9 rounded-md px-3\"\n//   };\n\n//   return (\n//     <button\n//       className={`${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${className}`}\n//       ref={ref}\n//       {...props}\n//     />\n//   );\n// });\n\n// const Textarea = React.forwardRef<\n//   HTMLTextAreaElement,\n//   React.TextareaHTMLAttributes<HTMLTextAreaElement>\n// >(({ className = \"\", ...props }, ref) => (\n//   <textarea\n//     className={`flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${className}`}\n//     ref={ref}\n//     {...props}\n//   />\n// ));\n\n// // Header Component\n// const Header = ({ onClearChat }: { onClearChat: () => void }) => {\n//   return (\n//     <header className=\"bg-white/90 backdrop-blur-md border-b border-gray-200/50 sticky top-0 z-50\">\n//       <div className=\"container mx-auto px-4 py-4\">\n//         <div className=\"flex items-center justify-between\">\n//           <div className=\"flex items-center gap-3\">\n//             <div className=\"relative\">\n//               <div className=\"absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl blur-sm opacity-75\"></div>\n//               <div className=\"relative p-3 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl\">\n//                 <Bot className=\"h-6 w-6 text-white\" />\n//               </div>\n//             </div>\n//             <div>\n//               <h1 className=\"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent\">\n//                 DocuChat AI\n//               </h1>\n//               <p className=\"text-sm text-gray-500 flex items-center gap-1\">\n//                 <Sparkles className=\"h-3 w-3\" />\n//                 Intelligent Document Assistant\n//               </p>\n//             </div>\n//           </div>\n\n//           <Button\n//             variant=\"outline\"\n//             size=\"sm\"\n//             onClick={onClearChat}\n//             className=\"gap-2\"\n//           >\n//             <RefreshCw className=\"h-4 w-4\" />\n//             Clear Chat\n//           </Button>\n//         </div>\n//       </div>\n//     </header>\n//   );\n// };\n\n// // Document Upload Component\n// const DocumentUpload = ({ onFileUpload, uploadedFiles, onDeleteFile, isUploading }: {\n//   onFileUpload: (files: File[]) => void;\n//   uploadedFiles: UploadedFile[];\n//   onDeleteFile: (fileId: string) => void;\n//   isUploading: boolean;\n// }) => {\n//   const [isDragOver, setIsDragOver] = useState(false);\n\n//   const handleDragOver = useCallback((e: React.DragEvent) => {\n//     e.preventDefault();\n//     setIsDragOver(true);\n//   }, []);\n\n//   const handleDragLeave = useCallback((e: React.DragEvent) => {\n//     e.preventDefault();\n//     setIsDragOver(false);\n//   }, []);\n\n//   const handleDrop = useCallback((e: React.DragEvent) => {\n//     e.preventDefault();\n//     setIsDragOver(false);\n\n//     const files = Array.from(e.dataTransfer.files);\n//     if (files.length > 0) {\n//       onFileUpload(files);\n//     }\n//   }, [onFileUpload]);\n\n//   const handleFileSelect = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n//     const files = Array.from(e.target.files || []);\n//     if (files.length > 0) {\n//       onFileUpload(files);\n//     }\n//     e.target.value = '';\n//   }, [onFileUpload]);\n\n//   const formatFileSize = (bytes: number) => {\n//     if (bytes === 0) return '0 Bytes';\n//     const k = 1024;\n//     const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n//     const i = Math.floor(Math.log(bytes) / Math.log(k));\n//     return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n//   };\n\n//   const getFileIcon = (type: string) => {\n//     if (type.includes('pdf')) return 'üìÑ';\n//     if (type.includes('word') || type.includes('document')) return 'üìù';\n//     if (type.includes('text')) return 'üìã';\n//     if (type.includes('image')) return 'üñºÔ∏è';\n//     return 'üìÅ';\n//   };\n\n//   const getStatusIcon = (status: string) => {\n//     switch (status) {\n//       case 'uploading':\n//         return <Loader className=\"h-4 w-4 text-blue-500 animate-spin\" />;\n//       case 'processed':\n//         return <CheckCircle className=\"h-4 w-4 text-green-500\" />;\n//       case 'error':\n//         return <AlertCircle className=\"h-4 w-4 text-red-500\" />;\n//       default:\n//         return null;\n//     }\n//   };\n\n//   return (\n//     <div className=\"space-y-6\">\n//       <div\n//         className={`\n//           relative border-2 border-dashed rounded-xl p-8 text-center transition-all duration-300\n//           ${isDragOver \n//             ? 'border-blue-400 bg-blue-50 scale-105' \n//             : 'border-gray-300 hover:border-gray-400 hover:bg-gray-50'\n//           }\n//           ${isUploading ? 'pointer-events-none opacity-50' : 'cursor-pointer'}\n//         `}\n//         onDragOver={handleDragOver}\n//         onDragLeave={handleDragLeave}\n//         onDrop={handleDrop}\n//         onClick={() => document.getElementById('file-input')?.click()}\n//       >\n//         <input\n//           id=\"file-input\"\n//           type=\"file\"\n//           multiple\n//           className=\"hidden\"\n//           onChange={handleFileSelect}\n//           accept=\".pdf,.doc,.docx,.txt,.rtf,.odt\"\n//         />\n\n//         {isUploading ? (\n//           <div className=\"space-y-4\">\n//             <div className=\"flex justify-center\">\n//               <Loader className=\"h-12 w-12 text-blue-500 animate-spin\" />\n//             </div>\n//             <div>\n//               <p className=\"text-lg font-medium text-gray-900\">Processing documents...</p>\n//               <p className=\"text-sm text-gray-500\">Please wait while we analyze your files</p>\n//             </div>\n//           </div>\n//         ) : (\n//           <div className=\"space-y-4\">\n//             <div className=\"flex justify-center\">\n//               <div className={`p-4 rounded-full transition-colors duration-300 ${\n//                 isDragOver ? 'bg-blue-100' : 'bg-gray-100'\n//               }`}>\n//                 <Upload className={`h-8 w-8 transition-colors duration-300 ${\n//                   isDragOver ? 'text-blue-500' : 'text-gray-400'\n//                 }`} />\n//               </div>\n//             </div>\n//             <div>\n//               <p className=\"text-lg font-medium text-gray-900\">\n//                 {isDragOver ? 'Drop your files here' : 'Upload your documents'}\n//               </p>\n//               <p className=\"text-sm text-gray-500 mt-1\">\n//                 Drag and drop or click to browse\n//               </p>\n//               <p className=\"text-xs text-gray-400 mt-2\">\n//                 Supports PDF, DOC, DOCX, TXT files\n//               </p>\n//             </div>\n//           </div>\n//         )}\n//       </div>\n\n//       {uploadedFiles.length > 0 && (\n//         <div className=\"space-y-3\">\n//           <h3 className=\"text-sm font-medium text-gray-700 flex items-center gap-2\">\n//             <FileText className=\"h-4 w-4 text-blue-500\" />\n//             Documents ({uploadedFiles.length})\n//           </h3>\n\n//           <div className=\"space-y-2 max-h-64 overflow-y-auto\">\n//             {uploadedFiles.map((file) => (\n//               <div\n//                 key={file.id}\n//                 className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg border hover:bg-gray-100 transition-colors\"\n//               >\n//                 <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n//                   <span className=\"text-lg\">{getFileIcon(file.type)}</span>\n//                   <div className=\"flex-1 min-w-0\">\n//                     <p className=\"text-sm font-medium text-gray-900 truncate\">\n//                       {file.name}\n//                     </p>\n//                     <p className=\"text-xs text-gray-500\">\n//                       {formatFileSize(file.size)} ‚Ä¢ {file.uploadedAt.toLocaleDateString()}\n//                     </p>\n//                   </div>\n//                   <div className=\"flex items-center gap-2\">\n//                     {getStatusIcon(file.status)}\n//                     <span className=\"text-xs text-gray-500 capitalize\">{file.status}</span>\n//                   </div>\n//                 </div>\n\n//                 <Button\n//                   variant=\"ghost\"\n//                   size=\"sm\"\n//                   onClick={() => onDeleteFile(file.id)}\n//                   className=\"text-gray-400 hover:text-red-500 h-8 w-8 p-0\"\n//                   disabled={file.status === 'uploading'}\n//                 >\n//                   <X className=\"h-4 w-4\" />\n//                 </Button>\n//               </div>\n//             ))}\n//           </div>\n//         </div>\n//       )}\n\n//       {uploadedFiles.length === 0 && !isUploading && (\n//         <div className=\"text-center py-8\">\n//           <AlertCircle className=\"h-8 w-8 text-gray-300 mx-auto mb-3\" />\n//           <p className=\"text-sm text-gray-500\">No documents uploaded yet</p>\n//           <p className=\"text-xs text-gray-400 mt-1\">Upload some documents to start chatting</p>\n//         </div>\n//       )}\n//     </div>\n//   );\n// };\n\n// // Chat Interface Component\n// const ChatInterface = ({ messages, onSendMessage, isGenerating, hasDocuments, error }: {\n//   messages: ChatMessage[];\n//   onSendMessage: (message: string) => void;\n//   isGenerating: boolean;\n//   hasDocuments: boolean;\n//   error: string | null;\n// }) => {\n//   const [inputMessage, setInputMessage] = useState(\"\");\n//   const messagesEndRef = useRef<HTMLDivElement>(null);\n//   const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n//   const scrollToBottom = () => {\n//     messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n//   };\n\n//   useEffect(() => {\n//     scrollToBottom();\n//   }, [messages]);\n\n//   const handleSubmit = (e: React.FormEvent) => {\n//     e.preventDefault();\n//     if (inputMessage.trim() && !isGenerating && hasDocuments) {\n//       onSendMessage(inputMessage.trim());\n//       setInputMessage(\"\");\n//     }\n//   };\n\n//   const handleKeyDown = (e: React.KeyboardEvent) => {\n//     if (e.key === 'Enter' && !e.shiftKey) {\n//       e.preventDefault();\n//       handleSubmit(e);\n//     }\n//   };\n\n//   return (\n//     <div className=\"flex flex-col h-full bg-gradient-to-b from-white to-gray-50/50\">\n//       <div className=\"p-6 border-b border-gray-100/80 bg-white/70 backdrop-blur-sm\">\n//         <div className=\"flex items-center gap-4\">\n//           <div className=\"relative\">\n//             <div className=\"absolute inset-0 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl blur-sm opacity-20\"></div>\n//             <div className=\"relative p-3 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl shadow-lg\">\n//               <MessageSquare className=\"h-6 w-6 text-white\" />\n//             </div>\n//           </div>\n//           <div className=\"flex-1\">\n//             <h2 className=\"text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent\">\n//               AI Assistant\n//             </h2>\n//             <p className=\"text-sm text-gray-500 flex items-center gap-2\">\n//               <Sparkles className=\"h-3 w-3\" />\n//               {hasDocuments \n//                 ? \"Ready to answer questions about your documents\" \n//                 : \"Upload documents to start an intelligent conversation\"\n//               }\n//             </p>\n//           </div>\n//           <div className=\"flex items-center gap-2\">\n//             <div className={`w-2 h-2 rounded-full ${hasDocuments ? 'bg-green-400' : 'bg-amber-400'} animate-pulse`}></div>\n//             <span className=\"text-xs text-gray-500 font-medium\">\n//               {hasDocuments ? 'Ready' : 'Waiting'}\n//             </span>\n//           </div>\n//         </div>\n//       </div>\n\n//       <div className=\"flex-1 overflow-hidden\">\n//         <div className=\"h-full overflow-y-auto p-6 space-y-6\">\n//           {error && (\n//             <div className=\"p-4 bg-red-50 border border-red-200 rounded-xl\">\n//               <div className=\"flex items-center gap-2\">\n//                 <AlertCircle className=\"h-5 w-5 text-red-500\" />\n//                 <p className=\"text-sm font-medium text-red-800\">Error</p>\n//               </div>\n//               <p className=\"text-sm text-red-600 mt-1\">{error}</p>\n//             </div>\n//           )}\n\n//           {messages.length === 0 ? (\n//             <div className=\"flex flex-col items-center justify-center h-full text-center py-16\">\n//               <div className=\"relative mb-6\">\n//                 <div className=\"absolute inset-0 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-full blur-xl opacity-50\"></div>\n//                 <div className=\"relative w-20 h-20 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-full flex items-center justify-center border border-blue-100/50\">\n//                   <Bot className=\"h-10 w-10 text-blue-500\" />\n//                 </div>\n//               </div>\n//               <h3 className=\"text-2xl font-bold text-gray-900 mb-3\">\n//                 Welcome to DocuChat AI\n//               </h3>\n//               <p className=\"text-gray-500 max-w-md leading-relaxed\">\n//                 {hasDocuments \n//                   ? \"Your documents are processed and ready! Start by asking me any questions about their content and I'll provide detailed insights.\"\n//                   : \"Upload your documents first, then I'll be ready to provide intelligent answers and insights about their content.\"\n//                 }\n//               </p>\n//               {hasDocuments && (\n//                 <div className=\"mt-6 p-4 bg-blue-50/50 rounded-xl border border-blue-100\">\n//                   <p className=\"text-sm text-blue-600 font-medium\">üí° Try asking questions like:</p>\n//                   <ul className=\"mt-2 text-xs text-blue-500 space-y-1\">\n//                     <li>‚Ä¢ \"What are the main topics covered?\"</li>\n//                     <li>‚Ä¢ \"Can you summarize the key points?\"</li>\n//                     <li>‚Ä¢ \"What specific details about [topic]?\"</li>\n//                   </ul>\n//                 </div>\n//               )}\n//             </div>\n//           ) : (\n//             <>\n//               {messages.map((message) => (\n//                 <div\n//                   key={message.id}\n//                   className={`flex gap-4 ${message.type === 'user' ? 'flex-row-reverse' : 'flex-row'} animate-fade-in`}\n//                 >\n//                   <div className={`flex-shrink-0 w-10 h-10 rounded-2xl flex items-center justify-center shadow-lg ${\n//                     message.type === 'user' \n//                       ? 'bg-gradient-to-r from-emerald-500 to-green-600' \n//                       : 'bg-gradient-to-r from-blue-500 to-indigo-600'\n//                   }`}>\n//                     {message.type === 'user' ? (\n//                       <User className=\"h-5 w-5 text-white\" />\n//                     ) : (\n//                       <Bot className=\"h-5 w-5 text-white\" />\n//                     )}\n//                   </div>\n\n//                   <div className={`flex-1 max-w-4xl ${message.type === 'user' ? 'text-right' : 'text-left'}`}>\n//                     <div className={`inline-block p-4 rounded-2xl shadow-sm ${\n//                       message.type === 'user'\n//                         ? 'bg-gradient-to-r from-emerald-500 to-green-600 text-white'\n//                         : 'bg-white text-gray-900 border border-gray-100'\n//                     }`}>\n//                       <p className=\"whitespace-pre-wrap leading-relaxed\">{message.content}</p>\n//                       {message.sources && message.sources.length > 0 && (\n//                         <div className=\"mt-3 pt-3 border-t border-gray-200\">\n//                           <p className=\"text-xs text-gray-500 font-medium mb-2\">Sources:</p>\n//                           <div className=\"space-y-1\">\n//                             {message.sources.map((source, index) => (\n//                               <div key={index} className=\"text-xs text-gray-600 bg-gray-50 rounded p-2\">\n//                                 {source.source && <span className=\"font-medium\">{source.source}</span>}\n//                                 {source.page && <span className=\"ml-2\">Page {source.page}</span>}\n//                               </div>\n//                             ))}\n//                           </div>\n//                         </div>\n//                       )}\n//                     </div>\n//                     <p className=\"text-xs text-gray-400 mt-2 px-3 flex items-center gap-1\">\n//                       <span className=\"w-1 h-1 bg-gray-300 rounded-full\"></span>\n//                       {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n//                     </p>\n//                   </div>\n//                 </div>\n//               ))}\n\n//               {isGenerating && (\n//                 <div className=\"flex gap-4 animate-fade-in\">\n//                   <div className=\"flex-shrink-0 w-10 h-10 rounded-2xl bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg\">\n//                     <Bot className=\"h-5 w-5 text-white\" />\n//                   </div>\n\n//                   <div className=\"flex-1\">\n//                     <div className=\"inline-block p-4 bg-white rounded-2xl shadow-sm border border-gray-100\">\n//                       <div className=\"flex items-center gap-3 text-gray-600\">\n//                         <div className=\"flex space-x-1\">\n//                           <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\"></div>\n//                           <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{animationDelay: '0.1s'}}></div>\n//                           <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{animationDelay: '0.2s'}}></div>\n//                         </div>\n//                         <span className=\"text-sm font-medium\">AI is analyzing your documents...</span>\n//                       </div>\n//                     </div>\n//                   </div>\n//                 </div>\n//               )}\n//             </>\n//           )}\n//           <div ref={messagesEndRef} />\n//         </div>\n//       </div>\n\n//       <div className=\"p-6 border-t border-gray-100/80 bg-white/70 backdrop-blur-sm\">\n//         <form onSubmit={handleSubmit} className=\"space-y-4\">\n//           <div className=\"relative\">\n//             <Textarea\n//               ref={textareaRef}\n//               value={inputMessage}\n//               onChange={(e) => setInputMessage(e.target.value)}\n//               onKeyDown={handleKeyDown}\n//               placeholder={hasDocuments ? \"Ask anything about your documents...\" : \"Upload documents first to start chatting\"}\n//               disabled={!hasDocuments || isGenerating}\n//               className=\"min-h-[60px] max-h-32 resize-none pr-14 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-300 border-gray-200 bg-white/80 backdrop-blur-sm shadow-sm rounded-xl\"\n//             />\n//             <Button\n//               type=\"submit\"\n//               size=\"sm\"\n//               disabled={!inputMessage.trim() || !hasDocuments || isGenerating}\n//               className=\"absolute bottom-3 right-3 h-8 w-8 p-0 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 shadow-lg hover:shadow-xl transition-all duration-200 rounded-lg\"\n//             >\n//               <Send className=\"h-4 w-4\" />\n//             </Button>\n//           </div>\n\n//           {!hasDocuments && (\n//             <div className=\"flex items-center gap-2 p-3 bg-amber-50/80 border border-amber-200 rounded-xl\">\n//               <div className=\"w-2 h-2 bg-amber-400 rounded-full animate-pulse\"></div>\n//               <p className=\"text-sm text-amber-700 font-medium\">\n//                 Please upload and process documents to enable the chat functionality\n//               </p>\n//             </div>\n//           )}\n//         </form>\n//       </div>\n//     </div>\n//   );\n// };\n\n// // Main App Component\n// const ConsolidatedApp = () => {\n//   const [uploadedFiles, setUploadedFiles] = useState<UploadedFile[]>([]);\n//   const [chatMessages, setChatMessages] = useState<ChatMessage[]>([]);\n//   const [isUploading, setIsUploading] = useState(false);\n//   const [isGenerating, setIsGenerating] = useState(false);\n//   const [error, setError] = useState<string | null>(null);\n\n//   const handleFileUpload = async (files: File[]) => {\n//     setIsUploading(true);\n//     setError(null);\n\n//     // Create initial file entries\n//     const newFiles: UploadedFile[] = files.map(file => ({\n//       id: Math.random().toString(36).substr(2, 9),\n//       name: file.name,\n//       size: file.size,\n//       type: file.type,\n//       uploadedAt: new Date(),\n//       status: 'uploading'\n//     }));\n\n//     setUploadedFiles(prev => [...prev, ...newFiles]);\n\n//     // Upload files to backend\n//     try {\n//       const uploadPromises = files.map(async (file, index) => {\n//         try {\n//           await uploadFileToBackend(file);\n//           // Update file status to processed\n//           setUploadedFiles(prev => \n//             prev.map(f => \n//               f.id === newFiles[index].id \n//                 ? { ...f, status: 'processed' as const }\n//                 : f\n//             )\n//           );\n//         } catch (error) {\n//           console.error(`Failed to upload ${file.name}:`, error);\n//           // Update file status to error\n//           setUploadedFiles(prev => \n//             prev.map(f => \n//               f.id === newFiles[index].id \n//                 ? { ...f, status: 'error' as const }\n//                 : f\n//             )\n//           );\n//           throw error;\n//         }\n//       });\n\n//       await Promise.all(uploadPromises);\n//     } catch (error) {\n//       setError(`Upload failed: ${error instanceof Error ? error.message : 'Unknown error'}`);\n//     } finally {\n//       setIsUploading(false);\n//     }\n//   };\n\n//   const handleSendMessage = async (message: string) => {\n//     if (!message.trim()) return;\n\n//     const userMessage: ChatMessage = {\n//       id: Math.random().toString(36).substr(2, 9),\n//       type: 'user',\n//       content: message,\n//       timestamp: new Date(),\n//     };\n\n//     setChatMessages(prev => [...prev, userMessage]);\n//     setIsGenerating(true);\n//     setError(null);\n\n//     try {\n//       const response = await sendMessageToBackend(message);\n\n//       const botMessage: ChatMessage = {\n//         id: Math.random().toString(36).substr(2, 9),\n//         type: 'bot',\n//         content: response.answer,\n//         timestamp: new Date(),\n//         sources: response.sources\n//       };\n\n//       setChatMessages(prev => [...prev, botMessage]);\n//     } catch (error) {\n//       const errorMessage = error instanceof Error ? error.message : 'Failed to get response';\n//       setError(errorMessage);\n\n//       const botMessage: ChatMessage = {\n//         id: Math.random().toString(36).substr(2, 9),\n//         type: 'bot',\n//         content: `Sorry, I encountered an error: ${errorMessage}. Please try again.`,\n//         timestamp: new Date(),\n//       };\n\n//       setChatMessages(prev => [...prev, botMessage]);\n//     } finally {\n//       setIsGenerating(false);\n//     }\n//   };\n\n//   const handleDeleteFile = (fileId: string) => {\n//     setUploadedFiles(prev => prev.filter(file => file.id !== fileId));\n//   };\n\n//   const handleClearChat = async () => {\n//     try {\n//       await clearChatMemory();\n//       setChatMessages([]);\n//       setError(null);\n//     } catch (error) {\n//       setError(`Failed to clear chat: ${error instanceof Error ? error.message : 'Unknown error'}`);\n//     }\n//   };\n\n//   const hasProcessedDocuments = uploadedFiles.some(file => file.status === 'processed');\n\n//   return (\n//     <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100\">\n//       <Header onClearChat={handleClearChat} />\n\n//       <div className=\"container mx-auto px-4 py-8 max-w-7xl\">\n//         <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 h-[calc(100vh-12rem)]\">\n//           <div className=\"lg:col-span-1\">\n//             <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 h-full overflow-hidden\">\n//               <div className=\"p-6 border-b border-gray-100\">\n//                 <div className=\"flex items-center gap-3\">\n//                   <div className=\"p-2 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg\">\n//                     <FileText className=\"h-5 w-5 text-white\" />\n//                   </div>\n//                   <div>\n//                     <h2 className=\"text-lg font-semibold text-gray-900\">Documents</h2>\n//                     <p className=\"text-sm text-gray-500\">\n//                       {uploadedFiles.length} files ‚Ä¢ {uploadedFiles.filter(f => f.status === 'processed').length} processed\n//                     </p>\n//                   </div>\n//                 </div>\n//               </div>\n\n//               <div className=\"p-6 h-full overflow-y-auto\">\n//                 <DocumentUpload\n//                   onFileUpload={handleFileUpload}\n//                   uploadedFiles={uploadedFiles}\n//                   onDeleteFile={handleDeleteFile}\n//                   isUploading={isUploading}\n//                 />\n//               </div>\n//             </div>\n//           </div>\n\n//           <div className=\"lg:col-span-2\">\n//             <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 h-full\">\n//               <ChatInterface\n//                 messages={chatMessages}\n//                 onSendMessage={handleSendMessage}\n//                 isGenerating={isGenerating}\n//                 hasDocuments={hasProcessedDocuments}\n//                 error={error}\n//               />\n//             </div>\n//           </div>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default ConsolidatedApp;\n\nimport React, { useState, useRef, useEffect, useCallback } from \"react\";\nimport { Send, Bot, User, MessageSquare, Loader, Sparkles, Upload, X, CheckCircle, AlertCircle, FileText, RefreshCw } from \"lucide-react\";\n\n// API Configuration\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:5000';\n\n// Types\n\n// API Functions\nconst uploadFileToBackend = async file => {\n  const formData = new FormData();\n  formData.append('file', file);\n  const response = await fetch(`${API_BASE_URL}/upload`, {\n    method: 'POST',\n    body: formData\n  });\n  if (!response.ok) {\n    const errorText = await response.text();\n    let errorMessage = 'Upload failed';\n    try {\n      const errorData = JSON.parse(errorText);\n      errorMessage = errorData.error || errorMessage;\n    } catch {\n      errorMessage = `HTTP ${response.status}: ${response.statusText}`;\n    }\n    throw new Error(errorMessage);\n  }\n  return response.json();\n};\nconst sendMessageToBackend = async question => {\n  const response = await fetch(`${API_BASE_URL}/ask`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      question\n    })\n  });\n  if (!response.ok) {\n    const errorText = await response.text();\n    let errorMessage = 'Failed to get response';\n    try {\n      const errorData = JSON.parse(errorText);\n      errorMessage = errorData.error || errorMessage;\n    } catch {\n      errorMessage = `HTTP ${response.status}: ${response.statusText}`;\n    }\n    throw new Error(errorMessage);\n  }\n  return response.json();\n};\nconst clearChatMemory = async () => {\n  const response = await fetch(`${API_BASE_URL}/clear`, {\n    method: 'POST'\n  });\n  if (!response.ok) {\n    const errorText = await response.text();\n    let errorMessage = 'Failed to clear memory';\n    try {\n      const errorData = JSON.parse(errorText);\n      errorMessage = errorData.error || errorMessage;\n    } catch {\n      errorMessage = `HTTP ${response.status}: ${response.statusText}`;\n    }\n    throw new Error(errorMessage);\n  }\n  return response.json();\n};\n\n// Basic UI Components\nconst Button = /*#__PURE__*/React.forwardRef(_c = ({\n  className = \"\",\n  variant = \"default\",\n  size = \"default\",\n  ...props\n}, ref) => {\n  const baseClasses = \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 disabled:pointer-events-none disabled:opacity-50\";\n  const variantClasses = {\n    default: \"bg-blue-600 text-white hover:bg-blue-700\",\n    ghost: \"hover:bg-gray-100 hover:text-gray-900\",\n    outline: \"border border-gray-300 bg-white hover:bg-gray-50\"\n  };\n  const sizeClasses = {\n    default: \"h-10 px-4 py-2\",\n    sm: \"h-9 rounded-md px-3\"\n  };\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    className: `${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${className}`,\n    ref: ref,\n    ...props\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1402,\n    columnNumber: 5\n  }, this);\n});\n_c2 = Button;\nButton.displayName = \"Button\";\nconst Textarea = /*#__PURE__*/React.forwardRef(_c3 = ({\n  className = \"\",\n  ...props\n}, ref) => /*#__PURE__*/_jsxDEV(\"textarea\", {\n  className: `flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${className}`,\n  ref: ref,\n  ...props\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 1416,\n  columnNumber: 3\n}, this));\n_c4 = Textarea;\nTextarea.displayName = \"Textarea\";\n\n// Utility Functions\nconst formatFileSize = bytes => {\n  if (bytes === 0) return '0 Bytes';\n  const k = 1024;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n};\nconst getFileIcon = type => {\n  if (type.includes('pdf')) return 'üìÑ';\n  if (type.includes('word') || type.includes('document')) return 'üìù';\n  if (type.includes('text')) return 'üìã';\n  if (type.includes('image')) return 'üñºÔ∏è';\n  return 'üìÅ';\n};\nconst generateId = () => {\n  return Math.random().toString(36).substr(2, 9) + Date.now().toString(36);\n};\n\n// Header Component\nconst Header = /*#__PURE__*/React.memo(_c5 = ({\n  onClearChat\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"header\", {\n    className: \"bg-white/90 backdrop-blur-md border-b border-gray-200/50 sticky top-0 z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mx-auto px-4 py-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl blur-sm opacity-75\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1454,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative p-3 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl\",\n              children: /*#__PURE__*/_jsxDEV(Bot, {\n                className: \"h-6 w-6 text-white\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1456,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1455,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1453,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent\",\n              children: \"DocuChat AI\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1460,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-500 flex items-center gap-1\",\n              children: [/*#__PURE__*/_jsxDEV(Sparkles, {\n                className: \"h-3 w-3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1464,\n                columnNumber: 17\n              }, this), \"Intelligent Document Assistant\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1463,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1459,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1452,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          size: \"sm\",\n          onClick: onClearChat,\n          className: \"gap-2\",\n          \"aria-label\": \"Clear chat history\",\n          children: [/*#__PURE__*/_jsxDEV(RefreshCw, {\n            className: \"h-4 w-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1477,\n            columnNumber: 13\n          }, this), \"Clear Chat\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1470,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1451,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1450,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1449,\n    columnNumber: 5\n  }, this);\n});\n_c6 = Header;\nHeader.displayName = \"Header\";\n\n// File Upload Component\n\nconst DocumentUpload = /*#__PURE__*/_s(/*#__PURE__*/React.memo(_c7 = _s(({\n  onFileUpload,\n  uploadedFiles,\n  onDeleteFile,\n  isUploading\n}) => {\n  _s();\n  const [isDragOver, setIsDragOver] = useState(false);\n  const fileInputRef = useRef(null);\n  const dragCounter = useRef(0);\n  const handleDragEnter = useCallback(e => {\n    e.preventDefault();\n    e.stopPropagation();\n    dragCounter.current++;\n    if (e.dataTransfer.items && e.dataTransfer.items.length > 0) {\n      setIsDragOver(true);\n    }\n  }, []);\n  const handleDragLeave = useCallback(e => {\n    e.preventDefault();\n    e.stopPropagation();\n    dragCounter.current--;\n    if (dragCounter.current === 0) {\n      setIsDragOver(false);\n    }\n  }, []);\n  const handleDragOver = useCallback(e => {\n    e.preventDefault();\n    e.stopPropagation();\n  }, []);\n  const handleDrop = useCallback(e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragOver(false);\n    dragCounter.current = 0;\n    const files = Array.from(e.dataTransfer.files).filter(file => file.type.includes('pdf') || file.type.includes('document') || file.type.includes('text') || file.name.endsWith('.txt') || file.name.endsWith('.rtf') || file.name.endsWith('.odt'));\n    if (files.length > 0) {\n      onFileUpload(files);\n    }\n  }, [onFileUpload]);\n  const handleFileSelect = useCallback(e => {\n    const files = Array.from(e.target.files || []);\n    if (files.length > 0) {\n      onFileUpload(files);\n    }\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  }, [onFileUpload]);\n  const handleUploadClick = useCallback(() => {\n    var _fileInputRef$current;\n    (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n  }, []);\n  const getStatusIcon = status => {\n    switch (status) {\n      case 'uploading':\n        return /*#__PURE__*/_jsxDEV(Loader, {\n          className: \"h-4 w-4 text-blue-500 animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1566,\n          columnNumber: 16\n        }, this);\n      case 'processed':\n        return /*#__PURE__*/_jsxDEV(CheckCircle, {\n          className: \"h-4 w-4 text-green-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1568,\n          columnNumber: 16\n        }, this);\n      case 'error':\n        return /*#__PURE__*/_jsxDEV(AlertCircle, {\n          className: \"h-4 w-4 text-red-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1570,\n          columnNumber: 16\n        }, this);\n      default:\n        return null;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `\n          relative border-2 border-dashed rounded-xl p-8 text-center transition-all duration-300\n          ${isDragOver ? 'border-blue-400 bg-blue-50 scale-105' : 'border-gray-300 hover:border-gray-400 hover:bg-gray-50'}\n          ${isUploading ? 'pointer-events-none opacity-50' : 'cursor-pointer'}\n        `,\n      onDragEnter: handleDragEnter,\n      onDragLeave: handleDragLeave,\n      onDragOver: handleDragOver,\n      onDrop: handleDrop,\n      onClick: handleUploadClick,\n      role: \"button\",\n      tabIndex: 0,\n      onKeyDown: e => {\n        if (e.key === 'Enter' || e.key === ' ') {\n          e.preventDefault();\n          handleUploadClick();\n        }\n      },\n      \"aria-label\": \"Upload documents by clicking or dragging files here\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ref: fileInputRef,\n        type: \"file\",\n        multiple: true,\n        className: \"hidden\",\n        onChange: handleFileSelect,\n        accept: \".pdf,.doc,.docx,.txt,.rtf,.odt\",\n        \"aria-label\": \"File input for document upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1602,\n        columnNumber: 9\n      }, this), isUploading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center\",\n          children: /*#__PURE__*/_jsxDEV(Loader, {\n            className: \"h-12 w-12 text-blue-500 animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1615,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1614,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-lg font-medium text-gray-900\",\n            children: \"Processing documents...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1618,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-500\",\n            children: \"Please wait while we analyze your files\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1619,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1617,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1613,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `p-4 rounded-full transition-colors duration-300 ${isDragOver ? 'bg-blue-100' : 'bg-gray-100'}`,\n            children: /*#__PURE__*/_jsxDEV(Upload, {\n              className: `h-8 w-8 transition-colors duration-300 ${isDragOver ? 'text-blue-500' : 'text-gray-400'}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1628,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1625,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1624,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-lg font-medium text-gray-900\",\n            children: isDragOver ? 'Drop your files here' : 'Upload your documents'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1634,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-500 mt-1\",\n            children: \"Drag and drop or click to browse\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1637,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-gray-400 mt-2\",\n            children: \"Supports PDF, DOC, DOCX, TXT files\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1640,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1633,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1623,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1578,\n      columnNumber: 7\n    }, this), uploadedFiles.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-sm font-medium text-gray-700 flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(FileText, {\n          className: \"h-4 w-4 text-blue-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1651,\n          columnNumber: 13\n        }, this), \"Documents (\", uploadedFiles.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1650,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2 max-h-64 overflow-y-auto\",\n        children: uploadedFiles.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between p-3 bg-gray-50 rounded-lg border hover:bg-gray-100 transition-colors\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3 flex-1 min-w-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-lg\",\n              role: \"img\",\n              \"aria-label\": `${file.type} file`,\n              children: getFileIcon(file.type)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1662,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1 min-w-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm font-medium text-gray-900 truncate\",\n                title: file.name,\n                children: file.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1666,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-500\",\n                children: [formatFileSize(file.size), \" \\u2022 \", file.uploadedAt.toLocaleDateString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1669,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1665,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [getStatusIcon(file.status), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-gray-500 capitalize\",\n                children: file.status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1675,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1673,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1661,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"ghost\",\n            size: \"sm\",\n            onClick: () => onDeleteFile(file.id),\n            className: \"text-gray-400 hover:text-red-500 h-8 w-8 p-0\",\n            disabled: file.status === 'uploading',\n            \"aria-label\": `Delete ${file.name}`,\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1687,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1679,\n            columnNumber: 17\n          }, this)]\n        }, file.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1657,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1655,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1649,\n      columnNumber: 9\n    }, this), uploadedFiles.length === 0 && !isUploading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-8\",\n      children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n        className: \"h-8 w-8 text-gray-300 mx-auto mb-3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1697,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-500\",\n        children: \"No documents uploaded yet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1698,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xs text-gray-400 mt-1\",\n        children: \"Upload some documents to start chatting\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1699,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1696,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1577,\n    columnNumber: 5\n  }, this);\n}, \"VDiO1dbbIJw3O1ivgvTR9j6H08o=\")), \"VDiO1dbbIJw3O1ivgvTR9j6H08o=\");\n_c8 = DocumentUpload;\nDocumentUpload.displayName = \"DocumentUpload\";\n\n// Chat Interface Component\n\nconst ChatInterface = /*#__PURE__*/_s2(/*#__PURE__*/React.memo(_c9 = _s2(({\n  messages,\n  onSendMessage,\n  isGenerating,\n  hasDocuments,\n  error\n}) => {\n  _s2();\n  const [inputMessage, setInputMessage] = useState(\"\");\n  const messagesEndRef = useRef(null);\n  const textareaRef = useRef(null);\n  const scrollToBottom = useCallback(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, []);\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages, scrollToBottom]);\n  const handleSubmit = useCallback(e => {\n    e.preventDefault();\n    if (inputMessage.trim() && !isGenerating && hasDocuments) {\n      onSendMessage(inputMessage.trim());\n      setInputMessage(\"\");\n      // Focus back to textarea after sending\n      setTimeout(() => {\n        var _textareaRef$current;\n        return (_textareaRef$current = textareaRef.current) === null || _textareaRef$current === void 0 ? void 0 : _textareaRef$current.focus();\n      }, 100);\n    }\n  }, [inputMessage, isGenerating, hasDocuments, onSendMessage]);\n  const handleKeyDown = useCallback(e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit(e);\n    }\n  }, [handleSubmit]);\n  const handleInputChange = useCallback(e => {\n    setInputMessage(e.target.value);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-full bg-gradient-to-b from-white to-gray-50/50\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6 border-b border-gray-100/80 bg-white/70 backdrop-blur-sm\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-0 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl blur-sm opacity-20\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1762,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative p-3 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl shadow-lg\",\n            children: /*#__PURE__*/_jsxDEV(MessageSquare, {\n              className: \"h-6 w-6 text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1764,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1763,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1761,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent\",\n            children: \"AI Assistant\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1768,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-500 flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(Sparkles, {\n              className: \"h-3 w-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1772,\n              columnNumber: 15\n            }, this), hasDocuments ? \"Ready to answer questions about your documents\" : \"Upload documents to start an intelligent conversation\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1771,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1767,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `w-2 h-2 rounded-full ${hasDocuments ? 'bg-green-400' : 'bg-amber-400'} animate-pulse`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1780,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs text-gray-500 font-medium\",\n            children: hasDocuments ? 'Ready' : 'Waiting'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1781,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1779,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1760,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1759,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-hidden\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-full overflow-y-auto p-6 space-y-6\",\n        children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 bg-red-50 border border-red-200 rounded-xl\\\\\",\n          role: \"alert\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n              className: \"h-5 w-5 text-red-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1793,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm font-medium text-red-800\",\n              children: \"Error\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1794,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1792,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-red-600 mt-1\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1796,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1791,\n          columnNumber: 13\n        }, this), messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col items-center justify-center h-full text-center py-16\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute inset-0 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-full blur-xl opacity-50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1803,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative w-20 h-20 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-full flex items-center justify-center border border-blue-100/50\",\n              children: /*#__PURE__*/_jsxDEV(Bot, {\n                className: \"h-10 w-10 text-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1805,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1804,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1802,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-2xl font-bold text-gray-900 mb-3\",\n            children: \"Welcome to DocuChat AI\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1808,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500 max-w-md leading-relaxed\",\n            children: hasDocuments ? \"Your documents are processed and ready! Start by asking me any questions about their content and I'll provide detailed insights.\" : \"Upload your documents first, then I'll be ready to provide intelligent answers and insights about their content.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1811,\n            columnNumber: 15\n          }, this), hasDocuments && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 p-4 bg-blue-50/50 rounded-xl border border-blue-100\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-blue-600 font-medium\",\n              children: \"\\uD83D\\uDCA1 Try asking questions like:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1819,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"mt-2 text-xs text-blue-500 space-y-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"\\u2022 \\\"What are the main topics covered?\\\"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1821,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"\\u2022 \\\"Can you summarize the key points?\\\"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1822,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"\\u2022 \\\"What specific details about [topic]?\\\"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1823,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1820,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1818,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1801,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex gap-4 ${message.type === 'user' ? 'flex-row-reverse' : 'flex-row'} animate-fade-in`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `flex-shrink-0 w-10 h-10 rounded-2xl flex items-center justify-center shadow-lg ${message.type === 'user' ? 'bg-gradient-to-r from-emerald-500 to-green-600' : 'bg-gradient-to-r from-blue-500 to-indigo-600'}`,\n              children: message.type === 'user' ? /*#__PURE__*/_jsxDEV(User, {\n                className: \"h-5 w-5 text-white\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1841,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(Bot, {\n                className: \"h-5 w-5 text-white\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1843,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1835,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `flex-1 max-w-4xl ${message.type === 'user' ? 'text-right' : 'text-left'}`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: `inline-block p-4 rounded-2xl shadow-sm ${message.type === 'user' ? 'bg-gradient-to-r from-emerald-500 to-green-600 text-white' : 'bg-white text-gray-900 border border-gray-100'}`,\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"whitespace-pre-wrap leading-relaxed\",\n                  children: message.content\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1853,\n                  columnNumber: 23\n                }, this), message.sources && message.sources.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-3 pt-3 border-t border-gray-200\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-gray-500 font-medium mb-2\",\n                    children: \"Sources:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1856,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"space-y-1\",\n                    children: message.sources.map((source, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-xs text-gray-600 bg-gray-50 rounded p-2\",\n                      children: [source.source && /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"font-medium\",\n                        children: source.source\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1860,\n                        columnNumber: 51\n                      }, this), source.page && /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"ml-2\",\n                        children: [\"Page \", source.page]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1861,\n                        columnNumber: 49\n                      }, this)]\n                    }, index, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1859,\n                      columnNumber: 31\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1857,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1855,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1848,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-400 mt-2 px-3 flex items-center gap-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"w-1 h-1 bg-gray-300 rounded-full\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1869,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"time\", {\n                  dateTime: message.timestamp.toISOString(),\n                  children: message.timestamp.toLocaleTimeString([], {\n                    hour: '2-digit',\n                    minute: '2-digit'\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1870,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1868,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1847,\n              columnNumber: 19\n            }, this)]\n          }, message.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1831,\n            columnNumber: 17\n          }, this)), isGenerating && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-4 animate-fade-in\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-shrink-0 w-10 h-10 rounded-2xl bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg\",\n              children: /*#__PURE__*/_jsxDEV(Bot, {\n                className: \"h-5 w-5 text-white\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1881,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1880,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"inline-block p-4 bg-white rounded-2xl shadow-sm border border-gray-100\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-3 text-gray-600\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex space-x-1\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-2 h-2 bg-blue-500 rounded-full animate-bounce\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1888,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-2 h-2 bg-blue-500 rounded-full animate-bounce\",\n                      style: {\n                        animationDelay: '0.1s'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1889,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-2 h-2 bg-blue-500 rounded-full animate-bounce\",\n                      style: {\n                        animationDelay: '0.2s'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1890,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1887,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm font-medium\",\n                    children: \"AI is analyzing your documents...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1892,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1886,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1885,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1884,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1879,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1900,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1789,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1788,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6 border-t border-gray-100/80 bg-white/70 backdrop-blur-sm\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative\",\n          children: [/*#__PURE__*/_jsxDEV(Textarea, {\n            ref: textareaRef,\n            value: inputMessage,\n            onChange: handleInputChange,\n            onKeyDown: handleKeyDown,\n            placeholder: hasDocuments ? \"Ask anything about your documents...\" : \"Upload documents first to start chatting\",\n            disabled: !hasDocuments || isGenerating,\n            className: \"min-h-[60px] max-h-32 resize-none pr-14 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-300 border-gray-200 bg-white/80 backdrop-blur-sm shadow-sm rounded-xl\",\n            \"aria-label\": \"Message input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1907,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            size: \"sm\",\n            disabled: !inputMessage.trim() || !hasDocuments || isGenerating,\n            className: \"absolute bottom-3 right-3 h-8 w-8 p-0 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 shadow-lg hover:shadow-xl transition-all duration-200 rounded-lg\",\n            \"aria-label\": \"Send message\",\n            children: /*#__PURE__*/_jsxDEV(Send, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1924,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1917,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1906,\n          columnNumber: 11\n        }, this), !hasDocuments && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2 p-3 bg-amber-50/80 border border-amber-200 rounded-xl\",\n          role: \"status\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-2 h-2 bg-amber-400 rounded-full animate-pulse\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1930,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-amber-700 font-medium\",\n            children: \"Please upload and process documents to enable the chat functionality\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1931,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1929,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1905,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1904,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1758,\n    columnNumber: 5\n  }, this);\n}, \"QlLXJW6cI4M6R8SAKD7dhAvbHx4=\")), \"QlLXJW6cI4M6R8SAKD7dhAvbHx4=\");\n_c10 = ChatInterface;\nChatInterface.displayName = \"ChatInterface\";\n\n// Main App Component\nconst DocuChatApp = () => {\n  _s3();\n  const [uploadedFiles, setUploadedFiles] = useState([]);\n  const [chatMessages, setChatMessages] = useState([]);\n  const [isUploading, setIsUploading] = useState(false);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [error, setError] = useState(null);\n  const handleFileUpload = useCallback(async files => {\n    if (files.length === 0) return;\n    setIsUploading(true);\n    setError(null);\n\n    // Create initial file entries\n    const newFiles = files.map(file => ({\n      id: generateId(),\n      name: file.name,\n      size: file.size,\n      type: file.type,\n      uploadedAt: new Date(),\n      status: 'uploading'\n    }));\n    setUploadedFiles(prev => [...prev, ...newFiles]);\n\n    // Upload files to backend\n    try {\n      const uploadPromises = files.map(async (file, index) => {\n        const fileId = newFiles[index].id;\n        try {\n          await uploadFileToBackend(file);\n          // Update file status to processed\n          setUploadedFiles(prev => prev.map(f => f.id === fileId ? {\n            ...f,\n            status: 'processed'\n          } : f));\n        } catch (error) {\n          console.error(`Failed to upload ${file.name}:`, error);\n          // Update file status to error\n          setUploadedFiles(prev => prev.map(f => f.id === fileId ? {\n            ...f,\n            status: 'error'\n          } : f));\n          throw error;\n        }\n      });\n      await Promise.allSettled(uploadPromises);\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n      setError(`Upload failed: ${errorMessage}`);\n    } finally {\n      setIsUploading(false);\n    }\n  }, []);\n  const handleSendMessage = useCallback(async message => {\n    if (!message.trim()) return;\n    const userMessage = {\n      id: generateId(),\n      type: 'user',\n      content: message,\n      timestamp: new Date()\n    };\n    setChatMessages(prev => [...prev, userMessage]);\n    setIsGenerating(true);\n    setError(null);\n    try {\n      const response = await sendMessageToBackend(message);\n      const botMessage = {\n        id: generateId(),\n        type: 'bot',\n        content: response.answer,\n        timestamp: new Date(),\n        sources: response.sources\n      };\n      setChatMessages(prev => [...prev, botMessage]);\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Failed to get response';\n      setError(errorMessage);\n      const botMessage = {\n        id: generateId(),\n        type: 'bot',\n        content: `Sorry, I encountered an error: ${errorMessage}. Please try again.`,\n        timestamp: new Date()\n      };\n      setChatMessages(prev => [...prev, botMessage]);\n    } finally {\n      setIsGenerating(false);\n    }\n  }, []);\n  const handleDeleteFile = useCallback(fileId => {\n    setUploadedFiles(prev => prev.filter(file => file.id !== fileId));\n  }, []);\n  const handleClearChat = useCallback(async () => {\n    try {\n      await clearChatMemory();\n      setChatMessages([]);\n      setError(null);\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n      setError(`Failed to clear chat: ${errorMessage}`);\n    }\n  }, []);\n  const hasProcessedDocuments = uploadedFiles.some(file => file.status === 'processed');\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      onClearChat: handleClearChat\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2069,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mx-auto px-4 py-8 max-w-7xl\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-3 gap-8 h-[calc(100vh-12rem)]\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-1\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 h-full overflow-hidden\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-6 border-b border-gray-100\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-2 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg\",\n                  children: /*#__PURE__*/_jsxDEV(FileText, {\n                    className: \"h-5 w-5 text-white\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2078,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2077,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                    className: \"text-lg font-semibold text-gray-900\",\n                    children: \"Documents\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2081,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-500\",\n                    children: [uploadedFiles.length, \" files \\u2022 \", uploadedFiles.filter(f => f.status === 'processed').length, \" processed\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2082,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2080,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2076,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2075,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-6 h-full overflow-y-auto\",\n              children: /*#__PURE__*/_jsxDEV(DocumentUpload, {\n                onFileUpload: handleFileUpload,\n                uploadedFiles: uploadedFiles,\n                onDeleteFile: handleDeleteFile,\n                isUploading: isUploading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2090,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2089,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2074,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2073,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-2\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 h-full\",\n            children: /*#__PURE__*/_jsxDEV(ChatInterface, {\n              messages: chatMessages,\n              onSendMessage: handleSendMessage,\n              isGenerating: isGenerating,\n              hasDocuments: hasProcessedDocuments,\n              error: error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2102,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2101,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2100,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2072,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2071,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 2068,\n    columnNumber: 5\n  }, this);\n};\n_s3(DocuChatApp, \"yaHCImKNSvx79BYPNrbbD1i8dtM=\");\n_c11 = DocuChatApp;\nexport default DocuChatApp;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11;\n$RefreshReg$(_c, \"Button$React.forwardRef\");\n$RefreshReg$(_c2, \"Button\");\n$RefreshReg$(_c3, \"Textarea$React.forwardRef\");\n$RefreshReg$(_c4, \"Textarea\");\n$RefreshReg$(_c5, \"Header$React.memo\");\n$RefreshReg$(_c6, \"Header\");\n$RefreshReg$(_c7, \"DocumentUpload$React.memo\");\n$RefreshReg$(_c8, \"DocumentUpload\");\n$RefreshReg$(_c9, \"ChatInterface$React.memo\");\n$RefreshReg$(_c10, \"ChatInterface\");\n$RefreshReg$(_c11, \"DocuChatApp\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","Send","Bot","User","MessageSquare","Loader","Sparkles","Upload","X","CheckCircle","AlertCircle","FileText","RefreshCw","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE_URL","import","meta","env","VITE_API_URL","uploadFileToBackend","file","formData","FormData","append","response","fetch","method","body","ok","errorText","text","errorMessage","errorData","JSON","parse","error","status","statusText","Error","json","sendMessageToBackend","question","headers","stringify","clearChatMemory","Button","forwardRef","_c","className","variant","size","props","ref","baseClasses","variantClasses","default","ghost","outline","sizeClasses","sm","fileName","_jsxFileName","lineNumber","columnNumber","_c2","displayName","Textarea","_c3","_c4","formatFileSize","bytes","k","sizes","i","Math","floor","log","parseFloat","pow","toFixed","getFileIcon","type","includes","generateId","random","toString","substr","Date","now","Header","memo","_c5","onClearChat","children","onClick","_c6","DocumentUpload","_s","_c7","onFileUpload","uploadedFiles","onDeleteFile","isUploading","isDragOver","setIsDragOver","fileInputRef","dragCounter","handleDragEnter","e","preventDefault","stopPropagation","current","dataTransfer","items","length","handleDragLeave","handleDragOver","handleDrop","files","Array","from","filter","name","endsWith","handleFileSelect","target","value","handleUploadClick","_fileInputRef$current","click","getStatusIcon","onDragEnter","onDragLeave","onDragOver","onDrop","role","tabIndex","onKeyDown","key","multiple","onChange","accept","map","title","uploadedAt","toLocaleDateString","id","disabled","_c8","ChatInterface","_s2","_c9","messages","onSendMessage","isGenerating","hasDocuments","inputMessage","setInputMessage","messagesEndRef","textareaRef","scrollToBottom","_messagesEndRef$curre","scrollIntoView","behavior","handleSubmit","trim","setTimeout","_textareaRef$current","focus","handleKeyDown","shiftKey","handleInputChange","message","content","sources","source","index","page","dateTime","timestamp","toISOString","toLocaleTimeString","hour","minute","style","animationDelay","onSubmit","placeholder","_c10","DocuChatApp","_s3","setUploadedFiles","chatMessages","setChatMessages","setIsUploading","setIsGenerating","setError","handleFileUpload","newFiles","prev","uploadPromises","fileId","f","console","Promise","allSettled","handleSendMessage","userMessage","botMessage","answer","handleDeleteFile","handleClearChat","hasProcessedDocuments","some","_c11","$RefreshReg$"],"sources":["D:/AIprojects/RagChatbot/frontend/src/ConsolidatedApp.tsx"],"sourcesContent":["// import React, { useState, useRef, useEffect, useCallback } from \"react\";\r\n// import { Send, Bot, User, MessageSquare, Loader, Sparkles, Upload, File, X, CheckCircle, AlertCircle, FileText } from \"lucide-react\";\r\n\r\n// // Types\r\n// export interface UploadedFile {\r\n//   id: string;\r\n//   name: string;\r\n//   size: number;\r\n//   type: string;\r\n//   uploadedAt: Date;\r\n// }\r\n\r\n// export interface ChatMessage {\r\n//   id: string;\r\n//   type: 'user' | 'bot';\r\n//   content: string;\r\n//   timestamp: Date;\r\n// }\r\n\r\n// // Basic UI Components\r\n// const Button = React.forwardRef<\r\n//   HTMLButtonElement,\r\n//   React.ButtonHTMLAttributes<HTMLButtonElement> & {\r\n//     variant?: \"default\" | \"ghost\";\r\n//     size?: \"default\" | \"sm\";\r\n//   }\r\n// >(({ className = \"\", variant = \"default\", size = \"default\", ...props }, ref) => {\r\n//   const baseClasses = \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 disabled:pointer-events-none disabled:opacity-50\";\r\n//   const variantClasses = {\r\n//     default: \"bg-blue-600 text-white hover:bg-blue-700\",\r\n//     ghost: \"hover:bg-gray-100 hover:text-gray-900\"\r\n//   };\r\n//   const sizeClasses = {\r\n//     default: \"h-10 px-4 py-2\",\r\n//     sm: \"h-9 rounded-md px-3\"\r\n//   };\r\n  \r\n//   return (\r\n//     <button\r\n//       className={`${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${className}`}\r\n//       ref={ref}\r\n//       {...props}\r\n//     />\r\n//   );\r\n// });\r\n\r\n// const Textarea = React.forwardRef<\r\n//   HTMLTextAreaElement,\r\n//   React.TextareaHTMLAttributes<HTMLTextAreaElement>\r\n// >(({ className = \"\", ...props }, ref) => (\r\n//   <textarea\r\n//     className={`flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${className}`}\r\n//     ref={ref}\r\n//     {...props}\r\n//   />\r\n// ));\r\n\r\n// // Header Component\r\n// const Header = () => {\r\n//   return (\r\n//     <header className=\"bg-white/90 backdrop-blur-md border-b border-gray-200/50 sticky top-0 z-50\">\r\n//       <div className=\"container mx-auto px-4 py-4\">\r\n//         <div className=\"flex items-center gap-3\">\r\n//           <div className=\"flex items-center gap-3\">\r\n//             <div className=\"relative\">\r\n//               <div className=\"absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl blur-sm opacity-75\"></div>\r\n//               <div className=\"relative p-3 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl\">\r\n//                 <Bot className=\"h-6 w-6 text-white\" />\r\n//               </div>\r\n//             </div>\r\n//             <div>\r\n//               <h1 className=\"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent\">\r\n//                 DocuChat AI\r\n//               </h1>\r\n//               <p className=\"text-sm text-gray-500 flex items-center gap-1\">\r\n//                 <Sparkles className=\"h-3 w-3\" />\r\n//                 Intelligent Document Assistant\r\n//               </p>\r\n//             </div>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n//     </header>\r\n//   );\r\n// };\r\n\r\n// // Document Upload Component\r\n// const DocumentUpload = ({ onFileUpload, uploadedFiles, onDeleteFile, isUploading }: {\r\n//   onFileUpload: (files: File[]) => void;\r\n//   uploadedFiles: UploadedFile[];\r\n//   onDeleteFile: (fileId: string) => void;\r\n//   isUploading: boolean;\r\n// }) => {\r\n//   const [isDragOver, setIsDragOver] = useState(false);\r\n\r\n//   const handleDragOver = useCallback((e: React.DragEvent) => {\r\n//     e.preventDefault();\r\n//     setIsDragOver(true);\r\n//   }, []);\r\n\r\n//   const handleDragLeave = useCallback((e: React.DragEvent) => {\r\n//     e.preventDefault();\r\n//     setIsDragOver(false);\r\n//   }, []);\r\n\r\n//   const handleDrop = useCallback((e: React.DragEvent) => {\r\n//     e.preventDefault();\r\n//     setIsDragOver(false);\r\n    \r\n//     const files = Array.from(e.dataTransfer.files);\r\n//     if (files.length > 0) {\r\n//       onFileUpload(files);\r\n//     }\r\n//   }, [onFileUpload]);\r\n\r\n//   const handleFileSelect = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n//     const files = Array.from(e.target.files || []);\r\n//     if (files.length > 0) {\r\n//       onFileUpload(files);\r\n//     }\r\n//     e.target.value = '';\r\n//   }, [onFileUpload]);\r\n\r\n//   const formatFileSize = (bytes: number) => {\r\n//     if (bytes === 0) return '0 Bytes';\r\n//     const k = 1024;\r\n//     const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n//     const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n//     return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n//   };\r\n\r\n//   const getFileIcon = (type: string) => {\r\n//     if (type.includes('pdf')) return 'üìÑ';\r\n//     if (type.includes('word') || type.includes('document')) return 'üìù';\r\n//     if (type.includes('text')) return 'üìã';\r\n//     if (type.includes('image')) return 'üñºÔ∏è';\r\n//     return 'üìÅ';\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"space-y-6\">\r\n//       <div\r\n//         className={`\r\n//           relative border-2 border-dashed rounded-xl p-8 text-center transition-all duration-300\r\n//           ${isDragOver \r\n//             ? 'border-blue-400 bg-blue-50 scale-105' \r\n//             : 'border-gray-300 hover:border-gray-400 hover:bg-gray-50'\r\n//           }\r\n//           ${isUploading ? 'pointer-events-none opacity-50' : 'cursor-pointer'}\r\n//         `}\r\n//         onDragOver={handleDragOver}\r\n//         onDragLeave={handleDragLeave}\r\n//         onDrop={handleDrop}\r\n//         onClick={() => document.getElementById('file-input')?.click()}\r\n//       >\r\n//         <input\r\n//           id=\"file-input\"\r\n//           type=\"file\"\r\n//           multiple\r\n//           className=\"hidden\"\r\n//           onChange={handleFileSelect}\r\n//           accept=\".pdf,.doc,.docx,.txt,.rtf,.odt\"\r\n//         />\r\n        \r\n//         {isUploading ? (\r\n//           <div className=\"space-y-4\">\r\n//             <div className=\"flex justify-center\">\r\n//               <Loader className=\"h-12 w-12 text-blue-500 animate-spin\" />\r\n//             </div>\r\n//             <div>\r\n//               <p className=\"text-lg font-medium text-gray-900\">Uploading documents...</p>\r\n//               <p className=\"text-sm text-gray-500\">Please wait while we process your files</p>\r\n//             </div>\r\n//           </div>\r\n//         ) : (\r\n//           <div className=\"space-y-4\">\r\n//             <div className=\"flex justify-center\">\r\n//               <div className={`p-4 rounded-full transition-colors duration-300 ${\r\n//                 isDragOver ? 'bg-blue-100' : 'bg-gray-100'\r\n//               }`}>\r\n//                 <Upload className={`h-8 w-8 transition-colors duration-300 ${\r\n//                   isDragOver ? 'text-blue-500' : 'text-gray-400'\r\n//                 }`} />\r\n//               </div>\r\n//             </div>\r\n//             <div>\r\n//               <p className=\"text-lg font-medium text-gray-900\">\r\n//                 {isDragOver ? 'Drop your files here' : 'Upload your documents'}\r\n//               </p>\r\n//               <p className=\"text-sm text-gray-500 mt-1\">\r\n//                 Drag and drop or click to browse\r\n//               </p>\r\n//               <p className=\"text-xs text-gray-400 mt-2\">\r\n//                 Supports PDF, DOC, DOCX, TXT files\r\n//               </p>\r\n//             </div>\r\n//           </div>\r\n//         )}\r\n//       </div>\r\n\r\n//       {uploadedFiles.length > 0 && (\r\n//         <div className=\"space-y-3\">\r\n//           <h3 className=\"text-sm font-medium text-gray-700 flex items-center gap-2\">\r\n//             <CheckCircle className=\"h-4 w-4 text-green-500\" />\r\n//             Uploaded Files ({uploadedFiles.length})\r\n//           </h3>\r\n          \r\n//           <div className=\"space-y-2 max-h-64 overflow-y-auto\">\r\n//             {uploadedFiles.map((file) => (\r\n//               <div\r\n//                 key={file.id}\r\n//                 className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg border hover:bg-gray-100 transition-colors\"\r\n//               >\r\n//                 <div className=\"flex items-center gap-3 flex-1 min-w-0\">\r\n//                   <span className=\"text-lg\">{getFileIcon(file.type)}</span>\r\n//                   <div className=\"flex-1 min-w-0\">\r\n//                     <p className=\"text-sm font-medium text-gray-900 truncate\">\r\n//                       {file.name}\r\n//                     </p>\r\n//                     <p className=\"text-xs text-gray-500\">\r\n//                       {formatFileSize(file.size)} ‚Ä¢ {file.uploadedAt.toLocaleDateString()}\r\n//                     </p>\r\n//                   </div>\r\n//                 </div>\r\n                \r\n//                 <Button\r\n//                   variant=\"ghost\"\r\n//                   size=\"sm\"\r\n//                   onClick={() => onDeleteFile(file.id)}\r\n//                   className=\"text-gray-400 hover:text-red-500 h-8 w-8 p-0\"\r\n//                 >\r\n//                   <X className=\"h-4 w-4\" />\r\n//                 </Button>\r\n//               </div>\r\n//             ))}\r\n//           </div>\r\n//         </div>\r\n//       )}\r\n\r\n//       {uploadedFiles.length === 0 && !isUploading && (\r\n//         <div className=\"text-center py-8\">\r\n//           <AlertCircle className=\"h-8 w-8 text-gray-300 mx-auto mb-3\" />\r\n//           <p className=\"text-sm text-gray-500\">No documents uploaded yet</p>\r\n//           <p className=\"text-xs text-gray-400 mt-1\">Upload some documents to start chatting</p>\r\n//         </div>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// // Chat Interface Component\r\n// const ChatInterface = ({ messages, onSendMessage, isGenerating, hasDocuments }: {\r\n//   messages: ChatMessage[];\r\n//   onSendMessage: (message: string) => void;\r\n//   isGenerating: boolean;\r\n//   hasDocuments: boolean;\r\n// }) => {\r\n//   const [inputMessage, setInputMessage] = useState(\"\");\r\n//   const messagesEndRef = useRef<HTMLDivElement>(null);\r\n//   const textareaRef = useRef<HTMLTextAreaElement>(null);\r\n\r\n//   const scrollToBottom = () => {\r\n//     messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n//   };\r\n\r\n//   useEffect(() => {\r\n//     scrollToBottom();\r\n//   }, [messages]);\r\n\r\n//   const handleSubmit = (e: React.FormEvent) => {\r\n//     e.preventDefault();\r\n//     if (inputMessage.trim() && !isGenerating && hasDocuments) {\r\n//       onSendMessage(inputMessage.trim());\r\n//       setInputMessage(\"\");\r\n//     }\r\n//   };\r\n\r\n//   const handleKeyDown = (e: React.KeyboardEvent) => {\r\n//     if (e.key === 'Enter' && !e.shiftKey) {\r\n//       e.preventDefault();\r\n//       handleSubmit(e);\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"flex flex-col h-full bg-gradient-to-b from-white to-gray-50/50\">\r\n//       <div className=\"p-6 border-b border-gray-100/80 bg-white/70 backdrop-blur-sm\">\r\n//         <div className=\"flex items-center gap-4\">\r\n//           <div className=\"relative\">\r\n//             <div className=\"absolute inset-0 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl blur-sm opacity-20\"></div>\r\n//             <div className=\"relative p-3 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl shadow-lg\">\r\n//               <MessageSquare className=\"h-6 w-6 text-white\" />\r\n//             </div>\r\n//           </div>\r\n//           <div className=\"flex-1\">\r\n//             <h2 className=\"text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent\">\r\n//               AI Assistant\r\n//             </h2>\r\n//             <p className=\"text-sm text-gray-500 flex items-center gap-2\">\r\n//               <Sparkles className=\"h-3 w-3\" />\r\n//               {hasDocuments \r\n//                 ? \"Ready to answer questions about your documents\" \r\n//                 : \"Upload documents to start an intelligent conversation\"\r\n//               }\r\n//             </p>\r\n//           </div>\r\n//           <div className=\"flex items-center gap-2\">\r\n//             <div className={`w-2 h-2 rounded-full ${hasDocuments ? 'bg-green-400' : 'bg-amber-400'} animate-pulse`}></div>\r\n//             <span className=\"text-xs text-gray-500 font-medium\">\r\n//               {hasDocuments ? 'Ready' : 'Waiting'}\r\n//             </span>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n\r\n//       <div className=\"flex-1 overflow-hidden\">\r\n//         <div className=\"h-full overflow-y-auto p-6 space-y-6\">\r\n//           {messages.length === 0 ? (\r\n//             <div className=\"flex flex-col items-center justify-center h-full text-center py-16\">\r\n//               <div className=\"relative mb-6\">\r\n//                 <div className=\"absolute inset-0 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-full blur-xl opacity-50\"></div>\r\n//                 <div className=\"relative w-20 h-20 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-full flex items-center justify-center border border-blue-100/50\">\r\n//                   <Bot className=\"h-10 w-10 text-blue-500\" />\r\n//                 </div>\r\n//               </div>\r\n//               <h3 className=\"text-2xl font-bold text-gray-900 mb-3\">\r\n//                 Welcome to DocuChat AI\r\n//               </h3>\r\n//               <p className=\"text-gray-500 max-w-md leading-relaxed\">\r\n//                 {hasDocuments \r\n//                   ? \"Your documents are ready! Start by asking me any questions about their content and I'll provide detailed insights.\"\r\n//                   : \"Upload your documents first, then I'll be ready to provide intelligent answers and insights about their content.\"\r\n//                 }\r\n//               </p>\r\n//               {hasDocuments && (\r\n//                 <div className=\"mt-6 p-4 bg-blue-50/50 rounded-xl border border-blue-100\">\r\n//                   <p className=\"text-sm text-blue-600 font-medium\">üí° Try asking questions like:</p>\r\n//                   <ul className=\"mt-2 text-xs text-blue-500 space-y-1\">\r\n//                     <li>‚Ä¢ \"What are the main topics covered?\"</li>\r\n//                     <li>‚Ä¢ \"Can you summarize the key points?\"</li>\r\n//                     <li>‚Ä¢ \"What specific details about [topic]?\"</li>\r\n//                   </ul>\r\n//                 </div>\r\n//               )}\r\n//             </div>\r\n//           ) : (\r\n//             <>\r\n//               {messages.map((message) => (\r\n//                 <div\r\n//                   key={message.id}\r\n//                   className={`flex gap-4 ${message.type === 'user' ? 'flex-row-reverse' : 'flex-row'} animate-fade-in`}\r\n//                 >\r\n//                   <div className={`flex-shrink-0 w-10 h-10 rounded-2xl flex items-center justify-center shadow-lg ${\r\n//                     message.type === 'user' \r\n//                       ? 'bg-gradient-to-r from-emerald-500 to-green-600' \r\n//                       : 'bg-gradient-to-r from-blue-500 to-indigo-600'\r\n//                   }`}>\r\n//                     {message.type === 'user' ? (\r\n//                       <User className=\"h-5 w-5 text-white\" />\r\n//                     ) : (\r\n//                       <Bot className=\"h-5 w-5 text-white\" />\r\n//                     )}\r\n//                   </div>\r\n                  \r\n//                   <div className={`flex-1 max-w-4xl ${message.type === 'user' ? 'text-right' : 'text-left'}`}>\r\n//                     <div className={`inline-block p-4 rounded-2xl shadow-sm ${\r\n//                       message.type === 'user'\r\n//                         ? 'bg-gradient-to-r from-emerald-500 to-green-600 text-white'\r\n//                         : 'bg-white text-gray-900 border border-gray-100'\r\n//                     }`}>\r\n//                       <p className=\"whitespace-pre-wrap leading-relaxed\">{message.content}</p>\r\n//                     </div>\r\n//                     <p className=\"text-xs text-gray-400 mt-2 px-3 flex items-center gap-1\">\r\n//                       <span className=\"w-1 h-1 bg-gray-300 rounded-full\"></span>\r\n//                       {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n//                     </p>\r\n//                   </div>\r\n//                 </div>\r\n//               ))}\r\n              \r\n//               {isGenerating && (\r\n//                 <div className=\"flex gap-4 animate-fade-in\">\r\n//                   <div className=\"flex-shrink-0 w-10 h-10 rounded-2xl bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg\">\r\n//                     <Bot className=\"h-5 w-5 text-white\" />\r\n//                   </div>\r\n                  \r\n//                   <div className=\"flex-1\">\r\n//                     <div className=\"inline-block p-4 bg-white rounded-2xl shadow-sm border border-gray-100\">\r\n//                       <div className=\"flex items-center gap-3 text-gray-600\">\r\n//                         <div className=\"flex space-x-1\">\r\n//                           <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\"></div>\r\n//                           <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{animationDelay: '0.1s'}}></div>\r\n//                           <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{animationDelay: '0.2s'}}></div>\r\n//                         </div>\r\n//                         <span className=\"text-sm font-medium\">AI is thinking...</span>\r\n//                       </div>\r\n//                     </div>\r\n//                   </div>\r\n//                 </div>\r\n//               )}\r\n//             </>\r\n//           )}\r\n//           <div ref={messagesEndRef} />\r\n//         </div>\r\n//       </div>\r\n\r\n//       <div className=\"p-6 border-t border-gray-100/80 bg-white/70 backdrop-blur-sm\">\r\n//         <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n//           <div className=\"relative\">\r\n//             <Textarea\r\n//               ref={textareaRef}\r\n//               value={inputMessage}\r\n//               onChange={(e) => setInputMessage(e.target.value)}\r\n//               onKeyDown={handleKeyDown}\r\n//               placeholder={hasDocuments ? \"Ask anything about your documents...\" : \"Upload documents first to start chatting\"}\r\n//               disabled={!hasDocuments || isGenerating}\r\n//               className=\"min-h-[60px] max-h-32 resize-none pr-14 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-300 border-gray-200 bg-white/80 backdrop-blur-sm shadow-sm rounded-xl\"\r\n//             />\r\n//             <Button\r\n//               type=\"submit\"\r\n//               size=\"sm\"\r\n//               disabled={!inputMessage.trim() || !hasDocuments || isGenerating}\r\n//               className=\"absolute bottom-3 right-3 h-8 w-8 p-0 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 shadow-lg hover:shadow-xl transition-all duration-200 rounded-lg\"\r\n//             >\r\n//               <Send className=\"h-4 w-4\" />\r\n//             </Button>\r\n//           </div>\r\n          \r\n//           {!hasDocuments && (\r\n//             <div className=\"flex items-center gap-2 p-3 bg-amber-50/80 border border-amber-200 rounded-xl\">\r\n//               <div className=\"w-2 h-2 bg-amber-400 rounded-full animate-pulse\"></div>\r\n//               <p className=\"text-sm text-amber-700 font-medium\">\r\n//                 Please upload documents to enable the chat functionality\r\n//               </p>\r\n//             </div>\r\n//           )}\r\n//         </form>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// // Main App Component\r\n// const ConsolidatedApp = () => {\r\n//   const [uploadedFiles, setUploadedFiles] = useState<UploadedFile[]>([]);\r\n//   const [chatMessages, setChatMessages] = useState<ChatMessage[]>([]);\r\n//   const [isUploading, setIsUploading] = useState(false);\r\n//   const [isGenerating, setIsGenerating] = useState(false);\r\n\r\n//   const handleFileUpload = async (files: File[]) => {\r\n//     setIsUploading(true);\r\n    \r\n//     // Simulate API call delay\r\n//     await new Promise(resolve => setTimeout(resolve, 2000));\r\n    \r\n//     const newFiles: UploadedFile[] = files.map(file => ({\r\n//       id: Math.random().toString(36).substr(2, 9),\r\n//       name: file.name,\r\n//       size: file.size,\r\n//       type: file.type,\r\n//       uploadedAt: new Date(),\r\n//     }));\r\n    \r\n//     setUploadedFiles(prev => [...prev, ...newFiles]);\r\n//     setIsUploading(false);\r\n//   };\r\n\r\n//   const handleSendMessage = async (message: string) => {\r\n//     if (!message.trim()) return;\r\n\r\n//     const userMessage: ChatMessage = {\r\n//       id: Math.random().toString(36).substr(2, 9),\r\n//       type: 'user',\r\n//       content: message,\r\n//       timestamp: new Date(),\r\n//     };\r\n\r\n//     setChatMessages(prev => [...prev, userMessage]);\r\n//     setIsGenerating(true);\r\n\r\n//     // Simulate API call delay\r\n//     await new Promise(resolve => setTimeout(resolve, 3000));\r\n\r\n//     const botMessage: ChatMessage = {\r\n//       id: Math.random().toString(36).substr(2, 9),\r\n//       type: 'bot',\r\n//       content: \"I understand your question about the uploaded documents. This is a simulated response. In a real implementation, this would be connected to your Flask backend API to process the documents and generate intelligent responses based on their content.\",\r\n//       timestamp: new Date(),\r\n//     };\r\n\r\n//     setChatMessages(prev => [...prev, botMessage]);\r\n//     setIsGenerating(false);\r\n//   };\r\n\r\n//   const handleDeleteFile = (fileId: string) => {\r\n//     setUploadedFiles(prev => prev.filter(file => file.id !== fileId));\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100\">\r\n//       <Header />\r\n      \r\n//       <div className=\"container mx-auto px-4 py-8 max-w-7xl\">\r\n//         <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 h-[calc(100vh-12rem)]\">\r\n//           <div className=\"lg:col-span-1\">\r\n//             <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 h-full overflow-hidden\">\r\n//               <div className=\"p-6 border-b border-gray-100\">\r\n//                 <div className=\"flex items-center gap-3\">\r\n//                   <div className=\"p-2 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg\">\r\n//                     <FileText className=\"h-5 w-5 text-white\" />\r\n//                   </div>\r\n//                   <div>\r\n//                     <h2 className=\"text-lg font-semibold text-gray-900\">Documents</h2>\r\n//                     <p className=\"text-sm text-gray-500\">{uploadedFiles.length} files uploaded</p>\r\n//                   </div>\r\n//                 </div>\r\n//               </div>\r\n              \r\n//               <div className=\"p-6 h-full overflow-y-auto\">\r\n//                 <DocumentUpload\r\n//                   onFileUpload={handleFileUpload}\r\n//                   uploadedFiles={uploadedFiles}\r\n//                   onDeleteFile={handleDeleteFile}\r\n//                   isUploading={isUploading}\r\n//                 />\r\n//               </div>\r\n//             </div>\r\n//           </div>\r\n\r\n//           <div className=\"lg:col-span-2\">\r\n//             <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 h-full\">\r\n//               <ChatInterface\r\n//                 messages={chatMessages}\r\n//                 onSendMessage={handleSendMessage}\r\n//                 isGenerating={isGenerating}\r\n//                 hasDocuments={uploadedFiles.length > 0}\r\n//               />\r\n//             </div>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default ConsolidatedApp;\r\n\r\n\r\n\r\n// import React, { useState, useRef, useEffect, useCallback } from \"react\";\r\n// import { Send, Bot, User, MessageSquare, Loader, Sparkles, Upload, File, X, CheckCircle, AlertCircle, FileText, RefreshCw } from \"lucide-react\";\r\n\r\n// // API Configuration\r\n// const API_BASE_URL = 'http://localhost:5000'; // Adjust this to your Flask server URL\r\n\r\n// // Types\r\n// export interface UploadedFile {\r\n//   id: string;\r\n//   name: string;\r\n//   size: number;\r\n//   type: string;\r\n//   uploadedAt: Date;\r\n//   status: 'uploading' | 'processed' | 'error';\r\n// }\r\n\r\n// export interface ChatMessage {\r\n//   id: string;\r\n//   type: 'user' | 'bot';\r\n//   content: string;\r\n//   timestamp: Date;\r\n//   sources?: any[];\r\n// }\r\n\r\n// // API Functions\r\n// const uploadFileToBackend = async (file: File): Promise<void> => {\r\n//   const formData = new FormData();\r\n//   formData.append('file', file);\r\n  \r\n//   const response = await fetch(`${API_BASE_URL}/upload`, {\r\n//     method: 'POST',\r\n//     body: formData,\r\n//   });\r\n  \r\n//   if (!response.ok) {\r\n//     const error = await response.json();\r\n//     throw new Error(error.error || 'Upload failed');\r\n//   }\r\n  \r\n//   return response.json();\r\n// };\r\n\r\n// const sendMessageToBackend = async (question: string): Promise<{answer: string, sources: any[]}> => {\r\n//   const response = await fetch(`${API_BASE_URL}/ask`, {\r\n//     method: 'POST',\r\n//     headers: {\r\n//       'Content-Type': 'application/json',\r\n//     },\r\n//     body: JSON.stringify({ question }),\r\n//   });\r\n  \r\n//   if (!response.ok) {\r\n//     const error = await response.json();\r\n//     throw new Error(error.error || 'Failed to get response');\r\n//   }\r\n  \r\n//   return response.json();\r\n// };\r\n\r\n// const clearChatMemory = async (): Promise<void> => {\r\n//   const response = await fetch(`${API_BASE_URL}/clear`, {\r\n//     method: 'POST',\r\n//   });\r\n  \r\n//   if (!response.ok) {\r\n//     const error = await response.json();\r\n//     throw new Error(error.error || 'Failed to clear memory');\r\n//   }\r\n  \r\n//   return response.json();\r\n// };\r\n\r\n// // Basic UI Components\r\n// const Button = React.forwardRef<\r\n//   HTMLButtonElement,\r\n//   React.ButtonHTMLAttributes<HTMLButtonElement> & {\r\n//     variant?: \"default\" | \"ghost\" | \"outline\";\r\n//     size?: \"default\" | \"sm\";\r\n//   }\r\n  \r\n// >(({ className = \"\", variant = \"default\", size = \"default\", ...props }, ref) => {\r\n//   const baseClasses = \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 disabled:pointer-events-none disabled:opacity-50\";\r\n//   const variantClasses = {\r\n//     default: \"bg-blue-600 text-white hover:bg-blue-700\",\r\n//     ghost: \"hover:bg-gray-100 hover:text-gray-900\",\r\n//     outline: \"border border-gray-300 bg-white hover:bg-gray-50\"\r\n//   };\r\n//   const sizeClasses = {\r\n//     default: \"h-10 px-4 py-2\",\r\n//     sm: \"h-9 rounded-md px-3\"\r\n//   };\r\n  \r\n//   return (\r\n//     <button\r\n//       className={`${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${className}`}\r\n//       ref={ref}\r\n//       {...props}\r\n//     />\r\n//   );\r\n// });\r\n\r\n// const Textarea = React.forwardRef<\r\n//   HTMLTextAreaElement,\r\n//   React.TextareaHTMLAttributes<HTMLTextAreaElement>\r\n// >(({ className = \"\", ...props }, ref) => (\r\n//   <textarea\r\n//     className={`flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${className}`}\r\n//     ref={ref}\r\n//     {...props}\r\n//   />\r\n// ));\r\n\r\n// // Header Component\r\n// const Header = ({ onClearChat }: { onClearChat: () => void }) => {\r\n//   return (\r\n//     <header className=\"bg-white/90 backdrop-blur-md border-b border-gray-200/50 sticky top-0 z-50\">\r\n//       <div className=\"container mx-auto px-4 py-4\">\r\n//         <div className=\"flex items-center justify-between\">\r\n//           <div className=\"flex items-center gap-3\">\r\n//             <div className=\"relative\">\r\n//               <div className=\"absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl blur-sm opacity-75\"></div>\r\n//               <div className=\"relative p-3 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl\">\r\n//                 <Bot className=\"h-6 w-6 text-white\" />\r\n//               </div>\r\n//             </div>\r\n//             <div>\r\n//               <h1 className=\"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent\">\r\n//                 DocuChat AI\r\n//               </h1>\r\n//               <p className=\"text-sm text-gray-500 flex items-center gap-1\">\r\n//                 <Sparkles className=\"h-3 w-3\" />\r\n//                 Intelligent Document Assistant\r\n//               </p>\r\n//             </div>\r\n//           </div>\r\n          \r\n//           <Button\r\n//             variant=\"outline\"\r\n//             size=\"sm\"\r\n//             onClick={onClearChat}\r\n//             className=\"gap-2\"\r\n//           >\r\n//             <RefreshCw className=\"h-4 w-4\" />\r\n//             Clear Chat\r\n//           </Button>\r\n//         </div>\r\n//       </div>\r\n//     </header>\r\n//   );\r\n// };\r\n\r\n// // Document Upload Component\r\n// const DocumentUpload = ({ onFileUpload, uploadedFiles, onDeleteFile, isUploading }: {\r\n//   onFileUpload: (files: File[]) => void;\r\n//   uploadedFiles: UploadedFile[];\r\n//   onDeleteFile: (fileId: string) => void;\r\n//   isUploading: boolean;\r\n// }) => {\r\n//   const [isDragOver, setIsDragOver] = useState(false);\r\n\r\n//   const handleDragOver = useCallback((e: React.DragEvent) => {\r\n//     e.preventDefault();\r\n//     setIsDragOver(true);\r\n//   }, []);\r\n\r\n//   const handleDragLeave = useCallback((e: React.DragEvent) => {\r\n//     e.preventDefault();\r\n//     setIsDragOver(false);\r\n//   }, []);\r\n\r\n//   const handleDrop = useCallback((e: React.DragEvent) => {\r\n//     e.preventDefault();\r\n//     setIsDragOver(false);\r\n    \r\n//     const files = Array.from(e.dataTransfer.files);\r\n//     if (files.length > 0) {\r\n//       onFileUpload(files);\r\n//     }\r\n//   }, [onFileUpload]);\r\n\r\n//   const handleFileSelect = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n//     const files = Array.from(e.target.files || []);\r\n//     if (files.length > 0) {\r\n//       onFileUpload(files);\r\n//     }\r\n//     e.target.value = '';\r\n//   }, [onFileUpload]);\r\n\r\n//   const formatFileSize = (bytes: number) => {\r\n//     if (bytes === 0) return '0 Bytes';\r\n//     const k = 1024;\r\n//     const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n//     const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n//     return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n//   };\r\n\r\n//   const getFileIcon = (type: string) => {\r\n//     if (type.includes('pdf')) return 'üìÑ';\r\n//     if (type.includes('word') || type.includes('document')) return 'üìù';\r\n//     if (type.includes('text')) return 'üìã';\r\n//     if (type.includes('image')) return 'üñºÔ∏è';\r\n//     return 'üìÅ';\r\n//   };\r\n\r\n//   const getStatusIcon = (status: string) => {\r\n//     switch (status) {\r\n//       case 'uploading':\r\n//         return <Loader className=\"h-4 w-4 text-blue-500 animate-spin\" />;\r\n//       case 'processed':\r\n//         return <CheckCircle className=\"h-4 w-4 text-green-500\" />;\r\n//       case 'error':\r\n//         return <AlertCircle className=\"h-4 w-4 text-red-500\" />;\r\n//       default:\r\n//         return null;\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"space-y-6\">\r\n//       <div\r\n//         className={`\r\n//           relative border-2 border-dashed rounded-xl p-8 text-center transition-all duration-300\r\n//           ${isDragOver \r\n//             ? 'border-blue-400 bg-blue-50 scale-105' \r\n//             : 'border-gray-300 hover:border-gray-400 hover:bg-gray-50'\r\n//           }\r\n//           ${isUploading ? 'pointer-events-none opacity-50' : 'cursor-pointer'}\r\n//         `}\r\n//         onDragOver={handleDragOver}\r\n//         onDragLeave={handleDragLeave}\r\n//         onDrop={handleDrop}\r\n//         onClick={() => document.getElementById('file-input')?.click()}\r\n//       >\r\n//         <input\r\n//           id=\"file-input\"\r\n//           type=\"file\"\r\n//           multiple\r\n//           className=\"hidden\"\r\n//           onChange={handleFileSelect}\r\n//           accept=\".pdf,.doc,.docx,.txt,.rtf,.odt\"\r\n//         />\r\n        \r\n//         {isUploading ? (\r\n//           <div className=\"space-y-4\">\r\n//             <div className=\"flex justify-center\">\r\n//               <Loader className=\"h-12 w-12 text-blue-500 animate-spin\" />\r\n//             </div>\r\n//             <div>\r\n//               <p className=\"text-lg font-medium text-gray-900\">Processing documents...</p>\r\n//               <p className=\"text-sm text-gray-500\">Please wait while we analyze your files</p>\r\n//             </div>\r\n//           </div>\r\n//         ) : (\r\n//           <div className=\"space-y-4\">\r\n//             <div className=\"flex justify-center\">\r\n//               <div className={`p-4 rounded-full transition-colors duration-300 ${\r\n//                 isDragOver ? 'bg-blue-100' : 'bg-gray-100'\r\n//               }`}>\r\n//                 <Upload className={`h-8 w-8 transition-colors duration-300 ${\r\n//                   isDragOver ? 'text-blue-500' : 'text-gray-400'\r\n//                 }`} />\r\n//               </div>\r\n//             </div>\r\n//             <div>\r\n//               <p className=\"text-lg font-medium text-gray-900\">\r\n//                 {isDragOver ? 'Drop your files here' : 'Upload your documents'}\r\n//               </p>\r\n//               <p className=\"text-sm text-gray-500 mt-1\">\r\n//                 Drag and drop or click to browse\r\n//               </p>\r\n//               <p className=\"text-xs text-gray-400 mt-2\">\r\n//                 Supports PDF, DOC, DOCX, TXT files\r\n//               </p>\r\n//             </div>\r\n//           </div>\r\n//         )}\r\n//       </div>\r\n\r\n//       {uploadedFiles.length > 0 && (\r\n//         <div className=\"space-y-3\">\r\n//           <h3 className=\"text-sm font-medium text-gray-700 flex items-center gap-2\">\r\n//             <FileText className=\"h-4 w-4 text-blue-500\" />\r\n//             Documents ({uploadedFiles.length})\r\n//           </h3>\r\n          \r\n//           <div className=\"space-y-2 max-h-64 overflow-y-auto\">\r\n//             {uploadedFiles.map((file) => (\r\n//               <div\r\n//                 key={file.id}\r\n//                 className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg border hover:bg-gray-100 transition-colors\"\r\n//               >\r\n//                 <div className=\"flex items-center gap-3 flex-1 min-w-0\">\r\n//                   <span className=\"text-lg\">{getFileIcon(file.type)}</span>\r\n//                   <div className=\"flex-1 min-w-0\">\r\n//                     <p className=\"text-sm font-medium text-gray-900 truncate\">\r\n//                       {file.name}\r\n//                     </p>\r\n//                     <p className=\"text-xs text-gray-500\">\r\n//                       {formatFileSize(file.size)} ‚Ä¢ {file.uploadedAt.toLocaleDateString()}\r\n//                     </p>\r\n//                   </div>\r\n//                   <div className=\"flex items-center gap-2\">\r\n//                     {getStatusIcon(file.status)}\r\n//                     <span className=\"text-xs text-gray-500 capitalize\">{file.status}</span>\r\n//                   </div>\r\n//                 </div>\r\n                \r\n//                 <Button\r\n//                   variant=\"ghost\"\r\n//                   size=\"sm\"\r\n//                   onClick={() => onDeleteFile(file.id)}\r\n//                   className=\"text-gray-400 hover:text-red-500 h-8 w-8 p-0\"\r\n//                   disabled={file.status === 'uploading'}\r\n//                 >\r\n//                   <X className=\"h-4 w-4\" />\r\n//                 </Button>\r\n//               </div>\r\n//             ))}\r\n//           </div>\r\n//         </div>\r\n//       )}\r\n\r\n//       {uploadedFiles.length === 0 && !isUploading && (\r\n//         <div className=\"text-center py-8\">\r\n//           <AlertCircle className=\"h-8 w-8 text-gray-300 mx-auto mb-3\" />\r\n//           <p className=\"text-sm text-gray-500\">No documents uploaded yet</p>\r\n//           <p className=\"text-xs text-gray-400 mt-1\">Upload some documents to start chatting</p>\r\n//         </div>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// // Chat Interface Component\r\n// const ChatInterface = ({ messages, onSendMessage, isGenerating, hasDocuments, error }: {\r\n//   messages: ChatMessage[];\r\n//   onSendMessage: (message: string) => void;\r\n//   isGenerating: boolean;\r\n//   hasDocuments: boolean;\r\n//   error: string | null;\r\n// }) => {\r\n//   const [inputMessage, setInputMessage] = useState(\"\");\r\n//   const messagesEndRef = useRef<HTMLDivElement>(null);\r\n//   const textareaRef = useRef<HTMLTextAreaElement>(null);\r\n\r\n//   const scrollToBottom = () => {\r\n//     messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n//   };\r\n\r\n//   useEffect(() => {\r\n//     scrollToBottom();\r\n//   }, [messages]);\r\n\r\n//   const handleSubmit = (e: React.FormEvent) => {\r\n//     e.preventDefault();\r\n//     if (inputMessage.trim() && !isGenerating && hasDocuments) {\r\n//       onSendMessage(inputMessage.trim());\r\n//       setInputMessage(\"\");\r\n//     }\r\n//   };\r\n\r\n//   const handleKeyDown = (e: React.KeyboardEvent) => {\r\n//     if (e.key === 'Enter' && !e.shiftKey) {\r\n//       e.preventDefault();\r\n//       handleSubmit(e);\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"flex flex-col h-full bg-gradient-to-b from-white to-gray-50/50\">\r\n//       <div className=\"p-6 border-b border-gray-100/80 bg-white/70 backdrop-blur-sm\">\r\n//         <div className=\"flex items-center gap-4\">\r\n//           <div className=\"relative\">\r\n//             <div className=\"absolute inset-0 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl blur-sm opacity-20\"></div>\r\n//             <div className=\"relative p-3 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl shadow-lg\">\r\n//               <MessageSquare className=\"h-6 w-6 text-white\" />\r\n//             </div>\r\n//           </div>\r\n//           <div className=\"flex-1\">\r\n//             <h2 className=\"text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent\">\r\n//               AI Assistant\r\n//             </h2>\r\n//             <p className=\"text-sm text-gray-500 flex items-center gap-2\">\r\n//               <Sparkles className=\"h-3 w-3\" />\r\n//               {hasDocuments \r\n//                 ? \"Ready to answer questions about your documents\" \r\n//                 : \"Upload documents to start an intelligent conversation\"\r\n//               }\r\n//             </p>\r\n//           </div>\r\n//           <div className=\"flex items-center gap-2\">\r\n//             <div className={`w-2 h-2 rounded-full ${hasDocuments ? 'bg-green-400' : 'bg-amber-400'} animate-pulse`}></div>\r\n//             <span className=\"text-xs text-gray-500 font-medium\">\r\n//               {hasDocuments ? 'Ready' : 'Waiting'}\r\n//             </span>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n\r\n//       <div className=\"flex-1 overflow-hidden\">\r\n//         <div className=\"h-full overflow-y-auto p-6 space-y-6\">\r\n//           {error && (\r\n//             <div className=\"p-4 bg-red-50 border border-red-200 rounded-xl\">\r\n//               <div className=\"flex items-center gap-2\">\r\n//                 <AlertCircle className=\"h-5 w-5 text-red-500\" />\r\n//                 <p className=\"text-sm font-medium text-red-800\">Error</p>\r\n//               </div>\r\n//               <p className=\"text-sm text-red-600 mt-1\">{error}</p>\r\n//             </div>\r\n//           )}\r\n\r\n//           {messages.length === 0 ? (\r\n//             <div className=\"flex flex-col items-center justify-center h-full text-center py-16\">\r\n//               <div className=\"relative mb-6\">\r\n//                 <div className=\"absolute inset-0 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-full blur-xl opacity-50\"></div>\r\n//                 <div className=\"relative w-20 h-20 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-full flex items-center justify-center border border-blue-100/50\">\r\n//                   <Bot className=\"h-10 w-10 text-blue-500\" />\r\n//                 </div>\r\n//               </div>\r\n//               <h3 className=\"text-2xl font-bold text-gray-900 mb-3\">\r\n//                 Welcome to DocuChat AI\r\n//               </h3>\r\n//               <p className=\"text-gray-500 max-w-md leading-relaxed\">\r\n//                 {hasDocuments \r\n//                   ? \"Your documents are processed and ready! Start by asking me any questions about their content and I'll provide detailed insights.\"\r\n//                   : \"Upload your documents first, then I'll be ready to provide intelligent answers and insights about their content.\"\r\n//                 }\r\n//               </p>\r\n//               {hasDocuments && (\r\n//                 <div className=\"mt-6 p-4 bg-blue-50/50 rounded-xl border border-blue-100\">\r\n//                   <p className=\"text-sm text-blue-600 font-medium\">üí° Try asking questions like:</p>\r\n//                   <ul className=\"mt-2 text-xs text-blue-500 space-y-1\">\r\n//                     <li>‚Ä¢ \"What are the main topics covered?\"</li>\r\n//                     <li>‚Ä¢ \"Can you summarize the key points?\"</li>\r\n//                     <li>‚Ä¢ \"What specific details about [topic]?\"</li>\r\n//                   </ul>\r\n//                 </div>\r\n//               )}\r\n//             </div>\r\n//           ) : (\r\n//             <>\r\n//               {messages.map((message) => (\r\n//                 <div\r\n//                   key={message.id}\r\n//                   className={`flex gap-4 ${message.type === 'user' ? 'flex-row-reverse' : 'flex-row'} animate-fade-in`}\r\n//                 >\r\n//                   <div className={`flex-shrink-0 w-10 h-10 rounded-2xl flex items-center justify-center shadow-lg ${\r\n//                     message.type === 'user' \r\n//                       ? 'bg-gradient-to-r from-emerald-500 to-green-600' \r\n//                       : 'bg-gradient-to-r from-blue-500 to-indigo-600'\r\n//                   }`}>\r\n//                     {message.type === 'user' ? (\r\n//                       <User className=\"h-5 w-5 text-white\" />\r\n//                     ) : (\r\n//                       <Bot className=\"h-5 w-5 text-white\" />\r\n//                     )}\r\n//                   </div>\r\n                  \r\n//                   <div className={`flex-1 max-w-4xl ${message.type === 'user' ? 'text-right' : 'text-left'}`}>\r\n//                     <div className={`inline-block p-4 rounded-2xl shadow-sm ${\r\n//                       message.type === 'user'\r\n//                         ? 'bg-gradient-to-r from-emerald-500 to-green-600 text-white'\r\n//                         : 'bg-white text-gray-900 border border-gray-100'\r\n//                     }`}>\r\n//                       <p className=\"whitespace-pre-wrap leading-relaxed\">{message.content}</p>\r\n//                       {message.sources && message.sources.length > 0 && (\r\n//                         <div className=\"mt-3 pt-3 border-t border-gray-200\">\r\n//                           <p className=\"text-xs text-gray-500 font-medium mb-2\">Sources:</p>\r\n//                           <div className=\"space-y-1\">\r\n//                             {message.sources.map((source, index) => (\r\n//                               <div key={index} className=\"text-xs text-gray-600 bg-gray-50 rounded p-2\">\r\n//                                 {source.source && <span className=\"font-medium\">{source.source}</span>}\r\n//                                 {source.page && <span className=\"ml-2\">Page {source.page}</span>}\r\n//                               </div>\r\n//                             ))}\r\n//                           </div>\r\n//                         </div>\r\n//                       )}\r\n//                     </div>\r\n//                     <p className=\"text-xs text-gray-400 mt-2 px-3 flex items-center gap-1\">\r\n//                       <span className=\"w-1 h-1 bg-gray-300 rounded-full\"></span>\r\n//                       {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n//                     </p>\r\n//                   </div>\r\n//                 </div>\r\n//               ))}\r\n              \r\n//               {isGenerating && (\r\n//                 <div className=\"flex gap-4 animate-fade-in\">\r\n//                   <div className=\"flex-shrink-0 w-10 h-10 rounded-2xl bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg\">\r\n//                     <Bot className=\"h-5 w-5 text-white\" />\r\n//                   </div>\r\n                  \r\n//                   <div className=\"flex-1\">\r\n//                     <div className=\"inline-block p-4 bg-white rounded-2xl shadow-sm border border-gray-100\">\r\n//                       <div className=\"flex items-center gap-3 text-gray-600\">\r\n//                         <div className=\"flex space-x-1\">\r\n//                           <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\"></div>\r\n//                           <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{animationDelay: '0.1s'}}></div>\r\n//                           <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{animationDelay: '0.2s'}}></div>\r\n//                         </div>\r\n//                         <span className=\"text-sm font-medium\">AI is analyzing your documents...</span>\r\n//                       </div>\r\n//                     </div>\r\n//                   </div>\r\n//                 </div>\r\n//               )}\r\n//             </>\r\n//           )}\r\n//           <div ref={messagesEndRef} />\r\n//         </div>\r\n//       </div>\r\n\r\n//       <div className=\"p-6 border-t border-gray-100/80 bg-white/70 backdrop-blur-sm\">\r\n//         <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n//           <div className=\"relative\">\r\n//             <Textarea\r\n//               ref={textareaRef}\r\n//               value={inputMessage}\r\n//               onChange={(e) => setInputMessage(e.target.value)}\r\n//               onKeyDown={handleKeyDown}\r\n//               placeholder={hasDocuments ? \"Ask anything about your documents...\" : \"Upload documents first to start chatting\"}\r\n//               disabled={!hasDocuments || isGenerating}\r\n//               className=\"min-h-[60px] max-h-32 resize-none pr-14 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-300 border-gray-200 bg-white/80 backdrop-blur-sm shadow-sm rounded-xl\"\r\n//             />\r\n//             <Button\r\n//               type=\"submit\"\r\n//               size=\"sm\"\r\n//               disabled={!inputMessage.trim() || !hasDocuments || isGenerating}\r\n//               className=\"absolute bottom-3 right-3 h-8 w-8 p-0 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 shadow-lg hover:shadow-xl transition-all duration-200 rounded-lg\"\r\n//             >\r\n//               <Send className=\"h-4 w-4\" />\r\n//             </Button>\r\n//           </div>\r\n          \r\n//           {!hasDocuments && (\r\n//             <div className=\"flex items-center gap-2 p-3 bg-amber-50/80 border border-amber-200 rounded-xl\">\r\n//               <div className=\"w-2 h-2 bg-amber-400 rounded-full animate-pulse\"></div>\r\n//               <p className=\"text-sm text-amber-700 font-medium\">\r\n//                 Please upload and process documents to enable the chat functionality\r\n//               </p>\r\n//             </div>\r\n//           )}\r\n//         </form>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// // Main App Component\r\n// const ConsolidatedApp = () => {\r\n//   const [uploadedFiles, setUploadedFiles] = useState<UploadedFile[]>([]);\r\n//   const [chatMessages, setChatMessages] = useState<ChatMessage[]>([]);\r\n//   const [isUploading, setIsUploading] = useState(false);\r\n//   const [isGenerating, setIsGenerating] = useState(false);\r\n//   const [error, setError] = useState<string | null>(null);\r\n\r\n//   const handleFileUpload = async (files: File[]) => {\r\n//     setIsUploading(true);\r\n//     setError(null);\r\n    \r\n//     // Create initial file entries\r\n//     const newFiles: UploadedFile[] = files.map(file => ({\r\n//       id: Math.random().toString(36).substr(2, 9),\r\n//       name: file.name,\r\n//       size: file.size,\r\n//       type: file.type,\r\n//       uploadedAt: new Date(),\r\n//       status: 'uploading'\r\n//     }));\r\n    \r\n//     setUploadedFiles(prev => [...prev, ...newFiles]);\r\n\r\n//     // Upload files to backend\r\n//     try {\r\n//       const uploadPromises = files.map(async (file, index) => {\r\n//         try {\r\n//           await uploadFileToBackend(file);\r\n//           // Update file status to processed\r\n//           setUploadedFiles(prev => \r\n//             prev.map(f => \r\n//               f.id === newFiles[index].id \r\n//                 ? { ...f, status: 'processed' as const }\r\n//                 : f\r\n//             )\r\n//           );\r\n//         } catch (error) {\r\n//           console.error(`Failed to upload ${file.name}:`, error);\r\n//           // Update file status to error\r\n//           setUploadedFiles(prev => \r\n//             prev.map(f => \r\n//               f.id === newFiles[index].id \r\n//                 ? { ...f, status: 'error' as const }\r\n//                 : f\r\n//             )\r\n//           );\r\n//           throw error;\r\n//         }\r\n//       });\r\n\r\n//       await Promise.all(uploadPromises);\r\n//     } catch (error) {\r\n//       setError(`Upload failed: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n//     } finally {\r\n//       setIsUploading(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleSendMessage = async (message: string) => {\r\n//     if (!message.trim()) return;\r\n\r\n//     const userMessage: ChatMessage = {\r\n//       id: Math.random().toString(36).substr(2, 9),\r\n//       type: 'user',\r\n//       content: message,\r\n//       timestamp: new Date(),\r\n//     };\r\n\r\n//     setChatMessages(prev => [...prev, userMessage]);\r\n//     setIsGenerating(true);\r\n//     setError(null);\r\n\r\n//     try {\r\n//       const response = await sendMessageToBackend(message);\r\n      \r\n//       const botMessage: ChatMessage = {\r\n//         id: Math.random().toString(36).substr(2, 9),\r\n//         type: 'bot',\r\n//         content: response.answer,\r\n//         timestamp: new Date(),\r\n//         sources: response.sources\r\n//       };\r\n\r\n//       setChatMessages(prev => [...prev, botMessage]);\r\n//     } catch (error) {\r\n//       const errorMessage = error instanceof Error ? error.message : 'Failed to get response';\r\n//       setError(errorMessage);\r\n      \r\n//       const botMessage: ChatMessage = {\r\n//         id: Math.random().toString(36).substr(2, 9),\r\n//         type: 'bot',\r\n//         content: `Sorry, I encountered an error: ${errorMessage}. Please try again.`,\r\n//         timestamp: new Date(),\r\n//       };\r\n\r\n//       setChatMessages(prev => [...prev, botMessage]);\r\n//     } finally {\r\n//       setIsGenerating(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleDeleteFile = (fileId: string) => {\r\n//     setUploadedFiles(prev => prev.filter(file => file.id !== fileId));\r\n//   };\r\n\r\n//   const handleClearChat = async () => {\r\n//     try {\r\n//       await clearChatMemory();\r\n//       setChatMessages([]);\r\n//       setError(null);\r\n//     } catch (error) {\r\n//       setError(`Failed to clear chat: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n//     }\r\n//   };\r\n\r\n//   const hasProcessedDocuments = uploadedFiles.some(file => file.status === 'processed');\r\n\r\n//   return (\r\n//     <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100\">\r\n//       <Header onClearChat={handleClearChat} />\r\n      \r\n//       <div className=\"container mx-auto px-4 py-8 max-w-7xl\">\r\n//         <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 h-[calc(100vh-12rem)]\">\r\n//           <div className=\"lg:col-span-1\">\r\n//             <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 h-full overflow-hidden\">\r\n//               <div className=\"p-6 border-b border-gray-100\">\r\n//                 <div className=\"flex items-center gap-3\">\r\n//                   <div className=\"p-2 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg\">\r\n//                     <FileText className=\"h-5 w-5 text-white\" />\r\n//                   </div>\r\n//                   <div>\r\n//                     <h2 className=\"text-lg font-semibold text-gray-900\">Documents</h2>\r\n//                     <p className=\"text-sm text-gray-500\">\r\n//                       {uploadedFiles.length} files ‚Ä¢ {uploadedFiles.filter(f => f.status === 'processed').length} processed\r\n//                     </p>\r\n//                   </div>\r\n//                 </div>\r\n//               </div>\r\n              \r\n              \r\n//               <div className=\"p-6 h-full overflow-y-auto\">\r\n//                 <DocumentUpload\r\n//                   onFileUpload={handleFileUpload}\r\n//                   uploadedFiles={uploadedFiles}\r\n//                   onDeleteFile={handleDeleteFile}\r\n//                   isUploading={isUploading}\r\n//                 />\r\n//               </div>\r\n//             </div>\r\n//           </div>\r\n\r\n//           <div className=\"lg:col-span-2\">\r\n//             <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 h-full\">\r\n//               <ChatInterface\r\n//                 messages={chatMessages}\r\n//                 onSendMessage={handleSendMessage}\r\n//                 isGenerating={isGenerating}\r\n//                 hasDocuments={hasProcessedDocuments}\r\n//                 error={error}\r\n//               />\r\n//             </div>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default ConsolidatedApp;\r\n\r\n\r\n\r\nimport React, { useState, useRef, useEffect, useCallback } from \"react\";\r\nimport { Send, Bot, User, MessageSquare, Loader, Sparkles, Upload, X, CheckCircle, AlertCircle, FileText, RefreshCw } from \"lucide-react\";\r\n\r\n// API Configuration\r\nconst API_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:5000';\r\n\r\n// Types\r\nexport interface UploadedFile {\r\n  id: string;\r\n  name: string;\r\n  size: number;\r\n  type: string;\r\n  uploadedAt: Date;\r\n  status: 'uploading' | 'processed' | 'error';\r\n}\r\n\r\nexport interface ChatMessage {\r\n  id: string;\r\n  type: 'user' | 'bot';\r\n  content: string;\r\n  timestamp: Date;\r\n  sources?: DocumentSource[];\r\n}\r\n\r\nexport interface DocumentSource {\r\n  source?: string;\r\n  page?: number;\r\n  content?: string;\r\n}\r\n\r\nexport interface APIResponse {\r\n  answer: string;\r\n  sources: DocumentSource[];\r\n}\r\n\r\n// API Functions\r\nconst uploadFileToBackend = async (file: File): Promise<void> => {\r\n  const formData = new FormData();\r\n  formData.append('file', file);\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/upload`, {\r\n    method: 'POST',\r\n    body: formData,\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorText = await response.text();\r\n    let errorMessage = 'Upload failed';\r\n    \r\n    try {\r\n      const errorData = JSON.parse(errorText);\r\n      errorMessage = errorData.error || errorMessage;\r\n    } catch {\r\n      errorMessage = `HTTP ${response.status}: ${response.statusText}`;\r\n    }\r\n    \r\n    throw new Error(errorMessage);\r\n  }\r\n  \r\n  return response.json();\r\n};\r\n\r\nconst sendMessageToBackend = async (question: string): Promise<APIResponse> => {\r\n  const response = await fetch(`${API_BASE_URL}/ask`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ question }),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorText = await response.text();\r\n    let errorMessage = 'Failed to get response';\r\n    \r\n    try {\r\n      const errorData = JSON.parse(errorText);\r\n      errorMessage = errorData.error || errorMessage;\r\n    } catch {\r\n      errorMessage = `HTTP ${response.status}: ${response.statusText}`;\r\n    }\r\n    \r\n    throw new Error(errorMessage);\r\n  }\r\n  \r\n  return response.json();\r\n};\r\n\r\nconst clearChatMemory = async (): Promise<void> => {\r\n  const response = await fetch(`${API_BASE_URL}/clear`, {\r\n    method: 'POST',\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorText = await response.text();\r\n    let errorMessage = 'Failed to clear memory';\r\n    \r\n    try {\r\n      const errorData = JSON.parse(errorText);\r\n      errorMessage = errorData.error || errorMessage;\r\n    } catch {\r\n      errorMessage = `HTTP ${response.status}: ${response.statusText}`;\r\n    }\r\n    \r\n    throw new Error(errorMessage);\r\n  }\r\n  \r\n  return response.json();\r\n};\r\n\r\n// Basic UI Components\r\nconst Button = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ButtonHTMLAttributes<HTMLButtonElement> & {\r\n    variant?: \"default\" | \"ghost\" | \"outline\";\r\n    size?: \"default\" | \"sm\";\r\n  }\r\n>(({ className = \"\", variant = \"default\", size = \"default\", ...props }, ref) => {\r\n  const baseClasses = \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 disabled:pointer-events-none disabled:opacity-50\";\r\n  const variantClasses = {\r\n    default: \"bg-blue-600 text-white hover:bg-blue-700\",\r\n    ghost: \"hover:bg-gray-100 hover:text-gray-900\",\r\n    outline: \"border border-gray-300 bg-white hover:bg-gray-50\"\r\n  };\r\n  const sizeClasses = {\r\n    default: \"h-10 px-4 py-2\",\r\n    sm: \"h-9 rounded-md px-3\"\r\n  };\r\n  \r\n  return (\r\n    <button\r\n      className={`${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${className}`}\r\n      ref={ref}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\n\r\nButton.displayName = \"Button\";\r\n\r\nconst Textarea = React.forwardRef<\r\n  HTMLTextAreaElement,\r\n  React.TextareaHTMLAttributes<HTMLTextAreaElement>\r\n>(({ className = \"\", ...props }, ref) => (\r\n  <textarea\r\n    className={`flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${className}`}\r\n    ref={ref}\r\n    {...props}\r\n  />\r\n));\r\n\r\nTextarea.displayName = \"Textarea\";\r\n\r\n// Utility Functions\r\nconst formatFileSize = (bytes: number): string => {\r\n  if (bytes === 0) return '0 Bytes';\r\n  const k = 1024;\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n};\r\n\r\nconst getFileIcon = (type: string): string => {\r\n  if (type.includes('pdf')) return 'üìÑ';\r\n  if (type.includes('word') || type.includes('document')) return 'üìù';\r\n  if (type.includes('text')) return 'üìã';\r\n  if (type.includes('image')) return 'üñºÔ∏è';\r\n  return 'üìÅ';\r\n};\r\n\r\nconst generateId = (): string => {\r\n  return Math.random().toString(36).substr(2, 9) + Date.now().toString(36);\r\n};\r\n\r\n// Header Component\r\nconst Header = React.memo(({ onClearChat }: { onClearChat: () => void }) => {\r\n  return (\r\n    <header className=\"bg-white/90 backdrop-blur-md border-b border-gray-200/50 sticky top-0 z-50\">\r\n      <div className=\"container mx-auto px-4 py-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl blur-sm opacity-75\"></div>\r\n              <div className=\"relative p-3 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl\">\r\n                <Bot className=\"h-6 w-6 text-white\" />\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent\">\r\n                DocuChat AI\r\n              </h1>\r\n              <p className=\"text-sm text-gray-500 flex items-center gap-1\">\r\n                <Sparkles className=\"h-3 w-3\" />\r\n                Intelligent Document Assistant\r\n              </p>\r\n            </div>\r\n          </div>\r\n          \r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={onClearChat}\r\n            className=\"gap-2\"\r\n            aria-label=\"Clear chat history\"\r\n          >\r\n            <RefreshCw className=\"h-4 w-4\" />\r\n            Clear Chat\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n});\r\n\r\nHeader.displayName = \"Header\";\r\n\r\n// File Upload Component\r\ninterface DocumentUploadProps {\r\n  onFileUpload: (files: File[]) => void;\r\n  uploadedFiles: UploadedFile[];\r\n  onDeleteFile: (fileId: string) => void;\r\n  isUploading: boolean;\r\n}\r\n\r\nconst DocumentUpload = React.memo(({ \r\n  onFileUpload, \r\n  uploadedFiles, \r\n  onDeleteFile, \r\n  isUploading \r\n}: DocumentUploadProps) => {\r\n  const [isDragOver, setIsDragOver] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const dragCounter = useRef(0);\r\n\r\n  const handleDragEnter = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    dragCounter.current++;\r\n    if (e.dataTransfer.items && e.dataTransfer.items.length > 0) {\r\n      setIsDragOver(true);\r\n    }\r\n  }, []);\r\n\r\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    dragCounter.current--;\r\n    if (dragCounter.current === 0) {\r\n      setIsDragOver(false);\r\n    }\r\n  }, []);\r\n\r\n  const handleDragOver = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  }, []);\r\n\r\n  const handleDrop = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsDragOver(false);\r\n    dragCounter.current = 0;\r\n    \r\n    const files = Array.from(e.dataTransfer.files).filter(file => \r\n      file.type.includes('pdf') || \r\n      file.type.includes('document') || \r\n      file.type.includes('text') ||\r\n      file.name.endsWith('.txt') ||\r\n      file.name.endsWith('.rtf') ||\r\n      file.name.endsWith('.odt')\r\n    );\r\n    \r\n    if (files.length > 0) {\r\n      onFileUpload(files);\r\n    }\r\n  }, [onFileUpload]);\r\n\r\n  const handleFileSelect = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = Array.from(e.target.files || []);\r\n    if (files.length > 0) {\r\n      onFileUpload(files);\r\n    }\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n  }, [onFileUpload]);\r\n\r\n  const handleUploadClick = useCallback(() => {\r\n    fileInputRef.current?.click();\r\n  }, []);\r\n\r\n  const getStatusIcon = (status: UploadedFile['status']) => {\r\n    switch (status) {\r\n      case 'uploading':\r\n        return <Loader className=\"h-4 w-4 text-blue-500 animate-spin\" />;\r\n      case 'processed':\r\n        return <CheckCircle className=\"h-4 w-4 text-green-500\" />;\r\n      case 'error':\r\n        return <AlertCircle className=\"h-4 w-4 text-red-500\" />;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div\r\n        className={`\r\n          relative border-2 border-dashed rounded-xl p-8 text-center transition-all duration-300\r\n          ${isDragOver \r\n            ? 'border-blue-400 bg-blue-50 scale-105' \r\n            : 'border-gray-300 hover:border-gray-400 hover:bg-gray-50'\r\n          }\r\n          ${isUploading ? 'pointer-events-none opacity-50' : 'cursor-pointer'}\r\n        `}\r\n        onDragEnter={handleDragEnter}\r\n        onDragLeave={handleDragLeave}\r\n        onDragOver={handleDragOver}\r\n        onDrop={handleDrop}\r\n        onClick={handleUploadClick}\r\n        role=\"button\"\r\n        tabIndex={0}\r\n        onKeyDown={(e) => {\r\n          if (e.key === 'Enter' || e.key === ' ') {\r\n            e.preventDefault();\r\n            handleUploadClick();\r\n          }\r\n        }}\r\n        aria-label=\"Upload documents by clicking or dragging files here\"\r\n      >\r\n        <input\r\n          ref={fileInputRef}\r\n          type=\"file\"\r\n          multiple\r\n          className=\"hidden\"\r\n          onChange={handleFileSelect}\r\n          accept=\".pdf,.doc,.docx,.txt,.rtf,.odt\"\r\n          aria-label=\"File input for document upload\"\r\n        />\r\n        \r\n        {isUploading ? (\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex justify-center\">\r\n              <Loader className=\"h-12 w-12 text-blue-500 animate-spin\" />\r\n            </div>\r\n            <div>\r\n              <p className=\"text-lg font-medium text-gray-900\">Processing documents...</p>\r\n              <p className=\"text-sm text-gray-500\">Please wait while we analyze your files</p>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex justify-center\">\r\n              <div className={`p-4 rounded-full transition-colors duration-300 ${\r\n                isDragOver ? 'bg-blue-100' : 'bg-gray-100'\r\n              }`}>\r\n                <Upload className={`h-8 w-8 transition-colors duration-300 ${\r\n                  isDragOver ? 'text-blue-500' : 'text-gray-400'\r\n                }`} />\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-lg font-medium text-gray-900\">\r\n                {isDragOver ? 'Drop your files here' : 'Upload your documents'}\r\n              </p>\r\n              <p className=\"text-sm text-gray-500 mt-1\">\r\n                Drag and drop or click to browse\r\n              </p>\r\n              <p className=\"text-xs text-gray-400 mt-2\">\r\n                Supports PDF, DOC, DOCX, TXT files\r\n              </p>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {uploadedFiles.length > 0 && (\r\n        <div className=\"space-y-3\">\r\n          <h3 className=\"text-sm font-medium text-gray-700 flex items-center gap-2\">\r\n            <FileText className=\"h-4 w-4 text-blue-500\" />\r\n            Documents ({uploadedFiles.length})\r\n          </h3>\r\n          \r\n          <div className=\"space-y-2 max-h-64 overflow-y-auto\">\r\n            {uploadedFiles.map((file) => (\r\n              <div\r\n                key={file.id}\r\n                className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg border hover:bg-gray-100 transition-colors\"\r\n              >\r\n                <div className=\"flex items-center gap-3 flex-1 min-w-0\">\r\n                  <span className=\"text-lg\" role=\"img\" aria-label={`${file.type} file`}>\r\n                    {getFileIcon(file.type)}\r\n                  </span>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <p className=\"text-sm font-medium text-gray-900 truncate\" title={file.name}>\r\n                      {file.name}\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-500\">\r\n                      {formatFileSize(file.size)} ‚Ä¢ {file.uploadedAt.toLocaleDateString()}\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    {getStatusIcon(file.status)}\r\n                    <span className=\"text-xs text-gray-500 capitalize\">{file.status}</span>\r\n                  </div>\r\n                </div>\r\n                \r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => onDeleteFile(file.id)}\r\n                  className=\"text-gray-400 hover:text-red-500 h-8 w-8 p-0\"\r\n                  disabled={file.status === 'uploading'}\r\n                  aria-label={`Delete ${file.name}`}\r\n                >\r\n                  <X className=\"h-4 w-4\" />\r\n                </Button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {uploadedFiles.length === 0 && !isUploading && (\r\n        <div className=\"text-center py-8\">\r\n          <AlertCircle className=\"h-8 w-8 text-gray-300 mx-auto mb-3\" />\r\n          <p className=\"text-sm text-gray-500\">No documents uploaded yet</p>\r\n          <p className=\"text-xs text-gray-400 mt-1\">Upload some documents to start chatting</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nDocumentUpload.displayName = \"DocumentUpload\";\r\n\r\n// Chat Interface Component\r\ninterface ChatInterfaceProps {\r\n  messages: ChatMessage[];\r\n  onSendMessage: (message: string) => void;\r\n  isGenerating: boolean;\r\n  hasDocuments: boolean;\r\n  error: string | null;\r\n}\r\n\r\nconst ChatInterface = React.memo(({ \r\n  messages, \r\n  onSendMessage, \r\n  isGenerating, \r\n  hasDocuments, \r\n  error \r\n}: ChatInterfaceProps) => {\r\n  const [inputMessage, setInputMessage] = useState(\"\");\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\r\n\r\n  const scrollToBottom = useCallback(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages, scrollToBottom]);\r\n\r\n  const handleSubmit = useCallback((e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (inputMessage.trim() && !isGenerating && hasDocuments) {\r\n      onSendMessage(inputMessage.trim());\r\n      setInputMessage(\"\");\r\n      // Focus back to textarea after sending\r\n      setTimeout(() => textareaRef.current?.focus(), 100);\r\n    }\r\n  }, [inputMessage, isGenerating, hasDocuments, onSendMessage]);\r\n\r\n  const handleKeyDown = useCallback((e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSubmit(e);\r\n    }\r\n  }, [handleSubmit]);\r\n\r\n  const handleInputChange = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    setInputMessage(e.target.value);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-gradient-to-b from-white to-gray-50/50\">\r\n      <div className=\"p-6 border-b border-gray-100/80 bg-white/70 backdrop-blur-sm\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <div className=\"relative\">\r\n            <div className=\"absolute inset-0 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl blur-sm opacity-20\"></div>\r\n            <div className=\"relative p-3 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl shadow-lg\">\r\n              <MessageSquare className=\"h-6 w-6 text-white\" />\r\n            </div>\r\n          </div>\r\n          <div className=\"flex-1\">\r\n            <h2 className=\"text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent\">\r\n              AI Assistant\r\n            </h2>\r\n            <p className=\"text-sm text-gray-500 flex items-center gap-2\">\r\n              <Sparkles className=\"h-3 w-3\" />\r\n              {hasDocuments \r\n                ? \"Ready to answer questions about your documents\" \r\n                : \"Upload documents to start an intelligent conversation\"\r\n              }\r\n            </p>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className={`w-2 h-2 rounded-full ${hasDocuments ? 'bg-green-400' : 'bg-amber-400'} animate-pulse`}></div>\r\n            <span className=\"text-xs text-gray-500 font-medium\">\r\n              {hasDocuments ? 'Ready' : 'Waiting'}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex-1 overflow-hidden\">\r\n        <div className=\"h-full overflow-y-auto p-6 space-y-6\">\r\n          {error && (\r\n            <div className=\"p-4 bg-red-50 border border-red-200 rounded-xl\\\" role=\"alert\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <AlertCircle className=\"h-5 w-5 text-red-500\" />\r\n                <p className=\"text-sm font-medium text-red-800\">Error</p>\r\n              </div>\r\n              <p className=\"text-sm text-red-600 mt-1\">{error}</p>\r\n            </div>\r\n          )}\r\n\r\n          {messages.length === 0 ? (\r\n            <div className=\"flex flex-col items-center justify-center h-full text-center py-16\">\r\n              <div className=\"relative mb-6\">\r\n                <div className=\"absolute inset-0 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-full blur-xl opacity-50\"></div>\r\n                <div className=\"relative w-20 h-20 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-full flex items-center justify-center border border-blue-100/50\">\r\n                  <Bot className=\"h-10 w-10 text-blue-500\" />\r\n                </div>\r\n              </div>\r\n              <h3 className=\"text-2xl font-bold text-gray-900 mb-3\">\r\n                Welcome to DocuChat AI\r\n              </h3>\r\n              <p className=\"text-gray-500 max-w-md leading-relaxed\">\r\n                {hasDocuments \r\n                  ? \"Your documents are processed and ready! Start by asking me any questions about their content and I'll provide detailed insights.\"\r\n                  : \"Upload your documents first, then I'll be ready to provide intelligent answers and insights about their content.\"\r\n                }\r\n              </p>\r\n              {hasDocuments && (\r\n                <div className=\"mt-6 p-4 bg-blue-50/50 rounded-xl border border-blue-100\">\r\n                  <p className=\"text-sm text-blue-600 font-medium\">üí° Try asking questions like:</p>\r\n                  <ul className=\"mt-2 text-xs text-blue-500 space-y-1\">\r\n                    <li>‚Ä¢ \"What are the main topics covered?\"</li>\r\n                    <li>‚Ä¢ \"Can you summarize the key points?\"</li>\r\n                    <li>‚Ä¢ \"What specific details about [topic]?\"</li>\r\n                  </ul>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {messages.map((message) => (\r\n                <div\r\n                  key={message.id}\r\n                  className={`flex gap-4 ${message.type === 'user' ? 'flex-row-reverse' : 'flex-row'} animate-fade-in`}\r\n                >\r\n                  <div className={`flex-shrink-0 w-10 h-10 rounded-2xl flex items-center justify-center shadow-lg ${\r\n                    message.type === 'user' \r\n                      ? 'bg-gradient-to-r from-emerald-500 to-green-600' \r\n                      : 'bg-gradient-to-r from-blue-500 to-indigo-600'\r\n                  }`}>\r\n                    {message.type === 'user' ? (\r\n                      <User className=\"h-5 w-5 text-white\" />\r\n                    ) : (\r\n                      <Bot className=\"h-5 w-5 text-white\" />\r\n                    )}\r\n                  </div>\r\n                  \r\n                  <div className={`flex-1 max-w-4xl ${message.type === 'user' ? 'text-right' : 'text-left'}`}>\r\n                    <div className={`inline-block p-4 rounded-2xl shadow-sm ${\r\n                      message.type === 'user'\r\n                        ? 'bg-gradient-to-r from-emerald-500 to-green-600 text-white'\r\n                        : 'bg-white text-gray-900 border border-gray-100'\r\n                    }`}>\r\n                      <p className=\"whitespace-pre-wrap leading-relaxed\">{message.content}</p>\r\n                      {message.sources && message.sources.length > 0 && (\r\n                        <div className=\"mt-3 pt-3 border-t border-gray-200\">\r\n                          <p className=\"text-xs text-gray-500 font-medium mb-2\">Sources:</p>\r\n                          <div className=\"space-y-1\">\r\n                            {message.sources.map((source, index) => (\r\n                              <div key={index} className=\"text-xs text-gray-600 bg-gray-50 rounded p-2\">\r\n                                {source.source && <span className=\"font-medium\">{source.source}</span>}\r\n                                {source.page && <span className=\"ml-2\">Page {source.page}</span>}\r\n                              </div>\r\n                            ))}\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <p className=\"text-xs text-gray-400 mt-2 px-3 flex items-center gap-1\">\r\n                      <span className=\"w-1 h-1 bg-gray-300 rounded-full\"></span>\r\n                      <time dateTime={message.timestamp.toISOString()}>\r\n                        {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                      </time>\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n              \r\n              {isGenerating && (\r\n                <div className=\"flex gap-4 animate-fade-in\">\r\n                  <div className=\"flex-shrink-0 w-10 h-10 rounded-2xl bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg\">\r\n                    <Bot className=\"h-5 w-5 text-white\" />\r\n                  </div>\r\n                  \r\n                  <div className=\"flex-1\">\r\n                    <div className=\"inline-block p-4 bg-white rounded-2xl shadow-sm border border-gray-100\">\r\n                      <div className=\"flex items-center gap-3 text-gray-600\">\r\n                        <div className=\"flex space-x-1\">\r\n                          <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\"></div>\r\n                          <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{animationDelay: '0.1s'}}></div>\r\n                          <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{animationDelay: '0.2s'}}></div>\r\n                        </div>\r\n                        <span className=\"text-sm font-medium\">AI is analyzing your documents...</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"p-6 border-t border-gray-100/80 bg-white/70 backdrop-blur-sm\">\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div className=\"relative\">\r\n            <Textarea\r\n              ref={textareaRef}\r\n              value={inputMessage}\r\n              onChange={handleInputChange}\r\n              onKeyDown={handleKeyDown}\r\n              placeholder={hasDocuments ? \"Ask anything about your documents...\" : \"Upload documents first to start chatting\"}\r\n              disabled={!hasDocuments || isGenerating}\r\n              className=\"min-h-[60px] max-h-32 resize-none pr-14 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-300 border-gray-200 bg-white/80 backdrop-blur-sm shadow-sm rounded-xl\"\r\n              aria-label=\"Message input\"\r\n            />\r\n            <Button\r\n              type=\"submit\"\r\n              size=\"sm\"\r\n              disabled={!inputMessage.trim() || !hasDocuments || isGenerating}\r\n              className=\"absolute bottom-3 right-3 h-8 w-8 p-0 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 shadow-lg hover:shadow-xl transition-all duration-200 rounded-lg\"\r\n              aria-label=\"Send message\"\r\n            >\r\n              <Send className=\"h-4 w-4\" />\r\n            </Button>\r\n          </div>\r\n          \r\n          {!hasDocuments && (\r\n            <div className=\"flex items-center gap-2 p-3 bg-amber-50/80 border border-amber-200 rounded-xl\" role=\"status\">\r\n              <div className=\"w-2 h-2 bg-amber-400 rounded-full animate-pulse\"></div>\r\n              <p className=\"text-sm text-amber-700 font-medium\">\r\n                Please upload and process documents to enable the chat functionality\r\n              </p>\r\n            </div>\r\n          )}\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nChatInterface.displayName = \"ChatInterface\";\r\n\r\n// Main App Component\r\nconst DocuChatApp = () => {\r\n  const [uploadedFiles, setUploadedFiles] = useState<UploadedFile[]>([]);\r\n  const [chatMessages, setChatMessages] = useState<ChatMessage[]>([]);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [isGenerating, setIsGenerating] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const handleFileUpload = useCallback(async (files: File[]) => {\r\n    if (files.length === 0) return;\r\n    \r\n    setIsUploading(true);\r\n    setError(null);\r\n    \r\n    // Create initial file entries\r\n    const newFiles: UploadedFile[] = files.map(file => ({\r\n      id: generateId(),\r\n      name: file.name,\r\n      size: file.size,\r\n      type: file.type,\r\n      uploadedAt: new Date(),\r\n      status: 'uploading'\r\n    }));\r\n    \r\n    setUploadedFiles(prev => [...prev, ...newFiles]);\r\n\r\n    // Upload files to backend\r\n    try {\r\n      const uploadPromises = files.map(async (file, index) => {\r\n        const fileId = newFiles[index].id;\r\n        try {\r\n          await uploadFileToBackend(file);\r\n          // Update file status to processed\r\n          setUploadedFiles(prev => \r\n            prev.map(f => \r\n              f.id === fileId \r\n                ? { ...f, status: 'processed' as const }\r\n                : f\r\n            )\r\n          );\r\n        } catch (error) {\r\n          console.error(`Failed to upload ${file.name}:`, error);\r\n          // Update file status to error\r\n          setUploadedFiles(prev => \r\n            prev.map(f => \r\n              f.id === fileId \r\n                ? { ...f, status: 'error' as const }\r\n                : f\r\n            )\r\n          );\r\n          throw error;\r\n        }\r\n      });\r\n\r\n      await Promise.allSettled(uploadPromises);\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\r\n      setError(`Upload failed: ${errorMessage}`);\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  }, []);\r\n\r\n  const handleSendMessage = useCallback(async (message: string) => {\r\n    if (!message.trim()) return;\r\n\r\n    const userMessage: ChatMessage = {\r\n      id: generateId(),\r\n      type: 'user',\r\n      content: message,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    setChatMessages(prev => [...prev, userMessage]);\r\n    setIsGenerating(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await sendMessageToBackend(message);\r\n      \r\n      const botMessage: ChatMessage = {\r\n        id: generateId(),\r\n        type: 'bot',\r\n        content: response.answer,\r\n        timestamp: new Date(),\r\n        sources: response.sources\r\n      };\r\n\r\n      setChatMessages(prev => [...prev, botMessage]);\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Failed to get response';\r\n      setError(errorMessage);\r\n      \r\n      const botMessage: ChatMessage = {\r\n        id: generateId(),\r\n        type: 'bot',\r\n        content: `Sorry, I encountered an error: ${errorMessage}. Please try again.`,\r\n        timestamp: new Date(),\r\n      };\r\n\r\n      setChatMessages(prev => [...prev, botMessage]);\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  }, []);\r\n\r\n  const handleDeleteFile = useCallback((fileId: string) => {\r\n    setUploadedFiles(prev => prev.filter(file => file.id !== fileId));\r\n  }, []);\r\n\r\n  const handleClearChat = useCallback(async () => {\r\n    try {\r\n      await clearChatMemory();\r\n      setChatMessages([]);\r\n      setError(null);\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\r\n      setError(`Failed to clear chat: ${errorMessage}`);\r\n    }\r\n  }, []);\r\n\r\n  const hasProcessedDocuments = uploadedFiles.some(file => file.status === 'processed');\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100\">\r\n      <Header onClearChat={handleClearChat} />\r\n      \r\n      <div className=\"container mx-auto px-4 py-8 max-w-7xl\">\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 h-[calc(100vh-12rem)]\">\r\n          <div className=\"lg:col-span-1\">\r\n            <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 h-full overflow-hidden\">\r\n              <div className=\"p-6 border-b border-gray-100\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"p-2 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg\">\r\n                    <FileText className=\"h-5 w-5 text-white\" />\r\n                  </div>\r\n                  <div>\r\n                    <h2 className=\"text-lg font-semibold text-gray-900\">Documents</h2>\r\n                    <p className=\"text-sm text-gray-500\">\r\n                      {uploadedFiles.length} files ‚Ä¢ {uploadedFiles.filter(f => f.status === 'processed').length} processed\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"p-6 h-full overflow-y-auto\">\r\n                <DocumentUpload\r\n                  onFileUpload={handleFileUpload}\r\n                  uploadedFiles={uploadedFiles}\r\n                  onDeleteFile={handleDeleteFile}\r\n                  isUploading={isUploading}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"lg:col-span-2\">\r\n            <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 h-full\">\r\n              <ChatInterface\r\n                messages={chatMessages}\r\n                onSendMessage={handleSendMessage}\r\n                isGenerating={isGenerating}\r\n                hasDocuments={hasProcessedDocuments}\r\n                error={error}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocuChatApp;"],"mappings":";;;;AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAIA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAIA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AACvE,SAASC,IAAI,EAAEC,GAAG,EAAEC,IAAI,EAAEC,aAAa,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,CAAC,EAAEC,WAAW,EAAEC,WAAW,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,cAAc;;AAEzI;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AACA,MAAMC,YAAY,GAAGC,MAAM,CAACC,IAAI,CAACC,GAAG,CAACC,YAAY,IAAI,uBAAuB;;AAE5E;;AA6BA;AACA,MAAMC,mBAAmB,GAAG,MAAOC,IAAU,IAAoB;EAC/D,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;EAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEH,IAAI,CAAC;EAE7B,MAAMI,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGX,YAAY,SAAS,EAAE;IACrDY,MAAM,EAAE,MAAM;IACdC,IAAI,EAAEN;EACR,CAAC,CAAC;EAEF,IAAI,CAACG,QAAQ,CAACI,EAAE,EAAE;IAChB,MAAMC,SAAS,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;IACvC,IAAIC,YAAY,GAAG,eAAe;IAElC,IAAI;MACF,MAAMC,SAAS,GAAGC,IAAI,CAACC,KAAK,CAACL,SAAS,CAAC;MACvCE,YAAY,GAAGC,SAAS,CAACG,KAAK,IAAIJ,YAAY;IAChD,CAAC,CAAC,MAAM;MACNA,YAAY,GAAG,QAAQP,QAAQ,CAACY,MAAM,KAAKZ,QAAQ,CAACa,UAAU,EAAE;IAClE;IAEA,MAAM,IAAIC,KAAK,CAACP,YAAY,CAAC;EAC/B;EAEA,OAAOP,QAAQ,CAACe,IAAI,CAAC,CAAC;AACxB,CAAC;AAED,MAAMC,oBAAoB,GAAG,MAAOC,QAAgB,IAA2B;EAC7E,MAAMjB,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGX,YAAY,MAAM,EAAE;IAClDY,MAAM,EAAE,MAAM;IACdgB,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDf,IAAI,EAAEM,IAAI,CAACU,SAAS,CAAC;MAAEF;IAAS,CAAC;EACnC,CAAC,CAAC;EAEF,IAAI,CAACjB,QAAQ,CAACI,EAAE,EAAE;IAChB,MAAMC,SAAS,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;IACvC,IAAIC,YAAY,GAAG,wBAAwB;IAE3C,IAAI;MACF,MAAMC,SAAS,GAAGC,IAAI,CAACC,KAAK,CAACL,SAAS,CAAC;MACvCE,YAAY,GAAGC,SAAS,CAACG,KAAK,IAAIJ,YAAY;IAChD,CAAC,CAAC,MAAM;MACNA,YAAY,GAAG,QAAQP,QAAQ,CAACY,MAAM,KAAKZ,QAAQ,CAACa,UAAU,EAAE;IAClE;IAEA,MAAM,IAAIC,KAAK,CAACP,YAAY,CAAC;EAC/B;EAEA,OAAOP,QAAQ,CAACe,IAAI,CAAC,CAAC;AACxB,CAAC;AAED,MAAMK,eAAe,GAAG,MAAAA,CAAA,KAA2B;EACjD,MAAMpB,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGX,YAAY,QAAQ,EAAE;IACpDY,MAAM,EAAE;EACV,CAAC,CAAC;EAEF,IAAI,CAACF,QAAQ,CAACI,EAAE,EAAE;IAChB,MAAMC,SAAS,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;IACvC,IAAIC,YAAY,GAAG,wBAAwB;IAE3C,IAAI;MACF,MAAMC,SAAS,GAAGC,IAAI,CAACC,KAAK,CAACL,SAAS,CAAC;MACvCE,YAAY,GAAGC,SAAS,CAACG,KAAK,IAAIJ,YAAY;IAChD,CAAC,CAAC,MAAM;MACNA,YAAY,GAAG,QAAQP,QAAQ,CAACY,MAAM,KAAKZ,QAAQ,CAACa,UAAU,EAAE;IAClE;IAEA,MAAM,IAAIC,KAAK,CAACP,YAAY,CAAC;EAC/B;EAEA,OAAOP,QAAQ,CAACe,IAAI,CAAC,CAAC;AACxB,CAAC;;AAED;AACA,MAAMM,MAAM,gBAAGpD,KAAK,CAACqD,UAAU,CAAAC,EAAA,GAM7BA,CAAC;EAAEC,SAAS,GAAG,EAAE;EAAEC,OAAO,GAAG,SAAS;EAAEC,IAAI,GAAG,SAAS;EAAE,GAAGC;AAAM,CAAC,EAAEC,GAAG,KAAK;EAC9E,MAAMC,WAAW,GAAG,+OAA+O;EACnQ,MAAMC,cAAc,GAAG;IACrBC,OAAO,EAAE,0CAA0C;IACnDC,KAAK,EAAE,uCAAuC;IAC9CC,OAAO,EAAE;EACX,CAAC;EACD,MAAMC,WAAW,GAAG;IAClBH,OAAO,EAAE,gBAAgB;IACzBI,EAAE,EAAE;EACN,CAAC;EAED,oBACEhD,OAAA;IACEqC,SAAS,EAAE,GAAGK,WAAW,IAAIC,cAAc,CAACL,OAAO,CAAC,IAAIS,WAAW,CAACR,IAAI,CAAC,IAAIF,SAAS,EAAG;IACzFI,GAAG,EAAEA,GAAI;IAAA,GACLD;EAAK;IAAAS,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACV,CAAC;AAEN,CAAC,CAAC;AAACC,GAAA,GAzBGnB,MAAM;AA2BZA,MAAM,CAACoB,WAAW,GAAG,QAAQ;AAE7B,MAAMC,QAAQ,gBAAGzE,KAAK,CAACqD,UAAU,CAAAqB,GAAA,GAG/BA,CAAC;EAAEnB,SAAS,GAAG,EAAE;EAAE,GAAGG;AAAM,CAAC,EAAEC,GAAG,kBAClCzC,OAAA;EACEqC,SAAS,EAAE,6RAA6RA,SAAS,EAAG;EACpTI,GAAG,EAAEA,GAAI;EAAA,GACLD;AAAK;EAAAS,QAAA,EAAAC,YAAA;EAAAC,UAAA;EAAAC,YAAA;AAAA,OACV,CACF,CAAC;AAACK,GAAA,GATGF,QAAQ;AAWdA,QAAQ,CAACD,WAAW,GAAG,UAAU;;AAEjC;AACA,MAAMI,cAAc,GAAIC,KAAa,IAAa;EAChD,IAAIA,KAAK,KAAK,CAAC,EAAE,OAAO,SAAS;EACjC,MAAMC,CAAC,GAAG,IAAI;EACd,MAAMC,KAAK,GAAG,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;EACzC,MAAMC,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,GAAG,CAACN,KAAK,CAAC,GAAGI,IAAI,CAACE,GAAG,CAACL,CAAC,CAAC,CAAC;EACnD,OAAOM,UAAU,CAAC,CAACP,KAAK,GAAGI,IAAI,CAACI,GAAG,CAACP,CAAC,EAAEE,CAAC,CAAC,EAAEM,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,GAAGP,KAAK,CAACC,CAAC,CAAC;AACzE,CAAC;AAED,MAAMO,WAAW,GAAIC,IAAY,IAAa;EAC5C,IAAIA,IAAI,CAACC,QAAQ,CAAC,KAAK,CAAC,EAAE,OAAO,IAAI;EACrC,IAAID,IAAI,CAACC,QAAQ,CAAC,MAAM,CAAC,IAAID,IAAI,CAACC,QAAQ,CAAC,UAAU,CAAC,EAAE,OAAO,IAAI;EACnE,IAAID,IAAI,CAACC,QAAQ,CAAC,MAAM,CAAC,EAAE,OAAO,IAAI;EACtC,IAAID,IAAI,CAACC,QAAQ,CAAC,OAAO,CAAC,EAAE,OAAO,KAAK;EACxC,OAAO,IAAI;AACb,CAAC;AAED,MAAMC,UAAU,GAAGA,CAAA,KAAc;EAC/B,OAAOT,IAAI,CAACU,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAACH,QAAQ,CAAC,EAAE,CAAC;AAC1E,CAAC;;AAED;AACA,MAAMI,MAAM,gBAAGhG,KAAK,CAACiG,IAAI,CAAAC,GAAA,GAACA,CAAC;EAAEC;AAAyC,CAAC,KAAK;EAC1E,oBACEjF,OAAA;IAAQqC,SAAS,EAAC,4EAA4E;IAAA6C,QAAA,eAC5FlF,OAAA;MAAKqC,SAAS,EAAC,6BAA6B;MAAA6C,QAAA,eAC1ClF,OAAA;QAAKqC,SAAS,EAAC,mCAAmC;QAAA6C,QAAA,gBAChDlF,OAAA;UAAKqC,SAAS,EAAC,yBAAyB;UAAA6C,QAAA,gBACtClF,OAAA;YAAKqC,SAAS,EAAC,UAAU;YAAA6C,QAAA,gBACvBlF,OAAA;cAAKqC,SAAS,EAAC;YAA6F;cAAAY,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eACnHpD,OAAA;cAAKqC,SAAS,EAAC,sEAAsE;cAAA6C,QAAA,eACnFlF,OAAA,CAACZ,GAAG;gBAACiD,SAAS,EAAC;cAAoB;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eACNpD,OAAA;YAAAkF,QAAA,gBACElF,OAAA;cAAIqC,SAAS,EAAC,6FAA6F;cAAA6C,QAAA,EAAC;YAE5G;cAAAjC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACLpD,OAAA;cAAGqC,SAAS,EAAC,+CAA+C;cAAA6C,QAAA,gBAC1DlF,OAAA,CAACR,QAAQ;gBAAC6C,SAAS,EAAC;cAAS;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,kCAElC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAENpD,OAAA,CAACkC,MAAM;UACLI,OAAO,EAAC,SAAS;UACjBC,IAAI,EAAC,IAAI;UACT4C,OAAO,EAAEF,WAAY;UACrB5C,SAAS,EAAC,OAAO;UACjB,cAAW,oBAAoB;UAAA6C,QAAA,gBAE/BlF,OAAA,CAACF,SAAS;YAACuC,SAAS,EAAC;UAAS;YAAAY,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,cAEnC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEb,CAAC,CAAC;AAACgC,GAAA,GArCGN,MAAM;AAuCZA,MAAM,CAACxB,WAAW,GAAG,QAAQ;;AAE7B;;AAQA,MAAM+B,cAAc,gBAAAC,EAAA,cAAGxG,KAAK,CAACiG,IAAI,CAAAQ,GAAA,GAAAD,EAAA,CAAC,CAAC;EACjCE,YAAY;EACZC,aAAa;EACbC,YAAY;EACZC;AACmB,CAAC,KAAK;EAAAL,EAAA;EACzB,MAAM,CAACM,UAAU,EAAEC,aAAa,CAAC,GAAG9G,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM+G,YAAY,GAAG9G,MAAM,CAAmB,IAAI,CAAC;EACnD,MAAM+G,WAAW,GAAG/G,MAAM,CAAC,CAAC,CAAC;EAE7B,MAAMgH,eAAe,GAAG9G,WAAW,CAAE+G,CAAkB,IAAK;IAC1DA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBD,CAAC,CAACE,eAAe,CAAC,CAAC;IACnBJ,WAAW,CAACK,OAAO,EAAE;IACrB,IAAIH,CAAC,CAACI,YAAY,CAACC,KAAK,IAAIL,CAAC,CAACI,YAAY,CAACC,KAAK,CAACC,MAAM,GAAG,CAAC,EAAE;MAC3DV,aAAa,CAAC,IAAI,CAAC;IACrB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMW,eAAe,GAAGtH,WAAW,CAAE+G,CAAkB,IAAK;IAC1DA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBD,CAAC,CAACE,eAAe,CAAC,CAAC;IACnBJ,WAAW,CAACK,OAAO,EAAE;IACrB,IAAIL,WAAW,CAACK,OAAO,KAAK,CAAC,EAAE;MAC7BP,aAAa,CAAC,KAAK,CAAC;IACtB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMY,cAAc,GAAGvH,WAAW,CAAE+G,CAAkB,IAAK;IACzDA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBD,CAAC,CAACE,eAAe,CAAC,CAAC;EACrB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMO,UAAU,GAAGxH,WAAW,CAAE+G,CAAkB,IAAK;IACrDA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBD,CAAC,CAACE,eAAe,CAAC,CAAC;IACnBN,aAAa,CAAC,KAAK,CAAC;IACpBE,WAAW,CAACK,OAAO,GAAG,CAAC;IAEvB,MAAMO,KAAK,GAAGC,KAAK,CAACC,IAAI,CAACZ,CAAC,CAACI,YAAY,CAACM,KAAK,CAAC,CAACG,MAAM,CAACrG,IAAI,IACxDA,IAAI,CAAC6D,IAAI,CAACC,QAAQ,CAAC,KAAK,CAAC,IACzB9D,IAAI,CAAC6D,IAAI,CAACC,QAAQ,CAAC,UAAU,CAAC,IAC9B9D,IAAI,CAAC6D,IAAI,CAACC,QAAQ,CAAC,MAAM,CAAC,IAC1B9D,IAAI,CAACsG,IAAI,CAACC,QAAQ,CAAC,MAAM,CAAC,IAC1BvG,IAAI,CAACsG,IAAI,CAACC,QAAQ,CAAC,MAAM,CAAC,IAC1BvG,IAAI,CAACsG,IAAI,CAACC,QAAQ,CAAC,MAAM,CAC3B,CAAC;IAED,IAAIL,KAAK,CAACJ,MAAM,GAAG,CAAC,EAAE;MACpBf,YAAY,CAACmB,KAAK,CAAC;IACrB;EACF,CAAC,EAAE,CAACnB,YAAY,CAAC,CAAC;EAElB,MAAMyB,gBAAgB,GAAG/H,WAAW,CAAE+G,CAAsC,IAAK;IAC/E,MAAMU,KAAK,GAAGC,KAAK,CAACC,IAAI,CAACZ,CAAC,CAACiB,MAAM,CAACP,KAAK,IAAI,EAAE,CAAC;IAC9C,IAAIA,KAAK,CAACJ,MAAM,GAAG,CAAC,EAAE;MACpBf,YAAY,CAACmB,KAAK,CAAC;IACrB;IACA,IAAIb,YAAY,CAACM,OAAO,EAAE;MACxBN,YAAY,CAACM,OAAO,CAACe,KAAK,GAAG,EAAE;IACjC;EACF,CAAC,EAAE,CAAC3B,YAAY,CAAC,CAAC;EAElB,MAAM4B,iBAAiB,GAAGlI,WAAW,CAAC,MAAM;IAAA,IAAAmI,qBAAA;IAC1C,CAAAA,qBAAA,GAAAvB,YAAY,CAACM,OAAO,cAAAiB,qBAAA,uBAApBA,qBAAA,CAAsBC,KAAK,CAAC,CAAC;EAC/B,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,aAAa,GAAI9F,MAA8B,IAAK;IACxD,QAAQA,MAAM;MACZ,KAAK,WAAW;QACd,oBAAOzB,OAAA,CAACT,MAAM;UAAC8C,SAAS,EAAC;QAAoC;UAAAY,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAClE,KAAK,WAAW;QACd,oBAAOpD,OAAA,CAACL,WAAW;UAAC0C,SAAS,EAAC;QAAwB;UAAAY,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAC3D,KAAK,OAAO;QACV,oBAAOpD,OAAA,CAACJ,WAAW;UAACyC,SAAS,EAAC;QAAsB;UAAAY,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MACzD;QACE,OAAO,IAAI;IACf;EACF,CAAC;EAED,oBACEpD,OAAA;IAAKqC,SAAS,EAAC,WAAW;IAAA6C,QAAA,gBACxBlF,OAAA;MACEqC,SAAS,EAAE;AACnB;AACA,YAAYuD,UAAU,GACR,sCAAsC,GACtC,wDAAwD;AACtE,YACYD,WAAW,GAAG,gCAAgC,GAAG,gBAAgB;AAC7E,SAAU;MACF6B,WAAW,EAAExB,eAAgB;MAC7ByB,WAAW,EAAEjB,eAAgB;MAC7BkB,UAAU,EAAEjB,cAAe;MAC3BkB,MAAM,EAAEjB,UAAW;MACnBvB,OAAO,EAAEiC,iBAAkB;MAC3BQ,IAAI,EAAC,QAAQ;MACbC,QAAQ,EAAE,CAAE;MACZC,SAAS,EAAG7B,CAAC,IAAK;QAChB,IAAIA,CAAC,CAAC8B,GAAG,KAAK,OAAO,IAAI9B,CAAC,CAAC8B,GAAG,KAAK,GAAG,EAAE;UACtC9B,CAAC,CAACC,cAAc,CAAC,CAAC;UAClBkB,iBAAiB,CAAC,CAAC;QACrB;MACF,CAAE;MACF,cAAW,qDAAqD;MAAAlC,QAAA,gBAEhElF,OAAA;QACEyC,GAAG,EAAEqD,YAAa;QAClBxB,IAAI,EAAC,MAAM;QACX0D,QAAQ;QACR3F,SAAS,EAAC,QAAQ;QAClB4F,QAAQ,EAAEhB,gBAAiB;QAC3BiB,MAAM,EAAC,gCAAgC;QACvC,cAAW;MAAgC;QAAAjF,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5C,CAAC,EAEDuC,WAAW,gBACV3F,OAAA;QAAKqC,SAAS,EAAC,WAAW;QAAA6C,QAAA,gBACxBlF,OAAA;UAAKqC,SAAS,EAAC,qBAAqB;UAAA6C,QAAA,eAClClF,OAAA,CAACT,MAAM;YAAC8C,SAAS,EAAC;UAAsC;YAAAY,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxD,CAAC,eACNpD,OAAA;UAAAkF,QAAA,gBACElF,OAAA;YAAGqC,SAAS,EAAC,mCAAmC;YAAA6C,QAAA,EAAC;UAAuB;YAAAjC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eAC5EpD,OAAA;YAAGqC,SAAS,EAAC,uBAAuB;YAAA6C,QAAA,EAAC;UAAuC;YAAAjC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC7E,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,gBAENpD,OAAA;QAAKqC,SAAS,EAAC,WAAW;QAAA6C,QAAA,gBACxBlF,OAAA;UAAKqC,SAAS,EAAC,qBAAqB;UAAA6C,QAAA,eAClClF,OAAA;YAAKqC,SAAS,EAAE,mDACduD,UAAU,GAAG,aAAa,GAAG,aAAa,EACzC;YAAAV,QAAA,eACDlF,OAAA,CAACP,MAAM;cAAC4C,SAAS,EAAE,0CACjBuD,UAAU,GAAG,eAAe,GAAG,eAAe;YAC7C;cAAA3C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eACNpD,OAAA;UAAAkF,QAAA,gBACElF,OAAA;YAAGqC,SAAS,EAAC,mCAAmC;YAAA6C,QAAA,EAC7CU,UAAU,GAAG,sBAAsB,GAAG;UAAuB;YAAA3C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7D,CAAC,eACJpD,OAAA;YAAGqC,SAAS,EAAC,4BAA4B;YAAA6C,QAAA,EAAC;UAE1C;YAAAjC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eACJpD,OAAA;YAAGqC,SAAS,EAAC,4BAA4B;YAAA6C,QAAA,EAAC;UAE1C;YAAAjC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,EAELqC,aAAa,CAACc,MAAM,GAAG,CAAC,iBACvBvG,OAAA;MAAKqC,SAAS,EAAC,WAAW;MAAA6C,QAAA,gBACxBlF,OAAA;QAAIqC,SAAS,EAAC,2DAA2D;QAAA6C,QAAA,gBACvElF,OAAA,CAACH,QAAQ;UAACwC,SAAS,EAAC;QAAuB;UAAAY,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACnC,EAACqC,aAAa,CAACc,MAAM,EAAC,GACnC;MAAA;QAAAtD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAELpD,OAAA;QAAKqC,SAAS,EAAC,oCAAoC;QAAA6C,QAAA,EAChDO,aAAa,CAAC0C,GAAG,CAAE1H,IAAI,iBACtBT,OAAA;UAEEqC,SAAS,EAAC,wGAAwG;UAAA6C,QAAA,gBAElHlF,OAAA;YAAKqC,SAAS,EAAC,wCAAwC;YAAA6C,QAAA,gBACrDlF,OAAA;cAAMqC,SAAS,EAAC,SAAS;cAACuF,IAAI,EAAC,KAAK;cAAC,cAAY,GAAGnH,IAAI,CAAC6D,IAAI,OAAQ;cAAAY,QAAA,EAClEb,WAAW,CAAC5D,IAAI,CAAC6D,IAAI;YAAC;cAAArB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnB,CAAC,eACPpD,OAAA;cAAKqC,SAAS,EAAC,gBAAgB;cAAA6C,QAAA,gBAC7BlF,OAAA;gBAAGqC,SAAS,EAAC,4CAA4C;gBAAC+F,KAAK,EAAE3H,IAAI,CAACsG,IAAK;gBAAA7B,QAAA,EACxEzE,IAAI,CAACsG;cAAI;gBAAA9D,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACT,CAAC,eACJpD,OAAA;gBAAGqC,SAAS,EAAC,uBAAuB;gBAAA6C,QAAA,GACjCxB,cAAc,CAACjD,IAAI,CAAC8B,IAAI,CAAC,EAAC,UAAG,EAAC9B,IAAI,CAAC4H,UAAU,CAACC,kBAAkB,CAAC,CAAC;cAAA;gBAAArF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClE,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD,CAAC,eACNpD,OAAA;cAAKqC,SAAS,EAAC,yBAAyB;cAAA6C,QAAA,GACrCqC,aAAa,CAAC9G,IAAI,CAACgB,MAAM,CAAC,eAC3BzB,OAAA;gBAAMqC,SAAS,EAAC,kCAAkC;gBAAA6C,QAAA,EAAEzE,IAAI,CAACgB;cAAM;gBAAAwB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eAENpD,OAAA,CAACkC,MAAM;YACLI,OAAO,EAAC,OAAO;YACfC,IAAI,EAAC,IAAI;YACT4C,OAAO,EAAEA,CAAA,KAAMO,YAAY,CAACjF,IAAI,CAAC8H,EAAE,CAAE;YACrClG,SAAS,EAAC,8CAA8C;YACxDmG,QAAQ,EAAE/H,IAAI,CAACgB,MAAM,KAAK,WAAY;YACtC,cAAY,UAAUhB,IAAI,CAACsG,IAAI,EAAG;YAAA7B,QAAA,eAElClF,OAAA,CAACN,CAAC;cAAC2C,SAAS,EAAC;YAAS;cAAAY,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnB,CAAC;QAAA,GA9BJ3C,IAAI,CAAC8H,EAAE;UAAAtF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OA+BT,CACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,EAEAqC,aAAa,CAACc,MAAM,KAAK,CAAC,IAAI,CAACZ,WAAW,iBACzC3F,OAAA;MAAKqC,SAAS,EAAC,kBAAkB;MAAA6C,QAAA,gBAC/BlF,OAAA,CAACJ,WAAW;QAACyC,SAAS,EAAC;MAAoC;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAC9DpD,OAAA;QAAGqC,SAAS,EAAC,uBAAuB;QAAA6C,QAAA,EAAC;MAAyB;QAAAjC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eAClEpD,OAAA;QAAGqC,SAAS,EAAC,4BAA4B;QAAA6C,QAAA,EAAC;MAAuC;QAAAjC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClF,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC,kCAAC;AAACqF,GAAA,GAhNGpD,cAAc;AAkNpBA,cAAc,CAAC/B,WAAW,GAAG,gBAAgB;;AAE7C;;AASA,MAAMoF,aAAa,gBAAAC,GAAA,cAAG7J,KAAK,CAACiG,IAAI,CAAA6D,GAAA,GAAAD,GAAA,CAAC,CAAC;EAChCE,QAAQ;EACRC,aAAa;EACbC,YAAY;EACZC,YAAY;EACZxH;AACkB,CAAC,KAAK;EAAAmH,GAAA;EACxB,MAAM,CAACM,YAAY,EAAEC,eAAe,CAAC,GAAGnK,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAMoK,cAAc,GAAGnK,MAAM,CAAiB,IAAI,CAAC;EACnD,MAAMoK,WAAW,GAAGpK,MAAM,CAAsB,IAAI,CAAC;EAErD,MAAMqK,cAAc,GAAGnK,WAAW,CAAC,MAAM;IAAA,IAAAoK,qBAAA;IACvC,CAAAA,qBAAA,GAAAH,cAAc,CAAC/C,OAAO,cAAAkD,qBAAA,uBAAtBA,qBAAA,CAAwBC,cAAc,CAAC;MAAEC,QAAQ,EAAE;IAAS,CAAC,CAAC;EAChE,CAAC,EAAE,EAAE,CAAC;EAENvK,SAAS,CAAC,MAAM;IACdoK,cAAc,CAAC,CAAC;EAClB,CAAC,EAAE,CAACR,QAAQ,EAAEQ,cAAc,CAAC,CAAC;EAE9B,MAAMI,YAAY,GAAGvK,WAAW,CAAE+G,CAAkB,IAAK;IACvDA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,IAAI+C,YAAY,CAACS,IAAI,CAAC,CAAC,IAAI,CAACX,YAAY,IAAIC,YAAY,EAAE;MACxDF,aAAa,CAACG,YAAY,CAACS,IAAI,CAAC,CAAC,CAAC;MAClCR,eAAe,CAAC,EAAE,CAAC;MACnB;MACAS,UAAU,CAAC;QAAA,IAAAC,oBAAA;QAAA,QAAAA,oBAAA,GAAMR,WAAW,CAAChD,OAAO,cAAAwD,oBAAA,uBAAnBA,oBAAA,CAAqBC,KAAK,CAAC,CAAC;MAAA,GAAE,GAAG,CAAC;IACrD;EACF,CAAC,EAAE,CAACZ,YAAY,EAAEF,YAAY,EAAEC,YAAY,EAAEF,aAAa,CAAC,CAAC;EAE7D,MAAMgB,aAAa,GAAG5K,WAAW,CAAE+G,CAAsB,IAAK;IAC5D,IAAIA,CAAC,CAAC8B,GAAG,KAAK,OAAO,IAAI,CAAC9B,CAAC,CAAC8D,QAAQ,EAAE;MACpC9D,CAAC,CAACC,cAAc,CAAC,CAAC;MAClBuD,YAAY,CAACxD,CAAC,CAAC;IACjB;EACF,CAAC,EAAE,CAACwD,YAAY,CAAC,CAAC;EAElB,MAAMO,iBAAiB,GAAG9K,WAAW,CAAE+G,CAAyC,IAAK;IACnFiD,eAAe,CAACjD,CAAC,CAACiB,MAAM,CAACC,KAAK,CAAC;EACjC,CAAC,EAAE,EAAE,CAAC;EAEN,oBACEnH,OAAA;IAAKqC,SAAS,EAAC,gEAAgE;IAAA6C,QAAA,gBAC7ElF,OAAA;MAAKqC,SAAS,EAAC,8DAA8D;MAAA6C,QAAA,eAC3ElF,OAAA;QAAKqC,SAAS,EAAC,yBAAyB;QAAA6C,QAAA,gBACtClF,OAAA;UAAKqC,SAAS,EAAC,UAAU;UAAA6C,QAAA,gBACvBlF,OAAA;YAAKqC,SAAS,EAAC;UAA8F;YAAAY,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACpHpD,OAAA;YAAKqC,SAAS,EAAC,iFAAiF;YAAA6C,QAAA,eAC9FlF,OAAA,CAACV,aAAa;cAAC+C,SAAS,EAAC;YAAoB;cAAAY,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7C,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eACNpD,OAAA;UAAKqC,SAAS,EAAC,QAAQ;UAAA6C,QAAA,gBACrBlF,OAAA;YAAIqC,SAAS,EAAC,4FAA4F;YAAA6C,QAAA,EAAC;UAE3G;YAAAjC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACLpD,OAAA;YAAGqC,SAAS,EAAC,+CAA+C;YAAA6C,QAAA,gBAC1DlF,OAAA,CAACR,QAAQ;cAAC6C,SAAS,EAAC;YAAS;cAAAY,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,EAC/B4F,YAAY,GACT,gDAAgD,GAChD,uDAAuD;UAAA;YAAA/F,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAE1D,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC,eACNpD,OAAA;UAAKqC,SAAS,EAAC,yBAAyB;UAAA6C,QAAA,gBACtClF,OAAA;YAAKqC,SAAS,EAAE,wBAAwB2G,YAAY,GAAG,cAAc,GAAG,cAAc;UAAiB;YAAA/F,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC9GpD,OAAA;YAAMqC,SAAS,EAAC,mCAAmC;YAAA6C,QAAA,EAChD8D,YAAY,GAAG,OAAO,GAAG;UAAS;YAAA/F,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/B,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAENpD,OAAA;MAAKqC,SAAS,EAAC,wBAAwB;MAAA6C,QAAA,eACrClF,OAAA;QAAKqC,SAAS,EAAC,sCAAsC;QAAA6C,QAAA,GAClD1D,KAAK,iBACJxB,OAAA;UAAKqC,SAAS,EAAC,kDAAiD;UAACuF,IAAI,EAAC,OAAO;UAAA1C,QAAA,gBAC3ElF,OAAA;YAAKqC,SAAS,EAAC,yBAAyB;YAAA6C,QAAA,gBACtClF,OAAA,CAACJ,WAAW;cAACyC,SAAS,EAAC;YAAsB;cAAAY,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eAChDpD,OAAA;cAAGqC,SAAS,EAAC,kCAAkC;cAAA6C,QAAA,EAAC;YAAK;cAAAjC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACtD,CAAC,eACNpD,OAAA;YAAGqC,SAAS,EAAC,2BAA2B;YAAA6C,QAAA,EAAE1D;UAAK;YAAAyB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjD,CACN,EAEAyF,QAAQ,CAACtC,MAAM,KAAK,CAAC,gBACpBvG,OAAA;UAAKqC,SAAS,EAAC,oEAAoE;UAAA6C,QAAA,gBACjFlF,OAAA;YAAKqC,SAAS,EAAC,eAAe;YAAA6C,QAAA,gBAC5BlF,OAAA;cAAKqC,SAAS,EAAC;YAA+F;cAAAY,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eACrHpD,OAAA;cAAKqC,SAAS,EAAC,uIAAuI;cAAA6C,QAAA,eACpJlF,OAAA,CAACZ,GAAG;gBAACiD,SAAS,EAAC;cAAyB;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACxC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eACNpD,OAAA;YAAIqC,SAAS,EAAC,uCAAuC;YAAA6C,QAAA,EAAC;UAEtD;YAAAjC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACLpD,OAAA;YAAGqC,SAAS,EAAC,wCAAwC;YAAA6C,QAAA,EAClD8D,YAAY,GACT,kIAAkI,GAClI;UAAkH;YAAA/F,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAErH,CAAC,EACH4F,YAAY,iBACXhJ,OAAA;YAAKqC,SAAS,EAAC,0DAA0D;YAAA6C,QAAA,gBACvElF,OAAA;cAAGqC,SAAS,EAAC,mCAAmC;cAAA6C,QAAA,EAAC;YAA6B;cAAAjC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eAClFpD,OAAA;cAAIqC,SAAS,EAAC,sCAAsC;cAAA6C,QAAA,gBAClDlF,OAAA;gBAAAkF,QAAA,EAAI;cAAqC;gBAAAjC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAC9CpD,OAAA;gBAAAkF,QAAA,EAAI;cAAqC;gBAAAjC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAC9CpD,OAAA;gBAAAkF,QAAA,EAAI;cAAwC;gBAAAjC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC/C,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACF,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC,gBAENpD,OAAA,CAAAE,SAAA;UAAAgF,QAAA,GACG2D,QAAQ,CAACV,GAAG,CAAE8B,OAAO,iBACpBjK,OAAA;YAEEqC,SAAS,EAAE,cAAc4H,OAAO,CAAC3F,IAAI,KAAK,MAAM,GAAG,kBAAkB,GAAG,UAAU,kBAAmB;YAAAY,QAAA,gBAErGlF,OAAA;cAAKqC,SAAS,EAAE,kFACd4H,OAAO,CAAC3F,IAAI,KAAK,MAAM,GACnB,gDAAgD,GAChD,8CAA8C,EACjD;cAAAY,QAAA,EACA+E,OAAO,CAAC3F,IAAI,KAAK,MAAM,gBACtBtE,OAAA,CAACX,IAAI;gBAACgD,SAAS,EAAC;cAAoB;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,gBAEvCpD,OAAA,CAACZ,GAAG;gBAACiD,SAAS,EAAC;cAAoB;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YACtC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACE,CAAC,eAENpD,OAAA;cAAKqC,SAAS,EAAE,oBAAoB4H,OAAO,CAAC3F,IAAI,KAAK,MAAM,GAAG,YAAY,GAAG,WAAW,EAAG;cAAAY,QAAA,gBACzFlF,OAAA;gBAAKqC,SAAS,EAAE,0CACd4H,OAAO,CAAC3F,IAAI,KAAK,MAAM,GACnB,2DAA2D,GAC3D,+CAA+C,EAClD;gBAAAY,QAAA,gBACDlF,OAAA;kBAAGqC,SAAS,EAAC,qCAAqC;kBAAA6C,QAAA,EAAE+E,OAAO,CAACC;gBAAO;kBAAAjH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,EACvE6G,OAAO,CAACE,OAAO,IAAIF,OAAO,CAACE,OAAO,CAAC5D,MAAM,GAAG,CAAC,iBAC5CvG,OAAA;kBAAKqC,SAAS,EAAC,oCAAoC;kBAAA6C,QAAA,gBACjDlF,OAAA;oBAAGqC,SAAS,EAAC,wCAAwC;oBAAA6C,QAAA,EAAC;kBAAQ;oBAAAjC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAG,CAAC,eAClEpD,OAAA;oBAAKqC,SAAS,EAAC,WAAW;oBAAA6C,QAAA,EACvB+E,OAAO,CAACE,OAAO,CAAChC,GAAG,CAAC,CAACiC,MAAM,EAAEC,KAAK,kBACjCrK,OAAA;sBAAiBqC,SAAS,EAAC,8CAA8C;sBAAA6C,QAAA,GACtEkF,MAAM,CAACA,MAAM,iBAAIpK,OAAA;wBAAMqC,SAAS,EAAC,aAAa;wBAAA6C,QAAA,EAAEkF,MAAM,CAACA;sBAAM;wBAAAnH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAO,CAAC,EACrEgH,MAAM,CAACE,IAAI,iBAAItK,OAAA;wBAAMqC,SAAS,EAAC,MAAM;wBAAA6C,QAAA,GAAC,OAAK,EAACkF,MAAM,CAACE,IAAI;sBAAA;wBAAArH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAO,CAAC;oBAAA,GAFxDiH,KAAK;sBAAApH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAGV,CACN;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACC,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CACN;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC,eACNpD,OAAA;gBAAGqC,SAAS,EAAC,yDAAyD;gBAAA6C,QAAA,gBACpElF,OAAA;kBAAMqC,SAAS,EAAC;gBAAkC;kBAAAY,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAC1DpD,OAAA;kBAAMuK,QAAQ,EAAEN,OAAO,CAACO,SAAS,CAACC,WAAW,CAAC,CAAE;kBAAAvF,QAAA,EAC7C+E,OAAO,CAACO,SAAS,CAACE,kBAAkB,CAAC,EAAE,EAAE;oBAAEC,IAAI,EAAE,SAAS;oBAAEC,MAAM,EAAE;kBAAU,CAAC;gBAAC;kBAAA3H,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC7E,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD,CAAC;UAAA,GA1CD6G,OAAO,CAAC1B,EAAE;YAAAtF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OA2CZ,CACN,CAAC,EAED2F,YAAY,iBACX/I,OAAA;YAAKqC,SAAS,EAAC,4BAA4B;YAAA6C,QAAA,gBACzClF,OAAA;cAAKqC,SAAS,EAAC,6HAA6H;cAAA6C,QAAA,eAC1IlF,OAAA,CAACZ,GAAG;gBAACiD,SAAS,EAAC;cAAoB;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnC,CAAC,eAENpD,OAAA;cAAKqC,SAAS,EAAC,QAAQ;cAAA6C,QAAA,eACrBlF,OAAA;gBAAKqC,SAAS,EAAC,wEAAwE;gBAAA6C,QAAA,eACrFlF,OAAA;kBAAKqC,SAAS,EAAC,uCAAuC;kBAAA6C,QAAA,gBACpDlF,OAAA;oBAAKqC,SAAS,EAAC,gBAAgB;oBAAA6C,QAAA,gBAC7BlF,OAAA;sBAAKqC,SAAS,EAAC;oBAAiD;sBAAAY,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC,eACvEpD,OAAA;sBAAKqC,SAAS,EAAC,iDAAiD;sBAACwI,KAAK,EAAE;wBAACC,cAAc,EAAE;sBAAM;oBAAE;sBAAA7H,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC,eACxGpD,OAAA;sBAAKqC,SAAS,EAAC,iDAAiD;sBAACwI,KAAK,EAAE;wBAACC,cAAc,EAAE;sBAAM;oBAAE;sBAAA7H,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACrG,CAAC,eACNpD,OAAA;oBAAMqC,SAAS,EAAC,qBAAqB;oBAAA6C,QAAA,EAAC;kBAAiC;oBAAAjC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC3E;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CACN;QAAA,eACD,CACH,eACDpD,OAAA;UAAKyC,GAAG,EAAE0G;QAAe;UAAAlG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzB;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAENpD,OAAA;MAAKqC,SAAS,EAAC,8DAA8D;MAAA6C,QAAA,eAC3ElF,OAAA;QAAM+K,QAAQ,EAAEtB,YAAa;QAACpH,SAAS,EAAC,WAAW;QAAA6C,QAAA,gBACjDlF,OAAA;UAAKqC,SAAS,EAAC,UAAU;UAAA6C,QAAA,gBACvBlF,OAAA,CAACuD,QAAQ;YACPd,GAAG,EAAE2G,WAAY;YACjBjC,KAAK,EAAE8B,YAAa;YACpBhB,QAAQ,EAAE+B,iBAAkB;YAC5BlC,SAAS,EAAEgC,aAAc;YACzBkB,WAAW,EAAEhC,YAAY,GAAG,sCAAsC,GAAG,0CAA2C;YAChHR,QAAQ,EAAE,CAACQ,YAAY,IAAID,YAAa;YACxC1G,SAAS,EAAC,qKAAqK;YAC/K,cAAW;UAAe;YAAAY,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3B,CAAC,eACFpD,OAAA,CAACkC,MAAM;YACLoC,IAAI,EAAC,QAAQ;YACb/B,IAAI,EAAC,IAAI;YACTiG,QAAQ,EAAE,CAACS,YAAY,CAACS,IAAI,CAAC,CAAC,IAAI,CAACV,YAAY,IAAID,YAAa;YAChE1G,SAAS,EAAC,6LAA6L;YACvM,cAAW,cAAc;YAAA6C,QAAA,eAEzBlF,OAAA,CAACb,IAAI;cAACkD,SAAS,EAAC;YAAS;cAAAY,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACtB,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,EAEL,CAAC4F,YAAY,iBACZhJ,OAAA;UAAKqC,SAAS,EAAC,+EAA+E;UAACuF,IAAI,EAAC,QAAQ;UAAA1C,QAAA,gBAC1GlF,OAAA;YAAKqC,SAAS,EAAC;UAAiD;YAAAY,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACvEpD,OAAA;YAAGqC,SAAS,EAAC,oCAAoC;YAAA6C,QAAA,EAAC;UAElD;YAAAjC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACG;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC,kCAAC;AAAC6H,IAAA,GA/NGvC,aAAa;AAiOnBA,aAAa,CAACpF,WAAW,GAAG,eAAe;;AAE3C;AACA,MAAM4H,WAAW,GAAGA,CAAA,KAAM;EAAAC,GAAA;EACxB,MAAM,CAAC1F,aAAa,EAAE2F,gBAAgB,CAAC,GAAGrM,QAAQ,CAAiB,EAAE,CAAC;EACtE,MAAM,CAACsM,YAAY,EAAEC,eAAe,CAAC,GAAGvM,QAAQ,CAAgB,EAAE,CAAC;EACnE,MAAM,CAAC4G,WAAW,EAAE4F,cAAc,CAAC,GAAGxM,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACgK,YAAY,EAAEyC,eAAe,CAAC,GAAGzM,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAACyC,KAAK,EAAEiK,QAAQ,CAAC,GAAG1M,QAAQ,CAAgB,IAAI,CAAC;EAEvD,MAAM2M,gBAAgB,GAAGxM,WAAW,CAAC,MAAOyH,KAAa,IAAK;IAC5D,IAAIA,KAAK,CAACJ,MAAM,KAAK,CAAC,EAAE;IAExBgF,cAAc,CAAC,IAAI,CAAC;IACpBE,QAAQ,CAAC,IAAI,CAAC;;IAEd;IACA,MAAME,QAAwB,GAAGhF,KAAK,CAACwB,GAAG,CAAC1H,IAAI,KAAK;MAClD8H,EAAE,EAAE/D,UAAU,CAAC,CAAC;MAChBuC,IAAI,EAAEtG,IAAI,CAACsG,IAAI;MACfxE,IAAI,EAAE9B,IAAI,CAAC8B,IAAI;MACf+B,IAAI,EAAE7D,IAAI,CAAC6D,IAAI;MACf+D,UAAU,EAAE,IAAIzD,IAAI,CAAC,CAAC;MACtBnD,MAAM,EAAE;IACV,CAAC,CAAC,CAAC;IAEH2J,gBAAgB,CAACQ,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE,GAAGD,QAAQ,CAAC,CAAC;;IAEhD;IACA,IAAI;MACF,MAAME,cAAc,GAAGlF,KAAK,CAACwB,GAAG,CAAC,OAAO1H,IAAI,EAAE4J,KAAK,KAAK;QACtD,MAAMyB,MAAM,GAAGH,QAAQ,CAACtB,KAAK,CAAC,CAAC9B,EAAE;QACjC,IAAI;UACF,MAAM/H,mBAAmB,CAACC,IAAI,CAAC;UAC/B;UACA2K,gBAAgB,CAACQ,IAAI,IACnBA,IAAI,CAACzD,GAAG,CAAC4D,CAAC,IACRA,CAAC,CAACxD,EAAE,KAAKuD,MAAM,GACX;YAAE,GAAGC,CAAC;YAAEtK,MAAM,EAAE;UAAqB,CAAC,GACtCsK,CACN,CACF,CAAC;QACH,CAAC,CAAC,OAAOvK,KAAK,EAAE;UACdwK,OAAO,CAACxK,KAAK,CAAC,oBAAoBf,IAAI,CAACsG,IAAI,GAAG,EAAEvF,KAAK,CAAC;UACtD;UACA4J,gBAAgB,CAACQ,IAAI,IACnBA,IAAI,CAACzD,GAAG,CAAC4D,CAAC,IACRA,CAAC,CAACxD,EAAE,KAAKuD,MAAM,GACX;YAAE,GAAGC,CAAC;YAAEtK,MAAM,EAAE;UAAiB,CAAC,GAClCsK,CACN,CACF,CAAC;UACD,MAAMvK,KAAK;QACb;MACF,CAAC,CAAC;MAEF,MAAMyK,OAAO,CAACC,UAAU,CAACL,cAAc,CAAC;IAC1C,CAAC,CAAC,OAAOrK,KAAK,EAAE;MACd,MAAMJ,YAAY,GAAGI,KAAK,YAAYG,KAAK,GAAGH,KAAK,CAACyI,OAAO,GAAG,eAAe;MAC7EwB,QAAQ,CAAC,kBAAkBrK,YAAY,EAAE,CAAC;IAC5C,CAAC,SAAS;MACRmK,cAAc,CAAC,KAAK,CAAC;IACvB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMY,iBAAiB,GAAGjN,WAAW,CAAC,MAAO+K,OAAe,IAAK;IAC/D,IAAI,CAACA,OAAO,CAACP,IAAI,CAAC,CAAC,EAAE;IAErB,MAAM0C,WAAwB,GAAG;MAC/B7D,EAAE,EAAE/D,UAAU,CAAC,CAAC;MAChBF,IAAI,EAAE,MAAM;MACZ4F,OAAO,EAAED,OAAO;MAChBO,SAAS,EAAE,IAAI5F,IAAI,CAAC;IACtB,CAAC;IAED0G,eAAe,CAACM,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEQ,WAAW,CAAC,CAAC;IAC/CZ,eAAe,CAAC,IAAI,CAAC;IACrBC,QAAQ,CAAC,IAAI,CAAC;IAEd,IAAI;MACF,MAAM5K,QAAQ,GAAG,MAAMgB,oBAAoB,CAACoI,OAAO,CAAC;MAEpD,MAAMoC,UAAuB,GAAG;QAC9B9D,EAAE,EAAE/D,UAAU,CAAC,CAAC;QAChBF,IAAI,EAAE,KAAK;QACX4F,OAAO,EAAErJ,QAAQ,CAACyL,MAAM;QACxB9B,SAAS,EAAE,IAAI5F,IAAI,CAAC,CAAC;QACrBuF,OAAO,EAAEtJ,QAAQ,CAACsJ;MACpB,CAAC;MAEDmB,eAAe,CAACM,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAES,UAAU,CAAC,CAAC;IAChD,CAAC,CAAC,OAAO7K,KAAK,EAAE;MACd,MAAMJ,YAAY,GAAGI,KAAK,YAAYG,KAAK,GAAGH,KAAK,CAACyI,OAAO,GAAG,wBAAwB;MACtFwB,QAAQ,CAACrK,YAAY,CAAC;MAEtB,MAAMiL,UAAuB,GAAG;QAC9B9D,EAAE,EAAE/D,UAAU,CAAC,CAAC;QAChBF,IAAI,EAAE,KAAK;QACX4F,OAAO,EAAE,kCAAkC9I,YAAY,qBAAqB;QAC5EoJ,SAAS,EAAE,IAAI5F,IAAI,CAAC;MACtB,CAAC;MAED0G,eAAe,CAACM,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAES,UAAU,CAAC,CAAC;IAChD,CAAC,SAAS;MACRb,eAAe,CAAC,KAAK,CAAC;IACxB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMe,gBAAgB,GAAGrN,WAAW,CAAE4M,MAAc,IAAK;IACvDV,gBAAgB,CAACQ,IAAI,IAAIA,IAAI,CAAC9E,MAAM,CAACrG,IAAI,IAAIA,IAAI,CAAC8H,EAAE,KAAKuD,MAAM,CAAC,CAAC;EACnE,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMU,eAAe,GAAGtN,WAAW,CAAC,YAAY;IAC9C,IAAI;MACF,MAAM+C,eAAe,CAAC,CAAC;MACvBqJ,eAAe,CAAC,EAAE,CAAC;MACnBG,QAAQ,CAAC,IAAI,CAAC;IAChB,CAAC,CAAC,OAAOjK,KAAK,EAAE;MACd,MAAMJ,YAAY,GAAGI,KAAK,YAAYG,KAAK,GAAGH,KAAK,CAACyI,OAAO,GAAG,eAAe;MAC7EwB,QAAQ,CAAC,yBAAyBrK,YAAY,EAAE,CAAC;IACnD;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMqL,qBAAqB,GAAGhH,aAAa,CAACiH,IAAI,CAACjM,IAAI,IAAIA,IAAI,CAACgB,MAAM,KAAK,WAAW,CAAC;EAErF,oBACEzB,OAAA;IAAKqC,SAAS,EAAC,wEAAwE;IAAA6C,QAAA,gBACrFlF,OAAA,CAAC8E,MAAM;MAACG,WAAW,EAAEuH;IAAgB;MAAAvJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAExCpD,OAAA;MAAKqC,SAAS,EAAC,uCAAuC;MAAA6C,QAAA,eACpDlF,OAAA;QAAKqC,SAAS,EAAC,6DAA6D;QAAA6C,QAAA,gBAC1ElF,OAAA;UAAKqC,SAAS,EAAC,eAAe;UAAA6C,QAAA,eAC5BlF,OAAA;YAAKqC,SAAS,EAAC,kGAAkG;YAAA6C,QAAA,gBAC/GlF,OAAA;cAAKqC,SAAS,EAAC,8BAA8B;cAAA6C,QAAA,eAC3ClF,OAAA;gBAAKqC,SAAS,EAAC,yBAAyB;gBAAA6C,QAAA,gBACtClF,OAAA;kBAAKqC,SAAS,EAAC,6DAA6D;kBAAA6C,QAAA,eAC1ElF,OAAA,CAACH,QAAQ;oBAACwC,SAAS,EAAC;kBAAoB;oBAAAY,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACxC,CAAC,eACNpD,OAAA;kBAAAkF,QAAA,gBACElF,OAAA;oBAAIqC,SAAS,EAAC,qCAAqC;oBAAA6C,QAAA,EAAC;kBAAS;oBAAAjC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,eAClEpD,OAAA;oBAAGqC,SAAS,EAAC,uBAAuB;oBAAA6C,QAAA,GACjCO,aAAa,CAACc,MAAM,EAAC,gBAAS,EAACd,aAAa,CAACqB,MAAM,CAACiF,CAAC,IAAIA,CAAC,CAACtK,MAAM,KAAK,WAAW,CAAC,CAAC8E,MAAM,EAAC,YAC7F;kBAAA;oBAAAtD,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAG,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACD,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eAENpD,OAAA;cAAKqC,SAAS,EAAC,4BAA4B;cAAA6C,QAAA,eACzClF,OAAA,CAACqF,cAAc;gBACbG,YAAY,EAAEkG,gBAAiB;gBAC/BjG,aAAa,EAAEA,aAAc;gBAC7BC,YAAY,EAAE6G,gBAAiB;gBAC/B5G,WAAW,EAAEA;cAAY;gBAAA1C,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC1B;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAENpD,OAAA;UAAKqC,SAAS,EAAC,eAAe;UAAA6C,QAAA,eAC5BlF,OAAA;YAAKqC,SAAS,EAAC,kFAAkF;YAAA6C,QAAA,eAC/FlF,OAAA,CAAC0I,aAAa;cACZG,QAAQ,EAAEwC,YAAa;cACvBvC,aAAa,EAAEqD,iBAAkB;cACjCpD,YAAY,EAAEA,YAAa;cAC3BC,YAAY,EAAEyD,qBAAsB;cACpCjL,KAAK,EAAEA;YAAM;cAAAyB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACd;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC+H,GAAA,CA1KID,WAAW;AAAAyB,IAAA,GAAXzB,WAAW;AA4KjB,eAAeA,WAAW;AAAC,IAAA9I,EAAA,EAAAiB,GAAA,EAAAG,GAAA,EAAAC,GAAA,EAAAuB,GAAA,EAAAI,GAAA,EAAAG,GAAA,EAAAkD,GAAA,EAAAG,GAAA,EAAAqC,IAAA,EAAA0B,IAAA;AAAAC,YAAA,CAAAxK,EAAA;AAAAwK,YAAA,CAAAvJ,GAAA;AAAAuJ,YAAA,CAAApJ,GAAA;AAAAoJ,YAAA,CAAAnJ,GAAA;AAAAmJ,YAAA,CAAA5H,GAAA;AAAA4H,YAAA,CAAAxH,GAAA;AAAAwH,YAAA,CAAArH,GAAA;AAAAqH,YAAA,CAAAnE,GAAA;AAAAmE,YAAA,CAAAhE,GAAA;AAAAgE,YAAA,CAAA3B,IAAA;AAAA2B,YAAA,CAAAD,IAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}